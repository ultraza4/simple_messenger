/*! For license information please see main.e0fcbff0.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case I:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,_e=null;function Ie(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Te(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Se||null!==_e)&&(Ne(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,_t,It,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Ot=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function jt(){Et=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==At&&Vt(At)&&(At=null),Pt.forEach(Ut),Ot.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Mt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return _n}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Dn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Vr(e,0)}function $n(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Hn)){var t=[];Wn(t,Hn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Hn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},_r={};function Ir(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Rr=Pr[Dr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Er,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=On;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Oe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Oe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],Si=-1;function _i(e){return{current:e}}function Ii(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function Ei(e,t){Si++,xi[Si]=e.current,e.current=t}var Ti={},Ci=_i(Ti),Ni=_i(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ii(Ni),Ii(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Ei(Ci,e)):Ii(Ni),Ei(Ni,n)}var Vi=null,Ui=!1,ji=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!ji&&null!==Vi){ji=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=b.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=_i(null),Gi=null,Hi=null,Qi=null;function $i(){Qi=Hi=Gi=null}function Yi(e){var t=Wi.current;Ii(Wi),e._currentValue=t}function Xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xs(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Oi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Oi(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ya=[],ga=0,ka=null,ba=0,wa=[],xa=0,Sa=null,_a=1,Ia="";function Ea(e,t){ya[ga++]=ba,ya[ga++]=ka,ka=e,ba=t}function Ta(e,t,n){wa[xa++]=_a,wa[xa++]=Ia,wa[xa++]=Sa,Sa=e;var r=_a;e=Ia;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_a=1<<32-ot(t)+i|n<<i|r,Ia=a+e}else _a=1<<a|n<<i|r,Ia=e}function Ca(e){null!==e.return&&(Ea(e,1),Ta(e,1,0))}function Na(e){for(;e===ka;)ka=ya[--ga],ya[ga]=null,ba=ya[--ga],ya[ga]=null;for(;e===Sa;)Sa=wa[--xa],wa[xa]=null,Ia=wa[--xa],wa[xa]=null,_a=wa[--xa],wa[xa]=null}var Aa=null,Pa=null,Oa=!1,Da=null;function Ra(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Pa=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Pa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Sa?{id:_a,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Pa=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Oa){var t=Pa;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Ra(r,n):(e.flags=-4097&e.flags|2,Oa=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Oa=!1,Aa=e}}}function Va(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Ua(e){if(e!==Aa)return!1;if(!Oa)return Va(e),Oa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Pa)){if(Ma(e)){for(e=Pa;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Ra(e,t),t=ci(t.nextSibling)}if(Va(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Pa=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Pa=null}}else Pa=Aa?ci(e.stateNode.nextSibling):null;return!0}function ja(){Pa=Aa=null,Oa=!1}function Ba(e){null===Da?Da=[e]:Da.push(e)}function za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ka(a)===t.type)?((r=i(t,n.props)).ref=za(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=za(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=za(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Rc(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Oa&&Ea(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Oa&&Ea(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Oa&&Ea(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Oa&&Ea(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Oa&&Ea(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Oa&&Ea(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=za(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((a=Rc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=za(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ga=Wa(!0),Ha=Wa(!1),Qa={},$a=_i(Qa),Ya=_i(Qa),Xa=_i(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ei(Xa,t),Ei(Ya,e),Ei($a,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii($a),Ei($a,t)}function eo(){Ii($a),Ii(Ya),Ii(Xa)}function to(e){Ja(Xa.current);var t=Ja($a.current),n=se(t,e.type);t!==n&&(Ei(Ya,e),Ei($a,n))}function no(e){Ya.current===e&&(Ii($a),Ii(Ya))}var ro=_i(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,yo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==mo;return mo=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function So(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function _o(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ds|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ds|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Uo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Ro(9,Ao.bind(null,n,r,i,t),void 0,null),null===Es)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Oo(t)&&Zs(e,1,-1)}function Po(e,t,n){return n((function(){Oo(t)&&Zs(e,1,-1)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Do(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return So().memoizedState}function Mo(e,t,n,r){var i=xo();lo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}lo.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Vo(e,t){return Mo(8390656,8,e,t)}function Uo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ds|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function $o(){return So().memoizedState}function Yo(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r))}function Xo(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Do,useDebugValue:Ko,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=xo();if(Oa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Es)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Es.identifierPrefix;if(Oa){var n=Ia;t=":"+t+"R"+(n=(_a&~(1<<32-ot(_a)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:Io,useRef:Lo,useState:function(){return Io(_o)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(So(),fo.memoizedState,e)},useTransition:function(){return[Io(_o)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Uo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:Eo,useRef:Lo,useState:function(){return Eo(_o)},useDebugValue:Ko,useDeferredValue:function(e){var t=So();return null===fo?t.memoizedState=e:Ho(t,fo.memoizedState,e)},useTransition:function(){return[Eo(_o)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:$o,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,zs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function yu(e,t){if(!Oa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Oi(t.type)&&Di(),gu(t),null;case 3:return r=t.stateNode,eo(),Ii(Ni),Ii(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),gu(t),null;case 5:no(t);var i=Ja(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Ja($a.current),Ua(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Xa.current),Ja($a.current),Ua(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Ii(ro),r=t.memoizedState,Oa&&null!==Pa&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Pa;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ua(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ua(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ps&&(Ps=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&zr(t.stateNode.containerInfo),gu(t),null;case 10:return Yi(t.type._context),gu(t),null;case 19:if(Ii(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)yu(o,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,yu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Us&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),yu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Oa)return gu(t),null}else 2*Xe()-o.renderingStartTime>Us&&1073741824!==n&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,Ei(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja($a.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function xu(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function Su(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Oa&&n&&Ca(t),t.flags|=1,xu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(As,Ns),Ns|=r;return xu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Oi(n)?Ai:Ci.current;return a=Pi(t,a),Ji(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Oa&&r&&Ca(t),t.flags|=1,xu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Nu(e,t,n,r,i){if(Oi(n)){var a=!0;Mi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Pi(t,c=Oi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ki(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Pi(t,s=Oi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,u,a)):xu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pu(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Za(e,t.containerInfo)}function Ou(e,t,n,r,i){return ja(),Ba(i),t.flags|=256,xu(e,t,n,r),t.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Ru(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Rc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ru(n),t.memoizedState=Du,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Rc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Ru(n),t.memoizedState=Du,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Es)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Pa=ci(r.nextSibling),Aa=t,Oa=!0,Da=null,null!==n&&(wa[xa++]=_a,wa[xa++]=Ia,wa[xa++]=Sa,_a=n.id,Ia=n.overflow,Sa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ru(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Vu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Uu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ru(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Vu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){var i=e.child;return e=i.sibling,n=Oc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Uu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Oc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Oc(o,r):(r=Rc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Ba(r),Ga(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xi(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xu(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){switch(Na(t),t.tag){case 1:return Oi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ii(Ni),Ii(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ii(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(ro),null;case 4:return eo(),null;case 10:return Yi(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,$u=null;function Yu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Xu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var Ju=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Xu(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||Yu(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Xu(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&(Yu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){Sc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){Sc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&Yu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){Sc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){Sc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){Sc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){Sc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Vs=Xe()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(f=Hu)||l,hs(t,e),Hu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){Sc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){Sc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for($u=e,e=e.child;null!==e;){for(l=$u=e;null!==$u;){switch(h=(f=$u).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if(Yu(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){Sc(d,p,v)}}break;case 5:Yu(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,$u=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){$u=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Gu;var c=Hu;if(Gu=o,(Hu=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,$u=s):ks(i);for(;null!==a;)$u=a,ms(a,t,n),a=a.sibling;$u=i,Gu=u,Hu=c}ys(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):ys(e)}}function ys(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){Sc(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function gs(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function ks(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var bs,ws=Math.ceil,xs=b.ReactCurrentDispatcher,Ss=b.ReactCurrentOwner,_s=b.ReactCurrentBatchConfig,Is=0,Es=null,Ts=null,Cs=0,Ns=0,As=_i(0),Ps=0,Os=null,Ds=0,Rs=0,Ls=0,Ms=null,Fs=null,Vs=0,Us=1/0,js=null,Bs=!1,zs=null,qs=null,Ks=!1,Ws=null,Gs=0,Hs=0,Qs=null,$s=-1,Ys=0;function Xs(){return 0!==(6&Is)?Xe():-1!==$s?$s:$s=Xe()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Is)&&0!==Cs?Cs&-Cs:null!==qi.transition?(0===Ys&&(Ys=vt()),Ys):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(yt(r,t,n),0!==(2&Is)&&r===Es||(r===Es&&(0===(2&Is)&&(Rs|=t),4===Ps&&oc(r,Cs)),nc(r,n),1===t&&0===Is&&0===(1&e.mode)&&(Us=Xe()+500,Ui&&zi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Es||null!==ea)&&0!==(1&e.mode)&&0===(2&Is)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Es?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===Is&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if($s=-1,Ys=0,0!==(6&Is))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Es?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Is;Is|=2;var o=dc();for(Es===e&&Cs===t||(js=null,Us=Xe()+500,fc(e,t));;)try{yc();break}catch(s){hc(e,s)}$i(),xs.current=o,Is=i,null!==Ts?t=0:(Es=null,Cs=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Os,fc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Os,fc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Vs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Rs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Is))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Os,fc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,Xe()),null}function sc(e,t){var n=Is;Is|=1;try{return e(t)}finally{0===(Is=n)&&(Us=Xe()+500,Ui&&zi())}}function cc(e){null!==Ws&&0===Ws.tag&&0===(6&Is)&&wc();var t=Is;Is|=1;var n=_s.transition,r=kt;try{if(_s.transition=null,kt=1,e)return e()}finally{kt=r,_s.transition=n,0===(6&(Is=t))&&zi()}}function lc(){Ns=As.current,Ii(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Ii(Ni),Ii(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ii(ro);break;case 10:Yi(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Es=e,Ts=e=Oc(e.current,null),Cs=Ns=t,Ps=0,Os=null,Ls=Rs=Ds=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Ts;try{if($i(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,Ss.current=null,null===n||null===n.return){Ps=1,Os=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Oa&&1&s.mode){var y=vu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),mu(y,u,s,0,t),Ba(c);break e}}o=c,4!==Ps&&(Ps=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===qs||!qs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function dc(){var e=xs.current;return xs.current=nu,null===e?nu:e}function pc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Es||0===(268435455&Ds)&&0===(268435455&Rs)||oc(Es,Cs)}function vc(e,t){var n=Is;Is|=2;var r=dc();for(Es===e&&Cs===t||(js=null,fc(e,t));;)try{mc();break}catch(i){hc(e,i)}if($i(),Is=n,xs.current=r,null!==Ts)throw Error(a(261));return Es=null,Cs=0,Ps}function mc(){for(;null!==Ts;)gc(Ts)}function yc(){for(;null!==Ts&&!$e();)gc(Ts)}function gc(e){var t=bs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Ts=t,Ss.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Wu(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Ps=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Ps&&(Ps=5)}function bc(e,t,n){var r=kt,i=_s.transition;try{_s.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ws);if(0!==(6&Is))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Es&&(Ts=Es=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_s.transition,_s.transition=null;var u=kt;kt=1;var s=Is;Is|=4,Ss.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ki(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=Ju,Ju=!1}(e,n),ds(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),Ye(),Is=s,kt=u,_s.transition=o}else e.current=n;if(Ks&&(Ks=!1,Ws=e,Gs=i),0===(o=e.pendingLanes)&&(qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bs)throw Bs=!1,e=zs,zs=null,e;0!==(1&Gs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,zi()}(e,t,n,r)}finally{_s.transition=i,kt=r}return null}function wc(){if(null!==Ws){var e=bt(Gs),t=_s.transition,n=kt;try{if(_s.transition=null,kt=16>e?16:e,null===Ws)var r=!1;else{if(e=Ws,Ws=null,Gs=0,0!==(6&Is))throw Error(a(331));var i=Is;for(Is|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(ns(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var b=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,$u=b;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){$u=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,$u=w;break e}$u=s.return}}if(Is=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,_s.transition=t}}return!1}function xc(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=Xs(),null!==(e=ec(e,1))&&(yt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Xs(),null!==(t=ec(t,1))&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xs(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(130023424&Cs)===Cs&&500>Xe()-Vs?fc(e,0):Ls|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Xs();null!==(e=ec(e,t))&&(yt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return Rc(n.children,i,o,t);case _:u=8,i|=8;break;case I:return(e=Ac(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Rc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=ia(r=Xs(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,a=Xs(),o=Js(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Pu(t),ja();break;case 5:to(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ei(ro,1&ro.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Oa&&0!==(1048576&t.flags)&&Ta(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Pi(t,Ci.current);Ji(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Oa&&o&&Ca(t),xu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=Su(null,t,r,e,n);break e;case 14:t=_u(null,t,r,Ki(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Pu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ou(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ou(e,t,r,n,i=Error(a(424)));break e}for(Pa=ci(t.stateNode.containerInfo.firstChild),Aa=t,Oa=!0,Da=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Ku(e,t,n);break e}xu(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),xu(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):xu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return xu(e,t,t.pendingProps,n),t.child;case 8:case 12:return xu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(Wi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Xi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Xi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}xu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Zi(i)),t.flags|=1,xu(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),_u(e,t,r,i=Ki(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Ji(t,n),pa(t,r,i),ma(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),cc((function(){qc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){qc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Xe()),0===(6&Is)&&(Us=Xe()+500,zi()))}break;case 13:var r=Xs();cc((function(){return Zs(e,1,r)})),Gc(e,1)}},xt=function(e){13===e.tag&&(Zs(e,134217728,Xs()),Gc(e,134217728))},St=function(e){if(13===e.tag){var t=Xs(),n=Js(e);Zs(e,n,t),Gc(e,n)}},_t=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return y(e)===c}},900:function(e,t,n){e.exports=n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},D={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,I=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?S():(_=!1,I=null)}}else _=!1}if("function"===typeof k)S=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,S=function(){O.postMessage(null)}}else S=function(){y(A,0)};function D(e){I=e,_||(_=!0,S())}function R(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return s((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Oe},SDK_VERSION:function(){return zt},_DEFAULT_ENTRY_NAME:function(){return Nt},_addComponent:function(){return Dt},_addOrOverwriteComponent:function(){return Rt},_apps:function(){return Pt},_clearComponents:function(){return Vt},_components:function(){return Ot},_getProvider:function(){return Mt},_registerComponent:function(){return Lt},_removeServiceInstance:function(){return Ft},deleteApp:function(){return Gt},getApp:function(){return Kt},getApps:function(){return Wt},initializeApp:function(){return qt},onLog:function(){return $t},registerVersion:function(){return Qt},setLogLevel:function(){return Yt}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function x(e,t){if(!e)throw new Error(t)}function S(e,t,n){void 0===n&&(n="/");var r=P(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=_(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function _(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||x(!1),a.relativePath=a.relativePath.slice(r.length));var o=O([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&x(!1),_(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}var I=/^:\w+$/,E=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(E)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!E(e)})).reduce((function(e,t){return e+(I.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:O([i,l.pathname]),pathnameBase:D(O([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=O([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:R(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var O=function(e){return e.join("/").replace(/\/\/+/g,"/")},D=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},R=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){F()||x(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=z(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):O([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function F(){return null!=(0,r.useContext)(b)}function V(){return F()||x(!1),(0,r.useContext)(b).location}function U(){F()||x(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=V().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=O([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}var j=(0,r.createContext)(null);function B(){var e=(0,r.useContext)(w).matches,t=e[e.length-1];return t?t.params:{}}function z(e){var t=(0,r.useContext)(w).matches,n=V().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return A(e,JSON.parse(i),n)}),[e,i,n])}function q(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function K(e){return function(e){var t=(0,r.useContext)(w).outlet;return t?(0,r.createElement)(j.Provider,{value:e},t):t}(e.context)}function W(e){x(!1)}function G(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;F()&&x(!1);var d=D(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,w=v.search,S=void 0===w?"":w,_=v.hash,I=void 0===_?"":_,E=v.state,T=void 0===E?null:E,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=P(y,d);return null==e?null:{pathname:e,search:S,hash:I,state:T,key:N}}),[d,y,S,I,T,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function H(e){var t=e.children,n=e.location;return function(e,t){F()||x(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,V());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||x(!1),n=l}else n=s;var f=n.pathname||"/",h=S(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return q(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:O([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:O([u,e.pathnameBase])})})),i)}(Q(t),n)}function Q(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==W&&x(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=Q(e.props.children)),t.push(n)}else t.push.apply(t,Q(e.props.children))})),t}function $(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Y(e){return function(e){if(Array.isArray(e))return o(e)}(e)||$(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee="SEND_MESSAGE",te={dialogs:[{id:1,name:"Dimych"},{id:2,name:"Azamat"},{id:3,name:"Daut"},{id:4,name:"Chitos"}],users:[]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;return t.type===ee?Z(Z({},e),{},{messages:[].concat(Y(e.messages),[{id:5,message:t.newMessageText}])}):e},re={Message:"MessagesPage_Message__QEwua",Send_Form:"MessagesPage_Send_Form__o5Ptt",messageItemWrapper:"MessagesPage_messageItemWrapper__64N5I",messageItemOwnWrapper:"MessagesPage_messageItemOwnWrapper__ZiwOW",messageItem:"MessagesPage_messageItem__F3tip",ChatMessage:"MessagesPage_ChatMessage__lOnVi",profielPhoto:"MessagesPage_profielPhoto__TzpdW",userName:"MessagesPage_userName__XPyz8"};function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function le(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}function he(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(e,t){if(t&&("object"===de(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function ve(e){var t=he();return function(){var n,r=fe(e);if(t){var i=fe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pe(this,n)}}function me(e,t,n){return me=he()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ce(i,n.prototype),i},me.apply(null,arguments)}function ye(e){var t="function"===typeof Map?new Map:void 0;return ye=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return me(e,arguments,fe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ce(n,e)},ye(e)}var ge=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ge(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},be=function(e){return function(e){var t=ge(e);return ke.encodeByteArray(t,!0)}(e).replace(/\./g,"")},we=function(e){try{return ke.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=xe(e[n],t[n]));return e}var Se=function(){function e(){var t=this;ie(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return oe(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function _e(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(a)),""].join(".")}function Ie(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ee(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function Te(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ce(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ne(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ae(){var e=Ie();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Pe(){return"object"===typeof indexedDB}var Oe=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(se(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(se(a),De.prototype.create),a}return oe(n)}(ye(Error)),De=function(){function e(t,n,r){ie(this,e),this.service=t,this.serviceName=n,this.errors=r}return oe(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Re(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Oe(n,a,t);return o}}]),e}();function Re(e,t){return e.replace(Le,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Le=/\{\$([^}]+)}/g;function Me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Fe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ve(u)&&Ve(s)){if(!Fe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ve(e){return null!==e&&"object"===typeof e}function Ue(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function je(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Be(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ze(e,t){var n=new qe(e,t);return n.subscribe.bind(n)}var qe=function(){function e(t,n){var r=this;ie(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return oe(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ue(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ke),void 0===r.error&&(r.error=Ke),void 0===r.complete&&(r.complete=Ke);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ke(){}function We(e){return e&&e._delegate?e._delegate:e}function Ge(){Ge=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==de(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function He(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){He(a,r,i,o,u,"next",e)}function u(e){He(a,r,i,o,u,"throw",e)}o(void 0)}))}}var $e=function(){function e(t,n,r){ie(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return oe(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ye="[DEFAULT]",Xe=function(){function e(t,n){ie(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return oe(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Se;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ye})}catch(s){}var t,n=ue(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Y(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Y(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ue(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Yx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ye?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Yx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return this.component?this.component.multipleInstances?e:Ye:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Je,Ze,et=function(){function e(t){ie(this,e),this.name=t,this.providers=new Map}return oe(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Xe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),tt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ze||(Ze={}));var nt={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},rt=Ze.INFO,it=(X(Je={},Ze.DEBUG,"log"),X(Je,Ze.VERBOSE,"log"),X(Je,Ze.INFO,"info"),X(Je,Ze.WARN,"warn"),X(Je,Ze.ERROR,"error"),Je),at=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=it[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ot=function(){function e(t){ie(this,e),this.name=t,this._logLevel=rt,this._logHandler=at,this._userLogHandler=null,tt.push(this)}return oe(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ze))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?nt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ze.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ze.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ze.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ze.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ze.INFO].concat(t)),this._logHandler.apply(this,[this,Ze.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ze.WARN].concat(t)),this._logHandler.apply(this,[this,Ze.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ze.ERROR].concat(t)),this._logHandler.apply(this,[this,Ze.ERROR].concat(t))}}]),e}();var ut,st;var ct=new WeakMap,lt=new WeakMap,ft=new WeakMap,ht=new WeakMap,dt=new WeakMap;var pt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return lt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ft.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function vt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(st||(st=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(gt(this),n),yt(ct.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yt(e.apply(gt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[gt(this),t].concat(r));return ft.set(a,t.sort?t.sort():[t]),yt(a)}}function mt(e){return"function"===typeof e?vt(e):(e instanceof IDBTransaction&&function(e){if(!lt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));lt.set(e,t)}}(e),t=e,(ut||(ut=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,pt):e);var t}function yt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(yt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ct.set(t,e)})).catch((function(){})),dt.set(t,e),t}(e);if(ht.has(e))return ht.get(e);var t=mt(e);return t!==e&&(ht.set(e,t),dt.set(t,e)),t}var gt=function(e){return dt.get(e)};var kt,bt,wt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],St=new Map;function _t(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(St.get(t))return St.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=xt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||wt.includes(n))){var a=function(){var e=Qe(Ge().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return St.set(t,a),a}}}pt=function(e){return Z(Z({},e),{},{get:function(t,n,r){return _t(t,n)||e.get(t,n,r)},has:function(t,n){return!!_t(t,n)||e.has(t,n)}})}(pt);var It=function(){function e(t){ie(this,e),this.container=t}return oe(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Et="@firebase/app",Tt="0.7.25",Ct=new ot("@firebase/app"),Nt="[DEFAULT]",At=(X(kt={},Et,"fire-core"),X(kt,"@firebase/app-compat","fire-core-compat"),X(kt,"@firebase/analytics","fire-analytics"),X(kt,"@firebase/analytics-compat","fire-analytics-compat"),X(kt,"@firebase/app-check","fire-app-check"),X(kt,"@firebase/app-check-compat","fire-app-check-compat"),X(kt,"@firebase/auth","fire-auth"),X(kt,"@firebase/auth-compat","fire-auth-compat"),X(kt,"@firebase/database","fire-rtdb"),X(kt,"@firebase/database-compat","fire-rtdb-compat"),X(kt,"@firebase/functions","fire-fn"),X(kt,"@firebase/functions-compat","fire-fn-compat"),X(kt,"@firebase/installations","fire-iid"),X(kt,"@firebase/installations-compat","fire-iid-compat"),X(kt,"@firebase/messaging","fire-fcm"),X(kt,"@firebase/messaging-compat","fire-fcm-compat"),X(kt,"@firebase/performance","fire-perf"),X(kt,"@firebase/performance-compat","fire-perf-compat"),X(kt,"@firebase/remote-config","fire-rc"),X(kt,"@firebase/remote-config-compat","fire-rc-compat"),X(kt,"@firebase/storage","fire-gcs"),X(kt,"@firebase/storage-compat","fire-gcs-compat"),X(kt,"@firebase/firestore","fire-fst"),X(kt,"@firebase/firestore-compat","fire-fst-compat"),X(kt,"fire-js","fire-js"),X(kt,"firebase","fire-js-all"),kt),Pt=new Map,Ot=new Map;function Dt(e,t){try{e.container.addComponent(t)}catch(n){Ct.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Rt(e,t){e.container.addOrOverwriteComponent(t)}function Lt(e){var t=e.name;if(Ot.has(t))return Ct.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ot.set(t,e);var n,r=ue(Pt.values());try{for(r.s();!(n=r.n()).done;){Dt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Mt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ft(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt;Mt(e,t).clearInstance(n)}function Vt(){Ot.clear()}var Ut=(X(bt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X(bt,"bad-app-name","Illegal App name: '{$appName}"),X(bt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),X(bt,"app-deleted","Firebase App named '{$appName}' already deleted"),X(bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),X(bt,"invalid-log-argument","First argument to `onLog` must be null or a function."),X(bt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),X(bt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),X(bt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),X(bt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),bt),jt=new De("app","Firebase",Ut),Bt=function(){function e(t,n,r){var i=this;ie(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $e("app",(function(){return i}),"PUBLIC"))}return oe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}}]),e}(),zt="9.8.2";function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw jt.create("bad-app-name",{appName:String(i)});var a=Pt.get(i);if(a){if(Fe(e,a.options)&&Fe(r,a.config))return a;throw jt.create("duplicate-app",{appName:i})}var o,u=new et(i),s=ue(Ot.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Bt(e,r,u);return Pt.set(i,l),l}function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=Pt.get(e);if(!t)throw jt.create("no-app",{appName:e});return t}function Wt(){return Array.from(Pt.values())}function Gt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pt.has(n)){e.next=6;break}return Pt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t,n){var r,i=null!==(r=At[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ct.warn(u.join(" "))}Lt(new $e("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function $t(e,t){if(null!==e&&"function"!==typeof e)throw jt.create("invalid-log-argument");!function(e,t){var n,r=ue(tt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=nt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ze[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Yt(e){var t;t=e,tt.forEach((function(e){e.setLogLevel(t)}))}var Xt="firebase-heartbeat-store",Jt=null;function Zt(){return Jt||(Jt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=yt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(yt(u.result),e.oldVersion,e.newVersion,yt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Xt)}}).catch((function(e){throw jt.create("storage-open",{originalErrorMessage:e.message})}))),Jt}function en(e){return tn.apply(this,arguments)}function tn(){return tn=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Xt).objectStore(Xt).get(an(t)));case 7:throw e.prev=7,e.t0=e.catch(0),jt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),tn.apply(this,arguments)}function nn(e,t){return rn.apply(this,arguments)}function rn(){return rn=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zt();case 3:return r=e.sent,i=r.transaction(Xt,"readwrite"),a=i.objectStore(Xt),e.next=8,a.put(n,an(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),jt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),rn.apply(this,arguments)}function an(e){return"".concat(e.name,"!").concat(e.options.appId)}var on=function(){function e(t){var n=this;ie(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new fn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return oe(e,[{key:"triggerHeartbeat",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=un(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=un(),n=sn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=be(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function un(){return(new Date).toISOString().substring(0,10)}function sn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ue(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),hn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),hn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var cn,ln,fn=function(){function e(t){ie(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return oe(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,en(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",nn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Y(r.heartbeats),Y(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function hn(e){return be(JSON.stringify({version:2,heartbeats:e})).length}cn="",Lt(new $e("platform-logger",(function(e){return new It(e)}),"PRIVATE")),Lt(new $e("heartbeat",(function(e){return new on(e)}),"PRIVATE")),Qt(Et,Tt,cn),Qt(Et,Tt,"esm2017"),Qt("fire-js","");var dn=function(){function e(t,n){var r=this;ie(this,e),this._delegate=t,this.firebase=n,Dt(t,new $e("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return oe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Gt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Dt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Rt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),pn=(X(ln={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X(ln,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ln),vn=new De("app-compat","Firebase",pn);var mn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=qt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Me(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Qt,setLogLevel:Yt,onLog:$t,apps:null,SDK_VERSION:zt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Lt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw vn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&xe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Me(n,e=e||Nt))throw vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(dn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){xe(n,e)},createSubscribe:ze,ErrorFactory:De,deepExtend:xe}),n}(),yn=new ot("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gn=self.firebase.SDK_VERSION;gn&&gn.indexOf("LITE")>=0&&yn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var kn=mn;!function(e){Qt("@firebase/app-compat","0.1.26",e)}();function bn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fe(e)););return e}function wn(){return wn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=bn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wn.apply(this,arguments)}kn.registerVersion("firebase","9.8.2","app-compat");function xn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Sn;Object.create;var _n="facebook.com",In="github.com",En="google.com",Tn="password",Cn="twitter.com",Nn="EMAIL_SIGNIN",An="PASSWORD_RESET",Pn="RECOVER_EMAIL",On="REVERT_SECOND_FACTOR_ADDITION",Dn="VERIFY_AND_CHANGE_EMAIL",Rn="VERIFY_EMAIL";function Ln(){return X({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Mn=function(){var e;return X(e={},"admin-restricted-operation","This operation is restricted to administrators only."),X(e,"argument-error",""),X(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),X(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),X(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),X(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),X(e,"cordova-not-ready","Cordova framework is not ready."),X(e,"cors-unsupported","This browser is not supported."),X(e,"credential-already-in-use","This credential is already associated with a different user account."),X(e,"custom-token-mismatch","The custom token corresponds to a different audience."),X(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),X(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),X(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),X(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),X(e,"email-already-in-use","The email address is already in use by another account."),X(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),X(e,"expired-action-code","The action code has expired."),X(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),X(e,"internal-error","An internal AuthError has occurred."),X(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),X(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),X(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),X(e,"invalid-auth-event","An internal AuthError has occurred."),X(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),X(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),X(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),X(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),X(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),X(e,"invalid-email","The email address is badly formatted."),X(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),X(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),X(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),X(e,"invalid-credential","The supplied auth credential is malformed or has expired."),X(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),X(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),X(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),X(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),X(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),X(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),X(e,"wrong-password","The password is invalid or the user does not have a password."),X(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),X(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),X(e,"invalid-provider-id","The specified provider ID is invalid."),X(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),X(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),X(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),X(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),X(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),X(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),X(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),X(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),X(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),X(e,"missing-continue-uri","A continue URL must be provided in the request."),X(e,"missing-iframe-start","An internal AuthError has occurred."),X(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),X(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),X(e,"missing-multi-factor-info","No second factor identifier is provided."),X(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),X(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),X(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),X(e,"app-deleted","This instance of FirebaseApp has been deleted."),X(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),X(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),X(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),X(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),X(e,"no-auth-event","An internal AuthError has occurred."),X(e,"no-such-provider","User was not linked to an account with the given provider."),X(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),X(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),X(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),X(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),X(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),X(e,"provider-already-linked","User can only be linked to one identity for the given provider."),X(e,"quota-exceeded","The project's quota for this operation has been exceeded."),X(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),X(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),X(e,"rejected-credential","The request contains malformed or mismatching credentials."),X(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),X(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),X(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),X(e,"timeout","The operation has timed out."),X(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),X(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),X(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),X(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),X(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),X(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),X(e,"unverified-email","The operation requires a verified email."),X(e,"user-cancelled","The user did not grant your application the permissions it requested."),X(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),X(e,"user-disabled","The user account has been disabled by an administrator."),X(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),X(e,"user-signed-out",""),X(e,"weak-password","The password must be 6 characters long or more."),X(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),X(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Fn=Ln,Vn=new De("auth","Firebase",Ln()),Un=new ot("@firebase/auth");function jn(e){if(Un.logLevel<=Ze.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Un.error.apply(Un,["Auth (".concat(zt,"): ").concat(e)].concat(n))}}function Bn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Wn.apply(void 0,[e].concat(n))}function zn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wn.apply(void 0,[e].concat(n))}function qn(e,t,n){var r=Object.assign(Object.assign({},Fn()),X({},t,n));return new De("auth","Firebase",r).create(t,{appName:e.name})}function Kn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Bn(e,"argument-error"),qn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Y(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Y(o)))}return Vn.create.apply(Vn,[e].concat(n))}function Gn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Wn.apply(void 0,[t].concat(r))}}function Hn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw jn(t),new Error(t)}function Qn(e,t){e||Hn(t)}var $n=new Map;function Yn(e){Qn(e instanceof Function,"Expected a class definition");var t=$n.get(e);return t?(Qn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$n.set(e,t),t)}function Xn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Jn(){return"http:"===Zn()||"https:"===Zn()}function Zn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var er=function(){function e(t,n){ie(this,e),this.shortDelay=t,this.longDelay=n,Qn(n>t,"Short delay should be less than long delay!"),this.isMobile=Ee()||Ne()}return oe(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Jn()||Ce()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function tr(e,t){Qn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var nr=function(){function e(){ie(this,e)}return oe(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),rr=(X(Sn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),X(Sn,"MISSING_CUSTOM_TOKEN","internal-error"),X(Sn,"INVALID_IDENTIFIER","invalid-email"),X(Sn,"MISSING_CONTINUE_URI","internal-error"),X(Sn,"INVALID_PASSWORD","wrong-password"),X(Sn,"MISSING_PASSWORD","internal-error"),X(Sn,"EMAIL_EXISTS","email-already-in-use"),X(Sn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),X(Sn,"INVALID_IDP_RESPONSE","invalid-credential"),X(Sn,"INVALID_PENDING_TOKEN","invalid-credential"),X(Sn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),X(Sn,"MISSING_REQ_TYPE","internal-error"),X(Sn,"EMAIL_NOT_FOUND","user-not-found"),X(Sn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),X(Sn,"EXPIRED_OOB_CODE","expired-action-code"),X(Sn,"INVALID_OOB_CODE","invalid-action-code"),X(Sn,"MISSING_OOB_CODE","internal-error"),X(Sn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),X(Sn,"INVALID_ID_TOKEN","invalid-user-token"),X(Sn,"TOKEN_EXPIRED","user-token-expired"),X(Sn,"USER_NOT_FOUND","user-token-expired"),X(Sn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),X(Sn,"INVALID_CODE","invalid-verification-code"),X(Sn,"INVALID_SESSION_INFO","invalid-verification-id"),X(Sn,"INVALID_TEMPORARY_PROOF","invalid-credential"),X(Sn,"MISSING_SESSION_INFO","missing-verification-id"),X(Sn,"SESSION_EXPIRED","code-expired"),X(Sn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),X(Sn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),X(Sn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),X(Sn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),X(Sn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),X(Sn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),X(Sn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),X(Sn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),X(Sn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),X(Sn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),X(Sn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Sn),ir=new er(3e4,6e4);function ar(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function or(e,t,n,r){return ur.apply(this,arguments)}function ur(){return ur=Qe(Ge().mark((function e(t,n,r,i){var a,o=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",sr(t,a,Qe(Ge().mark((function e(){var a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ue(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",nr.fetch()(hr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),ur.apply(this,arguments)}function sr(e,t,n){return cr.apply(this,arguments)}function cr(){return cr=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},rr),n),e.prev=2,a=new dr(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw pr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw pr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw pr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw pr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw qn(t,p,d);case 34:Bn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Oe)){e.next=41;break}throw e.t0;case 41:Bn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),cr.apply(this,arguments)}function lr(e,t,n,r){return fr.apply(this,arguments)}function fr(){return fr=Qe(Ge().mark((function e(t,n,r,i){var a,o,u=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,or(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Bn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),fr.apply(this,arguments)}function hr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?tr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var dr=function(){function e(t){var n=this;ie(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(zn(n.auth,"network-request-failed"))}),ir.get())}))}return oe(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function pr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=zn(e,t,r);return i.customData._tokenResponse=n,i}function vr(e,t){return mr.apply(this,arguments)}function mr(){return mr=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}function yr(e,t){return gr.apply(this,arguments)}function gr(){return gr=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(e,t){return br.apply(this,arguments)}function br(){return br=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function wr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function xr(){return xr=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=We(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Gn((a=_r(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:wr(Sr(a.auth_time)),issuedAtTime:wr(Sr(a.iat)),expirationTime:wr(Sr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),xr.apply(this,arguments)}function Sr(e){return 1e3*Number(e)}function _r(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return jn("JWT malformed, contained fewer than 3 sections"),null;try{var a=we(r);return a?JSON.parse(a):(jn("Failed to decode base64 JWT payload"),null)}catch(o){return jn("Caught error parsing JWT payload as JSON",o),null}}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return Er=Qe(Ge().mark((function e(t,n){var r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Oe&&Tr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Er.apply(this,arguments)}function Tr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Cr=function(){function e(t){ie(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return oe(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Nr=function(){function e(t,n){ie(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return oe(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ar(e){return Pr.apply(this,arguments)}function Pr(){return Pr=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ir(t,kr(r,{idToken:i}));case 6:Gn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Rr(o.providerUserInfo):[],s=Dr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Nr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Or(){return(Or=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=We(t),e.next=3,Ar(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Y(n),Y(t))}function Rr(e){return e.map((function(e){var t=e.providerId,n=xn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Lr(e,t){return Mr.apply(this,arguments)}function Mr(){return Mr=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(t,{},Qe(Ge().mark((function e(){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ue({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=hr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",nr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Mr.apply(this,arguments)}var Fr=function(){function e(){ie(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return oe(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Gn(e.idToken,"internal-error"),Gn("undefined"!==typeof e.idToken,"internal-error"),Gn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=_r(e);return Gn(t,"internal-error"),Gn("undefined"!==typeof t.exp,"internal-error"),Gn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Qe(Ge().mark((function e(t){var n,r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Gn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Hn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Gn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Gn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Gn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Vr(e,t){Gn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ur=function(){function e(t){ie(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=xn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Y(a.providerData):[],this.metadata=new Nr(a.createdAt||void 0,a.lastLoginAt||void 0)}return oe(e,[{key:"getIdToken",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Gn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return xr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Or.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Gn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Gn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ar(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ir(this,vr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,S=n.stsTokenManager;Gn(k&&S,t,"internal-error");var _=Fr.fromJSON(this.name,S);Gn("string"===typeof k,t,"internal-error"),Vr(f,t.name),Vr(h,t.name),Gn("boolean"===typeof b,t,"internal-error"),Gn("boolean"===typeof w,t,"internal-error"),Vr(d,t.name),Vr(p,t.name),Vr(v,t.name),Vr(m,t.name),Vr(y,t.name),Vr(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=Qe(Ge().mark((function t(n,r){var i,a,o,u=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Fr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ar(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),jr=function(){function e(){ie(this,e),this.type="NONE",this.storage={}}return oe(e,[{key:"_isAvailable",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();jr.type="NONE";var Br=jr;function zr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var qr=function(){function e(t,n,r){ie(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=zr(this.userKey,a.apiKey,o),this.fullPersistenceKey=zr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return oe(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ur._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Qe(Ge().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Yn(Br),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Yn(Br),u=zr(i,n.config.apiKey,n.name),s=null,c=ue(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Ur._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Kr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yr(t))return"Blackberry";if(Xr(t))return"Webos";if(Gr(t))return"Safari";if((t.includes("chrome/")||Hr(t))&&!t.includes("edge/"))return"Chrome";if($r(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/firefox\//i.test(e)}function Gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/crios\//i.test(e)}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iemobile/i.test(e)}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/android/i.test(e)}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/blackberry/i.test(e)}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/webos/i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/iphone|ipad|ipod/i.test(e)}function Zr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return Jr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ei(){return Ae()&&10===document.documentMode}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return Jr(e)||$r(e)||Xr(e)||Yr(e)||/windows phone/i.test(e)||Qr(e)}function ni(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kr(Ie());break;case"Worker":t="".concat(Kr(Ie()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(zt,"/").concat(r)}var ri=function(){function e(t){ie(this,e),this.auth=t,this.queue=[]}return oe(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=ue(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=ue(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(BC){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ii=function(){function e(t,n,r){ie(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oi(this),this.idTokenSubscription=new oi(this),this.beforeStateQueue=new ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return oe(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Yn(t)),this._initializationPromise=this.queue(Qe(Ge().mark((function r(){var i,a;return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,qr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Gn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ar(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?We(t):null)&&Gn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Qe(Ge().mark((function e(t){var n,r=this,i=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Gn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Yn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new De("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Gn(n=t&&Yn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,qr.create(this,[Yn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Qe(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Gn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Gn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ni(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ai(e){return We(e)}var oi=function(){function e(t){var n=this;ie(this,e),this.auth=t,this.observer=null,this.addObserver=ze((function(e){return n.observer=e}))}return oe(e,[{key:"next",get:function(){return Gn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ui(e,t,n){var r=ai(e);Gn(r._canInitEmulator,r,"emulator-config-failed"),Gn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=si(t),o=function(e){var t=si(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ci(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:ci(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function si(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ci(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var li=function(){function e(t,n){ie(this,e),this.providerId=t,this.signInMethod=n}return oe(e,[{key:"toJSON",value:function(){return Hn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Hn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Hn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Hn("not implemented")}}]),e}();function fi(e,t){return hi.apply(this,arguments)}function hi(){return hi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:resetPassword",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}function di(e,t){return pi.apply(this,arguments)}function pi(){return pi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function vi(e,t){return mi.apply(this,arguments)}function mi(){return mi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:update",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}function yi(e,t){return gi.apply(this,arguments)}function gi(){return gi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithPassword",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function ki(e,t){return bi.apply(this,arguments)}function bi(){return bi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:sendOobCode",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function wi(e,t){return xi.apply(this,arguments)}function xi(){return xi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,n));case 1:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Si(e,t){return _i.apply(this,arguments)}function _i(){return _i=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,n));case 1:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Ii(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,n));case 1:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return Ci=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ki(t,n));case 1:case"end":return e.stop()}}),e)}))),Ci.apply(this,arguments)}function Ni(e,t){return Ai.apply(this,arguments)}function Ai(){return Ai=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithEmailLink",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Pi(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithEmailLink",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}var Di=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ie(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return oe(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",yi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ni(t,{email:this._email,oobCode:this._password}));case 5:Bn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",di(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Bn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(li);function Ri(e,t){return Li.apply(this,arguments)}function Li(){return Li=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithIdp",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}var Mi=function(e){le(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return oe(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ri(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ri(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ri(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ue(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=xn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(li);function Fi(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:sendVerificationCode",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function Ui(){return Ui=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}function ji(){return ji=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ar(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw pr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}var Bi=X({},"USER_NOT_FOUND","user-not-found");function zi(){return zi=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithPhoneNumber",ar(t,r),Bi));case 2:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}var qi=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,"phone","phone")).params=e,r}return oe(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ui.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ji.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return zi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(li);var Ki=function(){function e(t){var n,r,i,a,o,u;ie(this,e);var s=je(Be(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Gn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return oe(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=je(Be(e)).link,n=t?je(Be(t)).deep_link_id:null,r=je(Be(e)).deep_link_id;return(r?je(Be(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Yx){return null}}}]),e}();var Wi=function(){function e(){ie(this,e),this.providerId=e.PROVIDER_ID}return oe(e,null,[{key:"credential",value:function(e,t){return Di._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ki.parseLink(t);return Gn(n,"argument-error"),Di._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Wi.PROVIDER_ID="password",Wi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gi=function(){function e(t){ie(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return oe(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Hi=function(e){le(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).scopes=[],e}return oe(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Y(this.scopes)}}]),n}(Gi),Qi=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Gn(e.idToken||e.accessToken,"argument-error"),Mi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Gn("providerId"in t&&"signInMethod"in t,"argument-error"),Mi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Hi),$i=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.call(this,"facebook.com")}return oe(n,null,[{key:"credential",value:function(e){return Mi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Yx){return null}}}]),n}(Hi);$i.FACEBOOK_SIGN_IN_METHOD="facebook.com",$i.PROVIDER_ID="facebook.com";var Yi=function(e){le(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return oe(n,null,[{key:"credential",value:function(e,t){return Mi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Yx){return null}}}]),n}(Hi);Yi.GOOGLE_SIGN_IN_METHOD="google.com",Yi.PROVIDER_ID="google.com";var Xi=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.call(this,"github.com")}return oe(n,null,[{key:"credential",value:function(e){return Mi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Yx){return null}}}]),n}(Hi);Xi.GITHUB_SIGN_IN_METHOD="github.com",Xi.PROVIDER_ID="github.com";var Ji=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return oe(n,[{key:"_getIdTokenResponse",value:function(e){return Ri(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ri(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ri(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(li),Zi=function(e){le(n,e);var t=ve(n);function n(e){return ie(this,n),Gn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return oe(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ji.fromJSON(e);return Gn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ji._create(r,n)}catch(i){return null}}}]),n}(Gi),ea=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.call(this,"twitter.com")}return oe(n,null,[{key:"credential",value:function(e,t){return Mi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Yx){return null}}}]),n}(Hi);function ta(e,t){return na.apply(this,arguments)}function na(){return na=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signUp",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}ea.TWITTER_SIGN_IN_METHOD="twitter.com",ea.PROVIDER_ID="twitter.com";var ra=function(){function e(t){ie(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return oe(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Qe(Ge().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ur._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ia(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Qe(Ge().mark((function t(n,r,i){var a;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ia(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ia(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function aa(){return aa=Qe(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ai(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ra({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ta(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ra._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}var oa=function(e){le(n,e);var t=ve(n);function n(e,r,i,a){var o,u;return ie(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(se(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return oe(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Oe);function ua(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw oa._fromErrorAndOperation(e,n,t,r);throw n}))}function sa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ca(e,t){return la.apply(this,arguments)}function la(){return la=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,da(!0,r,n);case 3:return e.t0=yr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=sa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=Qe(Ge().mark((function e(t,n){var r,i,a=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ir,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ra._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t,n){return pa.apply(this,arguments)}function pa(){return(pa=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ar(n);case 2:i=sa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Gn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return ma=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ir(t,ua(i,a,n,t),r);case 6:return Gn((o=e.sent).idToken,i,"internal-error"),Gn(u=_r(o.idToken),i,"internal-error"),s=u.sub,Gn(t.uid===s,i,"user-mismatch"),e.abrupt("return",ra._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Bn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ma.apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=Qe(Ge().mark((function e(t,n){var r,i,a,o,u=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ua(t,i,n);case 4:return a=e.sent,e.next=7,ra._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya(ai(t),n));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return(xa=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,da(!1,r,n.providerId);case 3:return e.abrupt("return",fa(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){return _a.apply(this,arguments)}function _a(){return(_a=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",va(We(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(t,"POST","/v1/accounts:signInWithCustomToken",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ta(){return Ta=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ai(t),e.next=3,Ia(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ra._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}var Ca=function(){function e(t,n){ie(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return oe(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Na._fromServerResponse(e,t):Bn(e,"internal-error")}}]),e}(),Na=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return oe(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ca);function Aa(e,t,n){var r;Gn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Gn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Gn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Gn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Pa(){return Pa=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),a={requestType:"PASSWORD_RESET",email:n},r&&Aa(i,a,r),e.next=5,Si(i,a);case 5:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Oa(){return Oa=Qe(Ge().mark((function e(t,n,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(We(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Da(){return Da=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi(We(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ra(e,t){return La.apply(this,arguments)}function La(){return La=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,fi(r,{oobCode:n});case 3:i=e.sent,Gn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Gn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Gn(i.mfaInfo,r,"internal-error");case 13:Gn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ca._fromServerResponse(ai(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(){return Ma=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra(We(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}function Fa(e,t,n){return Va.apply(this,arguments)}function Va(){return Va=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ai(t),e.next=3,ta(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ra._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function Ua(){return Ua=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),a={requestType:"EMAIL_SIGNIN",email:n},Gn(r.handleCodeInApp,i,"argument-error"),r&&Aa(i,a,r),e.next=6,Ii(i,a);case 6:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}function ja(){return ja=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),Gn((a=Wi.credentialWithLink(n,r||Xn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ka(i,a));case 4:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Ba(e,t){return za.apply(this,arguments)}function za(){return za=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:createAuthUri",ar(t,n)));case 1:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function qa(){return qa=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jn()?Xn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ba(We(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Ka(){return(Ka=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=We(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Aa(r.auth,a,n),e.next=8,wi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(){return(Wa=Qe(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Aa(i.auth,o,r),e.next=8,Ti(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",or(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Qa(){return(Qa=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=We(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ir(a,Ga(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(e,t,n){return Ya.apply(this,arguments)}function Ya(){return Ya=Qe(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ir(t,di(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}var Xa=oe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ie(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ja=function(e){le(n,e);var t=ve(n);function n(e,r,i,a){var o;return ie(this,n),(o=t.call(this,e,r,i)).username=a,o}return oe(n)}(Xa),Za=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"facebook.com",r)}return oe(n)}(Xa),eo=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return oe(n)}(Ja),to=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"google.com",r)}return oe(n)}(Xa),no=function(e){le(n,e);var t=ve(n);function n(e,r,i){return ie(this,n),t.call(this,e,"twitter.com",r,i)}return oe(n)}(Ja);function ro(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=_r(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Xa(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Za(a,i);case"github.com":return new eo(a,i);case"google.com":return new to(a,i);case"twitter.com":return new no(a,i,e.screenName||null);case"custom":case"anonymous":return new Xa(a,null);default:return new Xa(a,r,i)}}(n)}var io=function(){function e(t,n){ie(this,e),this.type=t,this.credential=n}return oe(e,[{key:"toJSON",value:function(){return{multiFactorSession:X({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ao=function(){function e(t,n,r){ie(this,e),this.session=t,this.hints=n,this.signInResolver=r}return oe(e,[{key:"resolveSignIn",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ai(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ca._fromServerResponse(r,e)}));Gn(i.mfaPendingCredential,r,"internal-error");var o=io._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Qe(Ge().mark((function e(t){var a,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ra._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Gn(n.user,r,"internal-error"),e.abrupt("return",ra._forOperation(n.user,n.operationType,u));case 17:Bn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function oo(e,t){return or(e,"POST","/v2/accounts/mfaEnrollment:start",ar(e,t))}function uo(e,t){return or(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ar(e,t))}var so=function(){function e(t){var n=this;ie(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ca._fromServerResponse(t.auth,e)})))}))}return oe(e,[{key:"getSession",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=io,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ir(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ir(this.user,uo(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),co=new WeakMap;var lo="__sak",fo=function(){function e(t,n){ie(this,e),this.storageRetriever=t,this.type=n}return oe(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(Yx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ho=function(e){le(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ie();return Gr(e)||Jr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ti(),e._shouldAllowMigration=!0,e}return oe(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ei()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Qe(Ge().mark((function e(t,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(fe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qe(Ge().mark((function e(t){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(fe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(fe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(fo);ho.type="LOCAL";var po=ho,vo=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return oe(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(fo);vo.type="SESSION";var mo=vo;function yo(e){return Promise.all(e.map(function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var go=function(){function e(t){ie(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return oe(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,yo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ko(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}go.receivers=[];var bo=function(){function e(t){ie(this,e),this.target=t,this.handlers=new Set}return oe(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ko("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function wo(){return window}function xo(){return"undefined"!==typeof wo().WorkerGlobalScope&&"function"===typeof wo().importScripts}function So(){return _o.apply(this,arguments)}function _o(){return(_o=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Io(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Eo="firebaseLocalStorageDb",To="firebaseLocalStorage",Co="fbase_key",No=function(){function e(t){ie(this,e),this.request=t}return oe(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ao(e,t){return e.transaction([To],t?"readwrite":"readonly").objectStore(To)}function Po(){var e=indexedDB.deleteDatabase(Eo);return new No(e).toPromise()}function Oo(){var e=indexedDB.open(Eo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(To,{keyPath:Co})}catch(r){n(r)}})),e.addEventListener("success",Qe(Ge().mark((function n(){var r;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(To)){n.next=12;break}return r.close(),n.next=5,Po();case 5:return n.t0=t,n.next=8,Oo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Do(e,t,n){return Ro.apply(this,arguments)}function Ro(){return Ro=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ao(t,!0).put((X(i={},Co,n),X(i,"value",r),i)),e.abrupt("return",new No(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ao(t,!1).get(n),e.next=3,new No(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){var n=Ao(e,!0).delete(t);return new No(n).toPromise()}var Vo=function(){function e(){ie(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return oe(e,[{key:"_openDb",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Oo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Qe(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=go._getInstance(xo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Qe(Ge().mark((function e(n,r){var i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,So();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new bo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Io()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Oo();case 5:return t=e.sent,e.next=8,Do(t,lo,"1");case 8:return e.next=10,Fo(t,lo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Qe(Ge().mark((function e(t,n){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Do(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Lo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Qe(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Fo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ao(e,!1).getAll();return new No(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ue(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Vo.type="LOCAL";var Uo=Vo;function jo(e,t){return or(e,"POST","/v2/accounts/mfaSignIn:start",ar(e,t))}function Bo(e){return zo.apply(this,arguments)}function zo(){return zo=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function qo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=zn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ko(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Wo=1e12,Go=function(){function e(t){ie(this,e),this.auth=t,this.counter=Wo,this._widgets=new Map}return oe(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ho(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Wo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Wo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Wo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ho=function(){function e(t,n,r){var i=this;ie(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Gn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return oe(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Qo=Ko("rcb"),$o=new er(3e4,6e4),Yo="https://www.google.com/recaptcha/api.js?",Xo=function(){function e(){ie(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wo().grecaptcha}return oe(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Gn(Jo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(wo().grecaptcha):new Promise((function(r,i){var a=wo().setTimeout((function(){i(zn(e,"network-request-failed"))}),$o.get());wo()[Qo]=function(){wo().clearTimeout(a),delete wo()[Qo];var o=wo().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(zn(e,"internal-error"))},qo("".concat(Yo,"?").concat(Ue({onload:Qo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(zn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!wo().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Jo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Zo=function(){function e(){ie(this,e)}return oe(e,[{key:"load",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Go(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),eu="recaptcha",tu={theme:"light",type:"image"},nu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},tu),r=arguments.length>2?arguments[2]:void 0;ie(this,e),this.parameters=n,this.type=eu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ai(r),this.isInvisible="invisible"===this.parameters.size,Gn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Gn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Zo:new Xo,this.validateStartingState()}return oe(e,[{key:"verify",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Gn(!this.parameters.sitekey,this.auth,"argument-error"),Gn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Gn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=wo()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Gn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Qe(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gn(Jn()&&!xo(),this.auth,"internal-error"),e.next=3,ru();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Bo(this.auth);case 8:Gn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Gn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ru(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var iu=function(){function e(t,n){ie(this,e),this.verificationId=t,this.onConfirmation=n}return oe(e,[{key:"confirm",value:function(e){var t=qi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function au(){return au=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ai(t),e.next=3,cu(i,n,We(r));case 3:return a=e.sent,e.abrupt("return",new iu(a,(function(e){return ka(i,e)})));case 5:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}function ou(e,t,n){return uu.apply(this,arguments)}function uu(){return(uu=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,da(!1,i,"phone");case 3:return e.next=5,cu(i.auth,n,We(r));case 5:return a=e.sent,e.abrupt("return",new iu(a,(function(e){return wa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function su(){return(su=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=We(t),e.next=3,cu(i.auth,n,We(r));case 3:return a=e.sent,e.abrupt("return",new iu(a,(function(e){return Sa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return lu=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Gn("string"===typeof a,t,"argument-error"),Gn(r.type===eu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Gn("enroll"===u.type,t,"internal-error"),e.next=13,oo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Gn("signin"===u.type,t,"internal-error"),Gn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,jo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Fi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),lu.apply(this,arguments)}function fu(){return(fu=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(We(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hu=function(){function e(t){ie(this,e),this.providerId=e.PROVIDER_ID,this.auth=ai(t)}return oe(e,[{key:"verifyPhoneNumber",value:function(e,t){return cu(this.auth,e,We(t))}}],[{key:"credential",value:function(e,t){return qi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?qi._fromTokenResponse(n,r):null}}]),e}();function du(e,t){return t?Yn(t):(Gn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hu.PROVIDER_ID="phone",hu.PHONE_SIGN_IN_METHOD="phone";var pu=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,"custom","custom")).params=e,r}return oe(n,[{key:"_getIdTokenResponse",value:function(e){return Ri(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ri(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ri(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(li);function vu(e){return ya(e.auth,new pu(e),e.bypassAuthState)}function mu(e){var t=e.auth,n=e.user;return Gn(n,t,"internal-error"),va(n,new pu(e),e.bypassAuthState)}function yu(e){return gu.apply(this,arguments)}function gu(){return gu=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Gn(r=t.user,n,"internal-error"),e.abrupt("return",fa(r,new pu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}var ku=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ie(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return oe(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Qe(Ge().mark((function t(n,r){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Qe(Ge().mark((function e(t){var n,r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vu;case"linkViaPopup":case"linkViaRedirect":return yu;case"reauthViaPopup":case"reauthViaRedirect":return mu;default:Bn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),bu=new er(2e3,1e4);function wu(e,t,n){return xu.apply(this,arguments)}function xu(){return xu=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ai(t),Kn(t,n,Gi),a=du(i,r),o=new Eu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}function Su(){return(Su=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=We(t)).auth,n,Gi),a=du(i.auth,r),o=new Eu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t,n){return Iu.apply(this,arguments)}function Iu(){return(Iu=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=We(t)).auth,n,Gi),a=du(i.auth,r),o=new Eu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu=function(e){le(n,e);var t=ve(n);function n(e,r,i,a,o){var u;return ie(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=se(u),u}return oe(n,[{key:"executeNotNull",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Gn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qe(Ge().mark((function e(){var t,n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qn(1===this.filter.length,"Popup operations only handle one event"),t=ko(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(zn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(zn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(zn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,bu.get())}()}}]),n}(ku);Eu.currentPopupAction=null;var Tu=new Map,Cu=function(e){le(n,e);var t=ve(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ie(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return oe(n,[{key:"execute",value:function(){var e=Qe(Ge().mark((function e(){var t,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Tu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Nu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,wn(fe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Tu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Tu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Qe(Ge().mark((function e(t){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",wn(fe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",wn(fe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ku);function Nu(e,t){return Au.apply(this,arguments)}function Au(){return Au=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lu(n),i=Ru(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Pu(e,t){return Ou.apply(this,arguments)}function Ou(){return Ou=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t)._set(Lu(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}function Du(e,t){Tu.set(e._key(),t)}function Ru(e){return Yn(e._redirectPersistence)}function Lu(e){return zr("pendingRedirect",e.config.apiKey,e.name)}function Mu(e,t,n){return function(e,t,n){return Fu.apply(this,arguments)}(e,t,n)}function Fu(){return Fu=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ai(t),Kn(t,n,Gi),a=du(i,r),e.next=5,Pu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Vu(e,t,n){return function(e,t,n){return Uu.apply(this,arguments)}(e,t,n)}function Uu(){return(Uu=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=We(t)).auth,n,Gi),a=du(i.auth,r),e.next=5,Pu(a,i.auth);case 5:return e.next=7,Gu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ju(e,t,n){return function(e,t,n){return Bu.apply(this,arguments)}(e,t,n)}function Bu(){return(Bu=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=We(t)).auth,n,Gi),a=du(i.auth,r),e.next=5,da(!1,i,n.providerId);case 5:return e.next=7,Pu(a,i.auth);case 7:return e.next=9,Gu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e,t){return qu.apply(this,arguments)}function qu(){return qu=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ai(t)._initializationPromise;case 2:return e.abrupt("return",Ku(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Ku(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ai(t),a=du(i,n),o=new Cu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(e){return Hu.apply(this,arguments)}function Hu(){return(Hu=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ko("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qu=function(){function e(t){ie(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return oe(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Yu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($u(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add($u(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function $u(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Yu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Xu(e){return Ju.apply(this,arguments)}function Ju(){return Ju=Qe(Ge().mark((function e(t){var n,r=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",or(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ju.apply(this,arguments)}var Zu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,es=/^https?/;function ts(){return ts=Qe(Ge().mark((function e(t){var n,r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Xu(t);case 4:n=e.sent,r=n.authorizedDomains,i=ue(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ns(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Bn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ts.apply(this,arguments)}function ns(e){var t=Xn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!es.test(r))return!1;if(Zu.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var rs=new er(3e4,6e4);function is(){var e=wo().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Y(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var as=null;function os(e){return as=as||function(e){return new Promise((function(t,n){var r,i,a;function o(){is(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){is(),n(zn(e,"network-request-failed"))},timeout:rs.get()})}if(null===(i=null===(r=wo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=wo().gapi)||void 0===a?void 0:a.load)){var u=Ko("iframefcb");return wo()[u]=function(){gapi.load?o():n(zn(e,"network-request-failed"))},qo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw as=null,e}))}(e),as}var us=new er(5e3,15e3),ss={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ls(e){var t=e.config;Gn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?tr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:zt},i=cs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ue(r).slice(1))}function fs(e){return hs.apply(this,arguments)}function hs(){return hs=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,os(t);case 2:return n=e.sent,Gn(r=wo().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ls(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ss,dontclear:!0},(function(e){return new Promise(function(){var n=Qe(Ge().mark((function n(r,i){var a,o,u;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){wo().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=zn(t,"network-request-failed"),o=wo().setTimeout((function(){i(a)}),us.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}var ds={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ps="_blank",vs="http://localhost",ms=function(){function e(t){ie(this,e),this.window=t,this.associatedEvent=null}return oe(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ys(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ds),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Ie().toLowerCase();n&&(u=Hr(l)?ps:n),Wr(l)&&(t=t||vs,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Zr(l)&&"_self"!==u)return gs(t||"",u),new ms(null);var h=window.open(t||"",u,f);Gn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ms(h)}function gs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ks="__/auth/handler",bs="emulator/auth/handler";function ws(e,t,n,r,i,a){Gn(e.config.authDomain,e,"auth-domain-config-required"),Gn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zt,eventId:i};if(t instanceof Gi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Hi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ks);return tr(t,bs)}(e),"?").concat(Ue(p).slice(1))}var xs="webStorageSupport",Ss=function(){function e(){ie(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mo,this._completeRedirectFn=Ku,this._overrideRedirectResult=Du}return oe(e,[{key:"_openPopup",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){var a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=ws(t,n,r,Xn(),i),e.abrupt("return",ys(t,o,ko()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=ws(t,n,r,Xn(),i),wo().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Qn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fs(t);case 2:return n=e.sent,r=new Qu(t),n.register("authEvent",(function(e){return Gn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(xs,{type:xs},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Bn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ts.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ti()||Gr()||Jr()}}]),e}(),_s=Ss,Is=function(){function e(t){ie(this,e),this.factorId=t}return oe(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Hn("unexpected MultiFactorSessionType")}}}]),e}(),Es=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,"phone")).credential=e,r}return oe(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return or(e,"POST","/v2/accounts/mfaEnrollment:finalize",ar(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return or(e,"POST","/v2/accounts/mfaSignIn:finalize",ar(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Is),Ts=function(){function e(){ie(this,e)}return oe(e,null,[{key:"assertion",value:function(e){return Es._fromCredential(e)}}]),e}();Ts.FACTOR_ID="phone";var Cs,Ns="@firebase/auth",As="0.20.2",Ps=function(){function e(t){ie(this,e),this.auth=t,this.internalListeners=new Map}return oe(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Gn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Os(){return window}Cs="Browser",Lt(new $e("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Gn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Gn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Cs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ni(Cs)},i=new ii(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Lt(new $e("auth-internal",(function(e){return function(e){return new Ps(e)}(ai(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Qt(Ns,As,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Cs)),Qt(Ns,As,"esm2017");function Ds(e,t,n){return Rs.apply(this,arguments)}function Rs(){return Rs=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Os(),o=a.BuildInfo,Qn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,js(n.sessionId);case 4:return u=e.sent,s={},Jr()?s.ibi=o.packageName:$r()?s.apn=o.packageName:Bn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",ws(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ls(){return Ls=Qe(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Os(),r=n.BuildInfo,i={},Jr()?i.iosBundleId=r.packageName:$r()?i.androidPackageName=r.packageName:Bn(t,"operation-not-supported-in-this-environment"),e.next=5,Xu(t,i);case 5:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function Ms(e){var t=Os().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Fs(e,t,n){return Vs.apply(this,arguments)}function Vs(){return Vs=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Os(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(zn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),$r()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Vs.apply(this,arguments)}function Us(e){var t,n,r,i,a,o,u,s,c,l,f=Os();Gn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Gn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Gn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Gn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Gn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function js(e){return Bs.apply(this,arguments)}function Bs(){return(Bs=Qe(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e){if(Qn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var qs=function(e){le(n,e);var t=ve(n);function n(){var e;return ie(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return oe(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),wn(fe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Qu);function Ks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:$s(),postBody:null,tenantId:e.tenantId,error:zn(e,"no-auth-event")}}function Ws(e,t){return Ys()._set(Xs(e),t)}function Gs(e){return Hs.apply(this,arguments)}function Hs(){return Hs=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ys()._get(Xs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ys()._remove(Xs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}function Qs(e,t){var n,r,i=function(e){var t=Js(e),n=t.link?decodeURIComponent(t.link):void 0,r=Js(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Js(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Js(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?zn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $s(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ys(){return Yn(po)}function Xs(e){return zr("authEvent",e.config.apiKey,e.name)}function Js(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||$(t)||u(t)||s();r[0];return je(r.slice(1).join("?"))}var Zs=function(){function e(){ie(this,e),this._redirectPersistence=mo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ku,this._overrideRedirectResult=Du}return oe(e,[{key:"_initialize",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new qs(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Bn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){var a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Us(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Tu.clear(),e.next=10,this._originValidation(t);case 10:return o=Ks(t,r,i),e.next=13,Ws(t,o);case 13:return e.next=15,Ds(t,o,n);case 15:return u=e.sent,e.next=18,Ms(u);case 18:return s=e.sent,e.abrupt("return",Fs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ls.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Os(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Gs(e);case 2:t.onEvent(tc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Qe(Ge().mark((function n(r){var i,a;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Gs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Qs(i,r.url)),t.onEvent(a||tc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Os().handleOpenURL=function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),ec=Zs;function tc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:zn("no-auth-event")}}function nc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function rc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return!("file:"!==nc()&&"ionic:"!==nc()&&"capacitor:"!==nc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ic(){return Ae()&&11===(null===document||void 0===document?void 0:document.documentMode)}function ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return/Edge\/\d+/.test(e)}function oc(){try{var e=self.localStorage,t=ko();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie();return ic()||ac(e)}()||Pe()}catch(n){return uc()&&Pe()}return!1}function uc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function sc(){return("http:"===nc()||"https:"===nc()||Ce()||rc())&&!(Ne()||Te())&&oc()&&!uc()}function cc(){return rc()&&"undefined"!==typeof document}function lc(){return fc.apply(this,arguments)}function fc(){return(fc=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hc={LOCAL:"local",NONE:"none",SESSION:"session"},dc=Gn,pc="persistence";function vc(e,t){dc(Object.values(hc).includes(t),e,"invalid-persistence-type"),Ne()?dc(t!==hc.SESSION,e,"unsupported-persistence-type"):Te()?dc(t===hc.NONE,e,"unsupported-persistence-type"):uc()?dc(t===hc.NONE||t===hc.LOCAL&&Pe(),e,"unsupported-persistence-type"):dc(t===hc.NONE||oc(),e,"unsupported-persistence-type")}function mc(e){return yc.apply(this,arguments)}function yc(){return yc=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=gc(),r=zr(pc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),yc.apply(this,arguments)}function gc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var kc=Gn,bc=function(){function e(){ie(this,e),this.browserResolver=Yn(_s),this.cordovaResolver=Yn(ec),this.underlyingResolver=null,this._redirectPersistence=mo,this._completeRedirectFn=Ku,this._overrideRedirectResult=Du}return oe(e,[{key:"_initialize",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return cc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return kc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,lc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wc(e){return e.unwrap()}function xc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Tc(e,function(e,t){var n,r=We(e),i=t;return Gn(t.customData.operationType,r,"argument-error"),Gn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ao._fromError(r,i)}(e,t));else if(r){var i=Sc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Sc(e){var t=(e instanceof Oe?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Oe)&&"temporaryProof"in t&&"phoneNumber"in t)return hu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Tn)return null;switch(r){case En:n=Yi;break;case _n:n=$i;break;case In:n=Xi;break;case Cn:n=ea;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ji._create(r,u):Mi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Qi(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Oe?n.credentialFromError(e):n.credentialFromResult(e)}function _c(e,t){return t.catch((function(t){throw t instanceof Oe&&xc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Sc(t)),additionalUserInfo:ro(e),user:Cc.getOrCreate(r)}}))}function Ic(e,t){return Ec.apply(this,arguments)}function Ec(){return Ec=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return _c(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}var Tc=function(){function e(t,n){ie(this,e),this.resolver=n,this.auth=t.wrapped()}return oe(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return _c(wc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Cc=function(){function e(t){ie(this,e),this._delegate=t,this.multiFactor=function(e){var t=We(e);return co.has(t)||co.set(t,so._fromUser(t)),co.get(t)}(t)}return oe(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_c(this.auth,wa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ic(this.auth,ou(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_c(this.auth,_u(this._delegate,t,bc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mc(ai(this.auth));case 2:return e.abrupt("return",ju(this._delegate,t,bc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_c(this.auth,Sa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ic(this.auth,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return _c(this.auth,function(e,t,n){return Su.apply(this,arguments)}(this._delegate,e,bc))}},{key:"reauthenticateWithRedirect",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mc(ai(this.auth));case 2:return e.abrupt("return",Vu(this._delegate,t,bc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ka.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return $a(We(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return $a(We(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return fu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Qa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Wa.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Cc.USER_MAP=new WeakMap;var Nc=Gn,Ac=function(){function e(t,n){if(ie(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Nc(r,"invalid-api-key",{appName:t.name}),Nc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?bc:void 0;this._delegate=n.initialize({options:{persistence:Oc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Mn),this.linkUnderlyingAuth()}return oe(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Cc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ui(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Da.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ra(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Oa.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_c(this._delegate,Fa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return qa.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ki.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nc(sc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zu(this._delegate,bc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",_c(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ai(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Pc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Pc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ua.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Pa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vc(this._delegate,t),e.t0=t,e.next=e.t0===hc.SESSION?4:e.t0===hc.LOCAL?6:e.t0===hc.NONE?11:13;break;case 4:return n=mo,e.abrupt("break",14);case 6:return e.next=8,Yn(Uo)._isAvailable();case 8:return r=e.sent,n=r?Uo:po,e.abrupt("break",14);case 11:return n=Br,e.abrupt("break",14);case 13:return e.abrupt("return",Bn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return _c(this._delegate,function(e){return aa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return _c(this._delegate,ka(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return _c(this._delegate,function(e,t){return Ta.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return _c(this._delegate,function(e,t,n){return ka(We(e),Wi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return _c(this._delegate,function(e,t,n){return ja.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ic(this._delegate,function(e,t,n){return au.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nc(sc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",_c(this._delegate,wu(this._delegate,t,bc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Nc(sc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,mc(this._delegate);case 3:return e.abrupt("return",Mu(this._delegate,t,bc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ma.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Pc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Cc.getOrCreate(e))},error:t,complete:n}}function Oc(e,t){var n=function(e,t){var n=gc();if(!n)return[];var r=zr(pc,e,t);switch(n.getItem(r)){case hc.NONE:return[Br];case hc.LOCAL:return[Uo,mo];case hc.SESSION:return[mo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Uo)||n.push(Uo),"undefined"!==typeof window)for(var r=0,i=[po,mo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Br)||n.push(Br),n}Ac.Persistence=hc;var Dc=function(){function e(){ie(this,e),this.providerId="phone",this._delegate=new hu(wc(kn.auth()))}return oe(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return hu.credential(e,t)}}]),e}();Dc.PHONE_SIGN_IN_METHOD=hu.PHONE_SIGN_IN_METHOD,Dc.PROVIDER_ID=hu.PROVIDER_ID;var Rc,Lc=Gn,Mc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kn.app();ie(this,e),Lc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new nu(t,n,i.auth()),this.type=this._delegate.type}return oe(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Rc=kn).INTERNAL.registerComponent(new $e("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ac(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Nn,PASSWORD_RESET:An,RECOVER_EMAIL:Pn,REVERT_SECOND_FACTOR_ADDITION:On,VERIFY_AND_CHANGE_EMAIL:Dn,VERIFY_EMAIL:Rn}},EmailAuthProvider:Wi,FacebookAuthProvider:$i,GithubAuthProvider:Xi,GoogleAuthProvider:Yi,OAuthProvider:Qi,SAMLAuthProvider:Zi,PhoneAuthProvider:Dc,PhoneMultiFactorGenerator:Ts,RecaptchaVerifier:Mc,TwitterAuthProvider:ea,Auth:Ac,AuthCredential:li,Error:Oe}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Rc.registerVersion("@firebase/auth-compat","0.2.15");var Fc,Vc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Uc={},jc=jc||{},Bc=Vc||self;function zc(){}function qc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Kc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wc="closure_uid_"+(1e9*Math.random()>>>0),Gc=0;function Hc(e,t,n){return e.call.apply(e.bind,arguments)}function Qc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $c(e,t,n){return($c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hc:Qc).apply(null,arguments)}function Yc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jc(){this.s=this.s,this.o=this.o}var Zc={};Jc.prototype.s=!1,Jc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Wc)&&e[Wc]||(e[Wc]=++Gc)}(this);delete Zc[e]}},Jc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var el=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},tl=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function nl(e){return Array.prototype.concat.apply([],arguments)}function rl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function il(e){return/^[\s\xa0]*$/.test(e)}var al,ol=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ul(e,t){return-1!=e.indexOf(t)}function sl(e,t){return e<t?-1:e>t?1:0}e:{var cl=Bc.navigator;if(cl){var ll=cl.userAgent;if(ll){al=ll;break e}}al=""}function fl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function hl(e){var t={};for(var n in e)t[n]=e[n];return t}var dl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<dl.length;a++)n=dl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function vl(e){return vl[" "](e),e}vl[" "]=zc;var ml,yl=ul(al,"Opera"),gl=ul(al,"Trident")||ul(al,"MSIE"),kl=ul(al,"Edge"),bl=kl||gl,wl=ul(al,"Gecko")&&!(ul(al.toLowerCase(),"webkit")&&!ul(al,"Edge"))&&!(ul(al,"Trident")||ul(al,"MSIE"))&&!ul(al,"Edge"),xl=ul(al.toLowerCase(),"webkit")&&!ul(al,"Edge");function Sl(){var e=Bc.document;return e?e.documentMode:void 0}e:{var _l="",Il=function(){var e=al;return wl?/rv:([^\);]+)(\)|;)/.exec(e):kl?/Edge\/([\d\.]+)/.exec(e):gl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):xl?/WebKit\/(\S+)/.exec(e):yl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Il&&(_l=Il?Il[1]:""),gl){var El=Sl();if(null!=El&&El>parseFloat(_l)){ml=String(El);break e}}ml=_l}var Tl,Cl={};function Nl(){return function(e){var t=Cl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ol(String(ml)).split("."),n=ol("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=sl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||sl(0==a[2].length,0==o[2].length)||sl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Bc.document&&gl){var Al=Sl();Tl=Al||(parseInt(ml,10)||void 0)}else Tl=void 0;var Pl=Tl,Ol=function(){if(!Bc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Bc.addEventListener("test",zc,t),Bc.removeEventListener("test",zc,t)}catch(PC){}return e}();function Dl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Rl(e,t){if(Dl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(wl){e:{try{vl(t.nodeName);var i=!0;break e}catch(AC){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ll[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Rl.Z.h.call(this)}}Dl.prototype.h=function(){this.defaultPrevented=!0},Xc(Rl,Dl);var Ll={2:"touch",3:"pen",4:"mouse"};Rl.prototype.h=function(){Rl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ml="closure_listenable_"+(1e6*Math.random()|0),Fl=0;function Vl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Fl,this.ca=this.fa=!1}function Ul(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function jl(e){this.src=e,this.g={},this.h=0}function Bl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=el(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ul(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}jl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=zl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Vl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ql="closure_lm_"+(1e6*Math.random()|0),Kl={};function Wl(e,t,n,r,i){if(r&&r.once)return Hl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Wl(e,t[a],n,r,i);return null}return n=ef(n),e&&e[Ml]?e.N(t,n,Kc(r)?!!r.capture:!!r,i):Gl(e,t,n,!1,r,i)}function Gl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Kc(i)?!!i.capture:!!i,u=Jl(e);if(u||(e[ql]=u=new jl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Xl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ol||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Hl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Hl(e,t[a],n,r,i);return null}return n=ef(n),e&&e[Ml]?e.O(t,n,Kc(r)?!!r.capture:!!r,i):Gl(e,t,n,!0,r,i)}function Ql(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ql(e,t[a],n,r,i);else r=Kc(r)?!!r.capture:!!r,n=ef(n),e&&e[Ml]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=zl(a=e.g[t],n,r,i))&&(Ul(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Jl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zl(t,n,r,i)),(n=-1<e?t[e]:null)&&$l(n))}function $l(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ml])Bl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jl(t))?(Bl(n,e),0==n.h&&(n.src=null,t[ql]=null)):Ul(e)}}}function Yl(e){return e in Kl?Kl[e]:Kl[e]="on"+e}function Xl(e,t){if(e.ca)e=!0;else{t=new Rl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$l(e),e=n.call(r,t)}return e}function Jl(e){return(e=e[ql])instanceof jl?e:null}var Zl="__closure_events_fn_"+(1e9*Math.random()>>>0);function ef(e){return"function"===typeof e?e:(e[Zl]||(e[Zl]=function(t){return e.handleEvent(t)}),e[Zl])}function tf(){Jc.call(this),this.i=new jl(this),this.P=this,this.I=null}function nf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Dl(t,e);else if(t instanceof Dl)t.target=t.target||e;else{var i=t;pl(t=new Dl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=rf(o,r,!0,t)&&i}if(i=rf(o=t.g=e,r,!0,t)&&i,i=rf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=rf(o=t.g=n[a],r,!1,t)&&i}function rf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Bl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Xc(tf,Jc),tf.prototype[Ml]=!0,tf.prototype.removeEventListener=function(e,t,n,r){Ql(this,e,t,n,r)},tf.prototype.M=function(){if(tf.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ul(n[r]);delete t.g[e],t.h--}}this.I=null},tf.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},tf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var af=Bc.JSON.stringify;function of(){var e=pf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var uf,sf=function(){function e(){ie(this,e),this.h=this.g=null}return oe(e,[{key:"add",value:function(e,t){var n=cf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),cf=new(function(){function e(t,n){ie(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return oe(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new lf}),(function(e){return e.reset()})),lf=function(){function e(){ie(this,e),this.next=this.g=this.h=null}return oe(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ff(e){Bc.setTimeout((function(){throw e}),0)}function hf(e,t){uf||function(){var e=Bc.Promise.resolve(void 0);uf=function(){e.then(vf)}}(),df||(uf(),df=!0),pf.add(e,t)}var df=!1,pf=new sf;function vf(){for(var e;e=of();){try{e.h.call(e.g)}catch(PC){ff(PC)}var t=cf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}df=!1}function mf(e,t){tf.call(this),this.h=e||1,this.g=t||Bc,this.j=$c(this.kb,this),this.l=Date.now()}function yf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function gf(e,t,n){if("function"===typeof e)n&&(e=$c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$c(e.handleEvent,e)}return 2147483647<Number(t)?-1:Bc.setTimeout(e,t||0)}function kf(e){e.g=gf((function(){e.g=null,e.i&&(e.i=!1,kf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xc(mf,tf),(Fc=mf.prototype).da=!1,Fc.S=null,Fc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),nf(this,"tick"),this.da&&(yf(this),this.start()))}},Fc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fc.M=function(){mf.Z.M.call(this),yf(this),delete this.g};var bf=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return oe(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:kf(this)}},{key:"M",value:function(){wn(fe(n.prototype),"M",this).call(this),this.g&&(Bc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jc);function wf(e){Jc.call(this),this.h=e,this.g={}}Xc(wf,Jc);var xf=[];function Sf(e,t,n,r){Array.isArray(n)||(n&&(xf[0]=n.toString()),n=xf);for(var i=0;i<n.length;i++){var a=Wl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function _f(e){fl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$l(e)}),e),e.g={}}function If(){this.g=!0}function Ef(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return af(n)}catch(SC){return t}}(e,n)+(r?" "+r:"")}))}wf.prototype.M=function(){wf.Z.M.call(this),_f(this)},wf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},If.prototype.Aa=function(){this.g=!1},If.prototype.info=function(){};var Tf={},Cf=null;function Nf(){return Cf=Cf||new tf}function Af(e){Dl.call(this,Tf.Ma,e)}function Pf(e){var t=Nf();nf(t,new Af(t,e))}function Of(e,t){Dl.call(this,Tf.STAT_EVENT,e),this.stat=t}function Df(e){var t=Nf();nf(t,new Of(t,e))}function Rf(e,t){Dl.call(this,Tf.Na,e),this.size=t}function Lf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Bc.setTimeout((function(){e()}),t)}Tf.Ma="serverreachability",Xc(Af,Dl),Tf.STAT_EVENT="statevent",Xc(Of,Dl),Tf.Na="timingevent",Xc(Rf,Dl);var Mf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ff={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Vf(){}function Uf(e){return e.h||(e.h=e.i())}function jf(){}Vf.prototype.h=null;var Bf,zf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qf(){Dl.call(this,"d")}function Kf(){Dl.call(this,"c")}function Wf(){}function Gf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new wf(this),this.P=Qf,e=bl?125:void 0,this.W=new mf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hf}function Hf(){this.i=null,this.g="",this.h=!1}Xc(qf,Dl),Xc(Kf,Dl),Xc(Wf,Vf),Wf.prototype.g=function(){return new XMLHttpRequest},Wf.prototype.i=function(){return{}},Bf=new Wf;var Qf=45e3,$f={},Yf={};function Xf(e,t,n){e.K=1,e.v=bh(ph(t)),e.s=n,e.U=!0,Jf(e,null)}function Jf(e,t){e.F=Date.now(),nh(e),e.A=ph(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Dh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Hf,e.g=Rd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new bf($c(e.Ia,e,e.g),e.O)),Sf(e.V,e.g,"readystatechange",e.gb),t=e.H?hl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Zf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function eh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=th(e,n))==Yf){4==t&&(e.o=4,Df(14),i=!1),Ef(e.j,e.m,null,"[Incomplete Response]");break}if(r==$f){e.o=4,Df(15),Ef(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ef(e.j,e.m,r,null),uh(e,r)}Zf(e)&&r!=Yf&&r!=$f&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Df(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ed(t),t.L=!0,Df(11))):(Ef(e.j,e.m,n,"[Invalid Chunked Response]"),oh(e),ah(e))}function th(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Yf:(n=Number(t.substring(n,r)),isNaN(n)?$f:(r+=1)+n>t.length?Yf:(t=t.substr(r,n),e.C=r+n,t))}function nh(e){e.Y=Date.now()+e.P,rh(e,e.P)}function rh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Lf($c(e.eb,e),t)}function ih(e){e.B&&(Bc.clearTimeout(e.B),e.B=null)}function ah(e){0==e.l.G||e.I||Nd(e.l,e)}function oh(e){ih(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,yf(e.W),_f(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function uh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||jh(n.i,e)))if(n.I=e.N,!e.J&&jh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Cd(n),yd(n)}Id(n),Df(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Lf($c(n.ab,n),6e3));if(1>=Uh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Pd(n,11)}else if((e.J||n.g==e)&&Cd(n),!il(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ul(l,"spdy")||ul(l,"quic")||ul(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Bh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,kh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Dd(r,r.H?r.la:null,r.W),d.J){zh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ih(p),nh(p)),r.g=d}else _d(r);0<n.l.length&&bd(n)}else"stop"!=a[0]&&"close"!=a[0]||Pd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Pd(n,7):md(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Pf(4)}catch(a){}}function sh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qc(e)||"string"===typeof e)tl(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(qc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(qc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function ch(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ch)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function lh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];fh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)fh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function fh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Fc=Gf.prototype).setTimeout=function(e){this.P=e},Fc.gb=function(e){e=e.target;var t=this.L;t&&3==fd(e)?t.l():this.Ia(e)},Fc.Ia=function(e){try{if(e==this.g)e:{var t=fd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||bl||this.g&&(this.h.h||this.g.ga()||hd(this.g)))){this.I||4!=t||7==n||Pf(8==n||0>=r?3:2),ih(this);var i=this.g.ba();this.N=i;t:if(Zf(this)){var a=hd(this.g);e="";var o=a.length,u=4==fd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){oh(this),ah(this);var s="";break t}this.h.i=new Bc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!il(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Df(12),oh(this),ah(this);break e}Ef(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,uh(this,i)}this.U?(eh(this,t,s),bl&&this.i&&3==t&&(Sf(this.V,this.W,"tick",this.fb),this.W.start())):(Ef(this.j,this.m,s,null),uh(this,s)),4==t&&oh(this),this.i&&!this.I&&(4==t?Nd(this.l,this):(this.i=!1,nh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Df(12)):(this.o=0,Df(13)),oh(this),ah(this)}}}catch(t){}},Fc.fb=function(){if(this.g){var e=fd(this.g),t=this.g.ga();this.C<t.length&&(ih(this),eh(this,e,t),this.i&&4!=e&&nh(this))}},Fc.cancel=function(){this.I=!0,oh(this)},Fc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Pf(3),Df(17)),oh(this),this.o=2,ah(this)):rh(this,this.Y-e)},(Fc=ch.prototype).R=function(){lh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Fc.T=function(){return lh(this),this.g.concat()},Fc.get=function(e,t){return fh(this.h,e)?this.h[e]:t},Fc.set=function(e,t){fh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Fc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var hh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof dh){this.g=void 0!==t?t:e.g,vh(this,e.j),this.s=e.s,mh(this,e.i),yh(this,e.m),this.l=e.l,t=e.h;var n=new Nh;n.i=t.i,t.g&&(n.g=new ch(t.g),n.h=t.h),gh(this,n),this.o=e.o}else e&&(n=String(e).match(hh))?(this.g=!!t,vh(this,n[1]||"",!0),this.s=wh(n[2]||""),mh(this,n[3]||"",!0),yh(this,n[4]),this.l=wh(n[5]||"",!0),gh(this,n[6]||"",!0),this.o=wh(n[7]||"")):(this.g=!!t,this.h=new Nh(null,this.g))}function ph(e){return new dh(e)}function vh(e,t,n){e.j=n?wh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mh(e,t,n){e.i=n?wh(t,!0):t}function yh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gh(e,t,n){t instanceof Nh?(e.h=t,function(e,t){t&&!e.j&&(Ah(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ph(this,t),Dh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=xh(t,Th)),e.h=new Nh(t,e.g))}function kh(e,t,n){e.h.set(t,n)}function bh(e){return kh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function wh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function xh(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Sh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Sh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(xh(t,_h,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(xh(t,_h,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(xh(n,"/"==n.charAt(0)?Eh:Ih,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",xh(n,Ch)),e.join("")};var _h=/[#\/\?@]/g,Ih=/[#\?:]/g,Eh=/[#\?]/g,Th=/[#\?@]/g,Ch=/#/g;function Nh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ah(e){e.g||(e.g=new ch,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ph(e,t){Ah(e),t=Rh(e,t),fh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,fh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&lh(e)))}function Oh(e,t){return Ah(e),t=Rh(e,t),fh(e.g.h,t)}function Dh(e,t,n){Ph(e,t),0<n.length&&(e.i=null,e.g.set(Rh(e,t),rl(n)),e.h+=n.length)}function Rh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fc=Nh.prototype).add=function(e,t){Ah(this),this.i=null,e=Rh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fc.forEach=function(e,t){Ah(this),this.g.forEach((function(n,r){tl(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Fc.T=function(){Ah(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Fc.R=function(e){Ah(this);var t=[];if("string"===typeof e)Oh(this,e)&&(t=nl(t,this.g.get(Rh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=nl(t,e[n])}return t},Fc.set=function(e,t){return Ah(this),this.i=null,Oh(this,e=Rh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Fc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Lh=oe((function e(t,n){ie(this,e),this.h=t,this.g=n}));function Mh(e){this.l=e||Fh,Bc.PerformanceNavigationTiming?e=0<(e=Bc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Bc.g&&Bc.g.Ea&&Bc.g.Ea()&&Bc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fh=10;function Vh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Uh(e){return e.h?1:e.g?e.g.size:0}function jh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bh(e,t){e.g?e.g.add(t):e.h=t}function zh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ue(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return rl(e.i)}function Kh(){}function Wh(){this.g=new Kh}function Gh(e,t,n){var r=n||"";try{sh(e,(function(e,n){var i=e;Kc(e)&&(i=af(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(AC){}}function Qh(e){this.l=e.$b||null,this.j=e.ib||!1}function $h(e,t){tf.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Yh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mh.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ue(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Kh.prototype.stringify=function(e){return Bc.JSON.stringify(e,void 0)},Kh.prototype.parse=function(e){return Bc.JSON.parse(e,void 0)},Xc(Qh,Vf),Qh.prototype.g=function(){return new $h(this.l,this.j)},Qh.prototype.i=function(e){return function(){return e}}({}),Xc($h,tf);var Yh=0;function Xh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Jh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Zh(e)}function Zh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fc=$h.prototype).open=function(e,t){if(this.readyState!=Yh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Zh(this)},Fc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Bc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Fc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jh(this)),this.readyState=Yh},Fc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Zh(this)),this.g&&(this.readyState=3,Zh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Bc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Fc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jh(this):Zh(this),3==this.readyState&&Xh(this)}},Fc.Ua=function(e){this.g&&(this.response=this.responseText=e,Jh(this))},Fc.Ta=function(e){this.g&&(this.response=e,Jh(this))},Fc.ha=function(){this.g&&Jh(this)},Fc.setRequestHeader=function(e,t){this.v.append(e,t)},Fc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($h.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ed=Bc.JSON.parse;function td(e){tf.call(this),this.headers=new ch,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nd,this.K=this.L=!1}Xc(td,tf);var nd="",rd=/^https?$/i,id=["POST","PUT"];function ad(e){return"content-type"==e.toLowerCase()}function od(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ud(e),cd(e)}function ud(e){e.D||(e.D=!0,nf(e,"complete"),nf(e,"error"))}function sd(e){if(e.h&&"undefined"!=typeof jc&&(!e.C[1]||4!=fd(e)||2!=e.ba()))if(e.v&&4==fd(e))gf(e.Fa,0,e);else if(nf(e,"readystatechange"),4==fd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(hh)[1]||null;if(!a&&Bc.self&&Bc.self.location){var o=Bc.self.location.protocol;a=o.substr(0,o.length-1)}i=!rd.test(a?a.toLowerCase():"")}t=i}if(t)nf(e,"complete"),nf(e,"success");else{e.m=6;try{var u=2<fd(e)?e.g.statusText:""}catch(CC){u=""}e.j=u+" ["+e.ba()+"]",ud(e)}}finally{cd(e)}}}function cd(e,t){if(e.g){ld(e);var n=e.g,r=e.C[0]?zc:null;e.g=null,e.C=null,t||nf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ld(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Bc.clearTimeout(e.A),e.A=null)}function fd(e){return e.g?e.g.readyState:0}function hd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case nd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(UC){return null}}function dd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return fl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):kh(e,t,n))}function pd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vd(e){this.za=0,this.l=[],this.h=new If,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=pd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=pd("baseRetryDelayMs",5e3,e),this.$a=pd("retryDelaySeedMs",1e4,e),this.Ya=pd("forwardChannelMaxRetries",2,e),this.ra=pd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Mh(e&&e.concurrentRequestLimit),this.Ca=new Wh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function md(e){if(gd(e),3==e.G){var t=e.V++,n=ph(e.F);kh(n,"SID",e.J),kh(n,"RID",t),kh(n,"TYPE","terminate"),xd(e,n),(t=new Gf(e,e.h,t,void 0)).K=2,t.v=bh(ph(n)),n=!1,Bc.navigator&&Bc.navigator.sendBeacon&&(n=Bc.navigator.sendBeacon(t.v.toString(),"")),!n&&Bc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Rd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),nh(t)}Od(e)}function yd(e){e.g&&(Ed(e),e.g.cancel(),e.g=null)}function gd(e){yd(e),e.u&&(Bc.clearTimeout(e.u),e.u=null),Cd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Bc.clearTimeout(e.m),e.m=null)}function kd(e,t){e.l.push(new Lh(e.Za++,t)),3==e.G&&bd(e)}function bd(e){Vh(e.i)||e.m||(e.m=!0,hf(e.Ha,e),e.C=0)}function wd(e,t){var n;n=t?t.m:e.V++;var r=ph(e.F);kh(r,"SID",e.J),kh(r,"RID",n),kh(r,"AID",e.U),xd(e,r),e.o&&e.s&&dd(r,e.o,e.s),n=new Gf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Sd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Bh(e.i,n),Xf(n,r,t)}function xd(e,t){e.j&&sh({},(function(e,n){kh(t,n,e)}))}function Sd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?$c(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Gh(l,o,"req"+c+"_")}catch(sp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function _d(e){e.g||e.u||(e.Y=1,hf(e.Ga,e),e.A=0)}function Id(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Lf($c(e.Ga,e),Ad(e,e.A)),e.A++,!0)}function Ed(e){null!=e.B&&(Bc.clearTimeout(e.B),e.B=null)}function Td(e){e.g=new Gf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ph(e.oa);kh(t,"RID","rpc"),kh(t,"SID",e.J),kh(t,"CI",e.N?"0":"1"),kh(t,"AID",e.U),xd(e,t),kh(t,"TYPE","xmlhttp"),e.o&&e.s&&dd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=bh(ph(t)),n.s=null,n.U=!0,Jf(n,e)}function Cd(e){null!=e.v&&(Bc.clearTimeout(e.v),e.v=null)}function Nd(e,t){var n=null;if(e.g==t){Cd(e),Ed(e),e.g=null;var r=2}else{if(!jh(e.i,t))return;n=t.D,zh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;nf(r=Nf(),new Rf(r,n,t,i)),bd(e)}else _d(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Uh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Lf($c(e.Ha,e,t),Ad(e,e.C)),e.C++,!0))}(e,t)||2==r&&Id(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Pd(e,5);break;case 4:Pd(e,10);break;case 3:Pd(e,6);break;default:Pd(e,2)}}function Ad(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Pd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=$c(e.jb,e);n||(n=new dh("//www.google.com/images/cleardot.gif"),Bc.location&&"http"==Bc.location.protocol||vh(n,"https"),bh(n)),function(e,t){var n=new If;if(Bc.Image){var r=new Image;r.onload=Yc(Hh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yc(Hh,n,r,"TestLoadImage: error",!1,t),r.onabort=Yc(Hh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yc(Hh,n,r,"TestLoadImage: timeout",!1,t),Bc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Df(2);e.G=0,e.j&&e.j.va(t),Od(e),gd(e)}function Od(e){e.G=0,e.I=-1,e.j&&(0==qh(e.i).length&&0==e.l.length||(e.i.i.length=0,rl(e.l),e.l.length=0),e.j.ua())}function Dd(e,t,n){var r=function(e){return e instanceof dh?ph(e):new dh(e,void 0)}(n);if(""!=r.i)t&&mh(r,t+"."+r.i),yh(r,r.m);else{var i=Bc.location;r=function(e,t,n,r){var i=new dh(null,void 0);return e&&vh(i,e),t&&mh(i,t),n&&yh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&fl(e.aa,(function(e,t){kh(r,t,e)})),t=e.D,n=e.sa,t&&n&&kh(r,t,n),kh(r,"VER",e.ma),xd(e,r),r}function Rd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new td(new Qh({ib:!0})):new td(e.qa)).L=e.H,t}function Ld(){}function Md(){if(gl&&!(10<=Number(Pl)))throw Error("Environmental error: no available transport.")}function Fd(e,t){tf.call(this),this.g=new vd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!il(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!il(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jd(this)}function Vd(e){qf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ud(){Kf.call(this),this.status=1}function jd(e){this.g=e}(Fc=td.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bf.g(),this.C=this.u?Uf(this.u):Uf(Bf),this.g.onreadystatechange=$c(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(AC){return void od(this,AC)}e=n||"";var i=new ch(this.headers);r&&sh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ad,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Bc.FormData&&e instanceof Bc.FormData,!(0<=el(id,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ld(this),0<this.B&&((this.K=function(e){return gl&&Nl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$c(this.pa,this)):this.A=gf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(AC){od(this,AC)}},Fc.pa=function(){"undefined"!=typeof jc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nf(this,"timeout"),this.abort(8))},Fc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,nf(this,"complete"),nf(this,"abort"),cd(this))},Fc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cd(this,!0)),td.Z.M.call(this)},Fc.Fa=function(){this.s||(this.F||this.v||this.l?sd(this):this.cb())},Fc.cb=function(){sd(this)},Fc.ba=function(){try{return 2<fd(this)?this.g.status:-1}catch(NC){return-1}},Fc.ga=function(){try{return this.g?this.g.responseText:""}catch(NC){return""}},Fc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ed(t)}},Fc.Da=function(){return this.m},Fc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fc=vd.prototype).ma=8,Fc.G=1,Fc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(UC){}},Fc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Gf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?pl(n=hl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sd(this,t,r),kh(i=ph(this.F),"RID",e),kh(i,"CVER",22),this.D&&kh(i,"X-HTTP-Session-Id",this.D),xd(this,i),this.o&&n&&dd(i,this.o,n),Bh(this.i,t),this.Ra&&kh(i,"TYPE","init"),this.ja?(kh(i,"$req",r),kh(i,"SID","null"),t.$=!0,Xf(t,i,null)):Xf(t,i,r),this.G=2}}else 3==this.G&&(e?wd(this,e):0==this.l.length||Vh(this.i)||wd(this))},Fc.Ga=function(){if(this.u=null,Td(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Lf($c(this.bb,this),e)}},Fc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Df(10),yd(this),Td(this))},Fc.ab=function(){null!=this.v&&(this.v=null,yd(this),Id(this),Df(19))},Fc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Df(2)):(this.h.info("Failed to ping google.com"),Df(1))},(Fc=Ld.prototype).xa=function(){},Fc.wa=function(){},Fc.va=function(){},Fc.ua=function(){},Fc.Oa=function(){},Md.prototype.g=function(e,t){return new Fd(e,t)},Xc(Fd,tf),Fd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),hf($c(e.hb,e,t))),Df(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Dd(e,null,e.W),bd(e)},Fd.prototype.close=function(){md(this.g)},Fd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,kd(this.g,t)}else this.v?((t={}).__data__=af(e),kd(this.g,t)):kd(this.g,e)},Fd.prototype.M=function(){this.g.j=null,delete this.j,md(this.g),delete this.g,Fd.Z.M.call(this)},Xc(Vd,qf),Xc(Ud,Kf),Xc(jd,Ld),jd.prototype.xa=function(){nf(this.g,"a")},jd.prototype.wa=function(e){nf(this.g,new Vd(e))},jd.prototype.va=function(e){nf(this.g,new Ud(e))},jd.prototype.ua=function(){nf(this.g,"b")},Md.prototype.createWebChannel=Md.prototype.g,Fd.prototype.send=Fd.prototype.u,Fd.prototype.open=Fd.prototype.m,Fd.prototype.close=Fd.prototype.close,Mf.NO_ERROR=0,Mf.TIMEOUT=8,Mf.HTTP_ERROR=6,Ff.COMPLETE="complete",jf.EventType=zf,zf.OPEN="a",zf.CLOSE="b",zf.ERROR="c",zf.MESSAGE="d",tf.prototype.listen=tf.prototype.N,td.prototype.listenOnce=td.prototype.O,td.prototype.getLastError=td.prototype.La,td.prototype.getLastErrorCode=td.prototype.Da,td.prototype.getStatus=td.prototype.ba,td.prototype.getResponseJson=td.prototype.Qa,td.prototype.getResponseText=td.prototype.ga,td.prototype.send=td.prototype.ea;var Bd=Uc.createWebChannelTransport=function(){return new Md},zd=Uc.getStatEventTarget=function(){return Nf()},qd=Uc.ErrorCode=Mf,Kd=Uc.EventType=Ff,Wd=Uc.Event=Tf,Gd=Uc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hd=Uc.FetchXmlHttpFactory=Qh,Qd=Uc.WebChannel=jf,$d=Uc.XhrIo=td,Yd="@firebase/firestore",Xd=function(){function e(t){ie(this,e),this.uid=t}return oe(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Xd.UNAUTHENTICATED=new Xd(null),Xd.GOOGLE_CREDENTIALS=new Xd("google-credentials-uid"),Xd.FIRST_PARTY=new Xd("first-party-uid"),Xd.MOCK_USER=new Xd("mock-user");var Jd="9.8.0",Zd=new ot("@firebase/firestore");function ep(){return Zd.logLevel}function tp(e){if(Zd.logLevel<=Ze.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ip);Zd.debug.apply(Zd,["Firestore (".concat(Jd,"): ").concat(e)].concat(Y(i)))}}function np(e){if(Zd.logLevel<=Ze.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ip);Zd.error.apply(Zd,["Firestore (".concat(Jd,"): ").concat(e)].concat(Y(i)))}}function rp(e){if(Zd.logLevel<=Ze.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ip);Zd.warn.apply(Zd,["Firestore (".concat(Jd,"): ").concat(e)].concat(Y(i)))}}function ip(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Jd,") INTERNAL ASSERTION FAILED: ")+e;throw np(t),new Error(t)}function op(e,t){e||ap()}function up(e,t){return e}var sp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},cp=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return oe(n)}(Oe),lp=oe((function e(){var t=this;ie(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),fp=oe((function e(t,n){ie(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),hp=function(){function e(){ie(this,e)}return oe(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),dp=function(){function e(t){ie(this,e),this.token=t,this.changeListener=null}return oe(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),pp=function(){function e(t){ie(this,e),this.t=t,this.currentUser=Xd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return oe(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new lp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new lp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){tp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(tp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(tp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(op("string"==typeof n.accessToken),new fp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return op(null===e||"string"==typeof e),new Xd(e)}}]),e}(),vp=oe((function e(t,n,r){ie(this,e),this.type="FirstParty",this.user=Xd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),mp=function(){function e(t,n,r){ie(this,e),this.h=t,this.l=n,this.m=r}return oe(e,[{key:"getToken",value:function(){return Promise.resolve(new vp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),yp=oe((function e(t){ie(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),gp=function(){function e(t){ie(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return oe(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&tp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,tp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){tp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):tp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(op("string"==typeof t.token),e.p=t.token,new yp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),kp=function(){function e(t,n){var r=this;ie(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return oe(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function bp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}kp.A=-1;var wp=function(){function e(){ie(this,e)}return oe(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function xp(e,t){return e<t?-1:e>t?1:0}function Sp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function _p(e){return e+"\0"}var Ip=function(){function e(t,n){if(ie(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new cp(sp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new cp(sp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new cp(sp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new cp(sp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return oe(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?xp(this.nanoseconds,e.nanoseconds):xp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ep=function(){function e(t){ie(this,e),this.timestamp=t}return oe(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ip(0,0))}},{key:"max",value:function(){return new e(new Ip(253402300799,999999999))}}]),e}();function Tp(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Np(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ap=function(){function e(t,n,r){ie(this,e),void 0===n?n=0:n>t.length&&ap(),void 0===r?r=t.length-n:r>t.length-n&&ap(),this.segments=t,this.offset=n,this.len=r}return oe(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Pp=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new cp(sp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Y(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ap),Op=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dp=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Op.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new cp(sp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new cp(sp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new cp(sp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new cp(sp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ap),Rp=function(){function e(t){ie(this,e),this.fields=t,t.sort(Dp.comparator)}return oe(e,[{key:"covers",value:function(e){var t,n=ue(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Sp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Lp=function(e){function t(e){ie(this,t),this.binaryString=e}return oe(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return xp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Lp.EMPTY_BYTE_STRING=new Lp("");var Mp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fp(e){if(op(!!e),"string"==typeof e){var t=0,n=Mp.exec(e);if(op(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Vp(e.seconds),nanos:Vp(e.nanos)}}function Vp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Up(e){return"string"==typeof e?Lp.fromBase64String(e):Lp.fromUint8Array(e)}function jp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bp(e){var t=e.mapValue.fields.__previous_value__;return jp(t)?Bp(t):t}function zp(e){var t=Fp(e.mapValue.fields.__local_write_time__.timestampValue);return new Ip(t.seconds,t.nanos)}var qp=oe((function e(t,n,r,i,a,o,u,s){ie(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Kp=function(){function e(t,n){ie(this,e),this.projectId=t,this.database=n||"(default)"}return oe(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Wp(e){return null==e}function Gp(e){return 0===e&&1/e==-1/0}function Hp(e){return"number"==typeof e&&Number.isInteger(e)&&!Gp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Qp=function(){function e(t){ie(this,e),this.path=t}return oe(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Pp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Pp.fromString(t))}},{key:"fromName",value:function(t){return new e(Pp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Pp.emptyPath())}},{key:"comparator",value:function(e,t){return Pp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Pp(t.slice()))}}]),e}(),$p={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yp={nullValue:"NULL_VALUE"};function Xp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jp(e)?4:fv(e)?9007199254740991:10:ap()}function Jp(e,t){if(e===t)return!0;var n=Xp(e);if(n!==Xp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zp(e).isEqual(zp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Fp(e.timestampValue),r=Fp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Up(e.bytesValue).isEqual(Up(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Vp(e.geoPointValue.latitude)===Vp(t.geoPointValue.latitude)&&Vp(e.geoPointValue.longitude)===Vp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Vp(e.integerValue)===Vp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Vp(e.doubleValue),r=Vp(t.doubleValue);return n===r?Gp(n)===Gp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Sp(e.arrayValue.values||[],t.arrayValue.values||[],Jp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tp(n)!==Tp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jp(n[i],r[i])))return!1;return!0}(e,t);default:return ap()}}function Zp(e,t){return void 0!==(e.values||[]).find((function(e){return Jp(e,t)}))}function ev(e,t){if(e===t)return 0;var n=Xp(e),r=Xp(t);if(n!==r)return xp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Vp(e.integerValue||e.doubleValue),r=Vp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tv(e.timestampValue,t.timestampValue);case 4:return tv(zp(e),zp(t));case 5:return xp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Up(e),r=Up(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=xp(n[i],r[i]);if(0!==a)return a}return xp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xp(Vp(e.latitude),Vp(t.latitude));return 0!==n?n:xp(Vp(e.longitude),Vp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ev(n[i],r[i]);if(a)return a}return xp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===$p.mapValue&&t===$p.mapValue)return 0;if(e===$p.mapValue)return 1;if(t===$p.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=xp(r[o],a[o]);if(0!==u)return u;var s=ev(n[r[o]],i[a[o]]);if(0!==s)return s}return xp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ap()}}function tv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xp(e,t);var n=Fp(e),r=Fp(t),i=xp(n.seconds,r.seconds);return 0!==i?i:xp(n.nanos,r.nanos)}function nv(e){return rv(e)}function rv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Fp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Up(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Qp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ue(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=rv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ue(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(rv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ap();var t,n}function iv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function av(e){return!!e&&"integerValue"in e}function ov(e){return!!e&&"arrayValue"in e}function uv(e){return!!e&&"nullValue"in e}function sv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cv(e){return!!e&&"mapValue"in e}function lv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Cp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=lv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=lv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function fv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function hv(e){return"nullValue"in e?Yp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?iv(Kp.empty(),Qp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ap()}function dv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?iv(Kp.empty(),Qp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?$p:ap()}function pv(e,t){var n=ev(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function vv(e,t){var n=ev(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var mv=function(){function e(t){ie(this,e),this.value=t}return oe(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!cv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lv(t)}},{key:"setAll",value:function(e){var t=this,n=Dp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=lv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());cv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Jp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];cv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Cp(t,(function(t,n){return e[t]=n}));var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(lv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function yv(e){var t=[];return Cp(e.fields,(function(e,n){var r=new Dp([e]);if(cv(n)){var i=yv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ue(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Rp(t)}var gv=function(){function e(t,n,r,i,a,o){ie(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return oe(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=mv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=mv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ep.min(),Ep.min(),mv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ep.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ep.min(),mv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ep.min(),mv.empty(),2)}}]),e}(),kv=oe((function e(t,n,r,i){ie(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function bv(e){return e.fields.find((function(e){return 2===e.kind}))}function wv(e){return e.fields.filter((function(e){return 2!==e.kind}))}kv.UNKNOWN_ID=-1;var xv=oe((function e(t,n){ie(this,e),this.fieldPath=t,this.kind=n})),Sv=function(){function e(t,n){ie(this,e),this.sequenceNumber=t,this.offset=n}return oe(e,null,[{key:"empty",value:function(){return new e(0,Ev.min())}}]),e}();function _v(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ep.fromTimestamp(1e9===r?new Ip(n+1,0):new Ip(n,r));return new Ev(i,Qp.empty(),t)}function Iv(e){return new Ev(e.readTime,e.key,-1)}var Ev=function(){function e(t,n,r){ie(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return oe(e,null,[{key:"min",value:function(){return new e(Ep.min(),Qp.empty(),-1)}},{key:"max",value:function(){return new e(Ep.max(),Qp.empty(),-1)}}]),e}();function Tv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Qp.comparator(e.documentKey,t.documentKey))?n:xp(e.largestBatchId,t.largestBatchId)}var Cv=function(){function e(t,n){ie(this,e),this.comparator=t,this.root=n||Av.EMPTY}return oe(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Av.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Av.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Nv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Nv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Nv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Nv(this.root,e,this.comparator,!0)}}]),e}(),Nv=function(){function e(t,n,r,i){ie(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return oe(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Av=function(){function e(t,n,r,i,a){ie(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return oe(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ap();if(this.right.isRed())throw ap();var e=this.left.check();if(e!==this.right.check())throw ap();return e+(this.isRed()?0:1)}}]),e}();Av.EMPTY=null,Av.RED=!0,Av.BLACK=!1,Av.EMPTY=new(function(){function e(){ie(this,e),this.size=0}return oe(e,[{key:"key",get:function(){throw ap()}},{key:"value",get:function(){throw ap()}},{key:"color",get:function(){throw ap()}},{key:"left",get:function(){throw ap()}},{key:"right",get:function(){throw ap()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Av(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Pv=function(){function e(t){ie(this,e),this.comparator=t,this.data=new Cv(this.comparator)}return oe(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ov(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ov(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ov=function(){function e(t){ie(this,e),this.iter=t}return oe(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Dv(e){return e.hasNext()?e.getNext():void 0}var Rv=oe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ie(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Lv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Rv(e,t,n,r,i,a,o)}function Mv(e){var t=up(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+nv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Wp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return nv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return nv(e)})).join(",")),t.P=n}return t.P}function Fv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Zv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Jp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!tm(e.startAt,t.startAt)&&tm(e.endAt,t.endAt)}function Vv(e){return Qp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Uv(e,t){return e.filters.filter((function(e){return e instanceof zv&&e.field.isEqual(t)}))}function jv(e,t,n){var r,i=Yp,a=!0,o=ue(Uv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Yp,c=!0;switch(u.op){case"<":case"<=":s=hv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Yp}pv({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];pv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Bv(e,t,n){var r,i=$p,a=!0,o=ue(Uv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$p,c=!0;switch(u.op){case">=":case">":s=dv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=$p}vv({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];vv({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var zv=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return oe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ev(t,this.value)):null!==t&&Xp(this.value)===Xp(t)&&this.v(ev(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ap()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new qv(e,t,r):"array-contains"===t?new Hv(e,r):"in"===t?new Qv(e,r):"not-in"===t?new $v(e,r):"array-contains-any"===t?new Yv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Kv(e,n):new Wv(e,n)}}]),n}(function(){return oe((function e(){ie(this,e)}))}()),qv=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,e,r,i)).key=Qp.fromName(i.referenceValue),a}return oe(n,[{key:"matches",value:function(e){var t=Qp.comparator(e.key,this.key);return this.v(t)}}]),n}(zv),Kv=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,"in",r)).keys=Gv("in",r),i}return oe(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zv),Wv=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,"not-in",r)).keys=Gv("not-in",r),i}return oe(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zv);function Gv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Qp.fromName(e.referenceValue)}))}var Hv=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"array-contains",r)}return oe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ov(t)&&Zp(t.arrayValue,this.value)}}]),n}(zv),Qv=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"in",r)}return oe(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Zp(this.value.arrayValue,t)}}]),n}(zv),$v=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"not-in",r)}return oe(n,[{key:"matches",value:function(e){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Zp(this.value.arrayValue,t)}}]),n}(zv),Yv=function(e){le(n,e);var t=ve(n);function n(e,r){return ie(this,n),t.call(this,e,"array-contains-any",r)}return oe(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ov(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Zp(t.value.arrayValue,e)}))}}]),n}(zv),Xv=oe((function e(t,n){ie(this,e),this.position=t,this.inclusive=n})),Jv=oe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ie(this,e),this.field=t,this.dir=n}));function Zv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function em(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Qp.comparator(Qp.fromName(o.referenceValue),n.key):ev(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function tm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Jp(e.position[n],t.position[n]))return!1;return!0}var nm=oe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ie(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function rm(e,t,n,r,i,a,o,u){return new nm(e,t,n,r,i,a,o,u)}function im(e){return new nm(e)}function am(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function om(e){var t,n=ue(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function um(e){return null!==e.collectionGroup}function sm(e){var t=up(e);if(null===t.D){t.D=[];var n=om(t),r=am(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Jv(n)),t.D.push(new Jv(Dp.keyField(),"asc"));else{var i,a=!1,o=ue(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Jv(Dp.keyField(),s))}}}return t.D}function cm(e){var t=up(e);if(!t.C)if("F"===t.limitType)t.C=Lv(t.path,t.collectionGroup,sm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ue(sm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Jv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Xv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Xv(t.startAt.position,t.startAt.inclusive):null;t.C=Lv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function lm(e,t,n){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fm(e,t){return Fv(cm(e),cm(t))&&e.limitType===t.limitType}function hm(e){return"".concat(Mv(cm(e)),"|lt:").concat(e.limitType)}function dm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(nv(t.value));var t})).join(", "),"]")),Wp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return nv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return nv(e)})).join(",")),"Target(".concat(t,")")}(cm(e)),"; limitType=").concat(e.limitType,")")}function pm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Qp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ue(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ue(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=em(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,sm(e),t))&&!(e.endAt&&!function(e,t,n){var r=em(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,sm(e),t))}(e,t)}function vm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function mm(e){return function(t,n){var r,i=!1,a=ue(sm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ym(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ym(e,t,n){var r=e.field.isKeyField()?Qp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ev(r,i):ap()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ap()}}function gm(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gp(t)?"-0":t}}function km(e){return{integerValue:""+e}}function bm(e,t){return Hp(t)?km(t):gm(e,t)}var wm=oe((function e(){ie(this,e),this._=void 0}));function xm(e,t,n){return e instanceof Im?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Em?Tm(e,t):e instanceof Cm?Nm(e,t):function(e,t){var n=_m(e,t),r=Pm(n)+Pm(e.k);return av(n)&&av(e.k)?km(r):gm(e.M,r)}(e,t)}function Sm(e,t,n){return e instanceof Em?Tm(e,t):e instanceof Cm?Nm(e,t):n}function _m(e,t){return e instanceof Am?av(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Im=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n)}(wm),Em=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).elements=e,r}return oe(n)}(wm);function Tm(e,t){var n,r=Om(t),i=ue(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Jp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Cm=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).elements=e,r}return oe(n)}(wm);function Nm(e,t){var n,r=Om(t),i=ue(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Jp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Am=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).M=e,i.k=r,i}return oe(n)}(wm);function Pm(e){return Vp(e.integerValue||e.doubleValue)}function Om(e){return ov(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Dm=oe((function e(t,n){ie(this,e),this.field=t,this.transform=n}));var Rm=oe((function e(t,n){ie(this,e),this.version=t,this.transformResults=n})),Lm=function(){function e(t,n){ie(this,e),this.updateTime=t,this.exists=n}return oe(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Mm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Fm=oe((function e(){ie(this,e)}));function Vm(e,t,n){e instanceof qm?function(e,t,n){var r=e.value.clone(),i=Gm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Km?function(e,t,n){if(Mm(e.precondition,t)){var r=Gm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Um(e,t,n){e instanceof qm?function(e,t,n){if(Mm(e.precondition,t)){var r=e.value.clone(),i=Hm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(zm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Km?function(e,t,n){if(Mm(e.precondition,t)){var r=Hm(e.fieldTransforms,n,t),i=t.data;i.setAll(Wm(e)),i.setAll(r),t.convertToFoundDocument(zm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Mm(e.precondition,t)&&t.convertToNoDocument(Ep.min())}(e,t)}function jm(e,t){var n,r=null,i=ue(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_m(a.transform,o||null);null!=u&&(null==r&&(r=mv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Bm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Sp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Em&&t instanceof Em||e instanceof Cm&&t instanceof Cm?Sp(e.elements,t.elements,Jp):e instanceof Am&&t instanceof Am?Jp(e.k,t.k):e instanceof Im&&t instanceof Im}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function zm(e){return e.isFoundDocument()?e.version:Ep.min()}var qm=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ie(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return oe(n)}(Fm),Km=function(e){le(n,e);var t=ve(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ie(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return oe(n)}(Fm);function Wm(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Gm(e,t,n){var r=new Map;op(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Sm(o,u,n[i]))}return r}function Hm(e,t,n){var r,i=new Map,a=ue(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,xm(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Qm,$m,Ym=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return oe(n)}(Fm),Xm=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return oe(n)}(Fm),Jm=oe((function e(t){ie(this,e),this.count=t}));function Zm(e){switch(e){default:return ap();case sp.CANCELLED:case sp.UNKNOWN:case sp.DEADLINE_EXCEEDED:case sp.RESOURCE_EXHAUSTED:case sp.INTERNAL:case sp.UNAVAILABLE:case sp.UNAUTHENTICATED:return!1;case sp.INVALID_ARGUMENT:case sp.NOT_FOUND:case sp.ALREADY_EXISTS:case sp.PERMISSION_DENIED:case sp.FAILED_PRECONDITION:case sp.ABORTED:case sp.OUT_OF_RANGE:case sp.UNIMPLEMENTED:case sp.DATA_LOSS:return!0}}function ey(e){if(void 0===e)return np("GRPC error has no .code"),sp.UNKNOWN;switch(e){case Qm.OK:return sp.OK;case Qm.CANCELLED:return sp.CANCELLED;case Qm.UNKNOWN:return sp.UNKNOWN;case Qm.DEADLINE_EXCEEDED:return sp.DEADLINE_EXCEEDED;case Qm.RESOURCE_EXHAUSTED:return sp.RESOURCE_EXHAUSTED;case Qm.INTERNAL:return sp.INTERNAL;case Qm.UNAVAILABLE:return sp.UNAVAILABLE;case Qm.UNAUTHENTICATED:return sp.UNAUTHENTICATED;case Qm.INVALID_ARGUMENT:return sp.INVALID_ARGUMENT;case Qm.NOT_FOUND:return sp.NOT_FOUND;case Qm.ALREADY_EXISTS:return sp.ALREADY_EXISTS;case Qm.PERMISSION_DENIED:return sp.PERMISSION_DENIED;case Qm.FAILED_PRECONDITION:return sp.FAILED_PRECONDITION;case Qm.ABORTED:return sp.ABORTED;case Qm.OUT_OF_RANGE:return sp.OUT_OF_RANGE;case Qm.UNIMPLEMENTED:return sp.UNIMPLEMENTED;case Qm.DATA_LOSS:return sp.DATA_LOSS;default:return ap()}}($m=Qm||(Qm={}))[$m.OK=0]="OK",$m[$m.CANCELLED=1]="CANCELLED",$m[$m.UNKNOWN=2]="UNKNOWN",$m[$m.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$m[$m.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$m[$m.NOT_FOUND=5]="NOT_FOUND",$m[$m.ALREADY_EXISTS=6]="ALREADY_EXISTS",$m[$m.PERMISSION_DENIED=7]="PERMISSION_DENIED",$m[$m.UNAUTHENTICATED=16]="UNAUTHENTICATED",$m[$m.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$m[$m.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$m[$m.ABORTED=10]="ABORTED",$m[$m.OUT_OF_RANGE=11]="OUT_OF_RANGE",$m[$m.UNIMPLEMENTED=12]="UNIMPLEMENTED",$m[$m.INTERNAL=13]="INTERNAL",$m[$m.UNAVAILABLE=14]="UNAVAILABLE",$m[$m.DATA_LOSS=15]="DATA_LOSS";var ty=function(){function e(t,n){ie(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return oe(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Cp(this.inner,(function(t,n){var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Np(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ny=new Cv(Qp.comparator);function ry(){return ny}var iy=new Cv(Qp.comparator);function ay(){for(var e=iy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function oy(){return new ty((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var uy=new Cv(Qp.comparator),sy=new Pv(Qp.comparator);function cy(){for(var e=sy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ly=new Pv(xp);function fy(){return ly}var hy=function(){function e(t,n,r,i,a){ie(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return oe(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,dy.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ep.min(),r,fy(),ry(),cy())}}]),e}(),dy=function(){function e(t,n,r,i,a){ie(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return oe(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Lp.EMPTY_BYTE_STRING,n,cy(),cy(),cy())}}]),e}(),py=oe((function e(t,n,r,i){ie(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),vy=oe((function e(t,n){ie(this,e),this.targetId=t,this.$=n})),my=oe((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ie(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),yy=function(){function e(){ie(this,e),this.B=0,this.L=by(),this.U=Lp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return oe(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=cy(),t=cy(),n=cy();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ap()}})),new dy(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=by()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),gy=function(){function e(t){ie(this,e),this.nt=t,this.st=new Map,this.it=ry(),this.rt=ky(),this.ot=new Pv(xp)}return oe(e,[{key:"ut",value:function(e){var t,n=ue(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=ue(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ap()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Vv(i))if(0===n){var a=new Qp(i.path);this.ct(t,a,gv.newNoDocument(a,Ep.min()))}else op(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Vv(a.target)){var o=new Qp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,gv.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=cy();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new hy(e,n,this.ot,this.it,r);return this.it=ry(),this.rt=ky(),this.ot=new Pv(xp),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new yy,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Pv(xp),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||tp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new yy),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function ky(){return new Cv(Qp.comparator)}function by(){return new Cv(Qp.comparator)}var wy={asc:"ASCENDING",desc:"DESCENDING"},xy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sy=oe((function e(t,n){ie(this,e),this.databaseId=t,this.N=n}));function _y(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Iy(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ey(e,t){return _y(e,t.toTimestamp())}function Ty(e){return op(!!e),Ep.fromTimestamp(function(e){var t=Fp(e);return new Ip(t.seconds,t.nanos)}(e))}function Cy(e,t){return function(e){return new Pp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ny(e){var t=Pp.fromString(e);return op(Jy(t)),t}function Ay(e,t){return Cy(e.databaseId,t.path)}function Py(e,t){var n=Ny(t);if(n.get(1)!==e.databaseId.projectId)throw new cp(sp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new cp(sp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Qp(Ly(n))}function Oy(e,t){return Cy(e.databaseId,t)}function Dy(e){var t=Ny(e);return 4===t.length?Pp.emptyPath():Ly(t)}function Ry(e){return new Pp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ly(e){return op(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function My(e,t,n){return{name:Ay(e,t),fields:n.value.mapValue.fields}}function Fy(e,t,n){var r=Py(e,t.name),i=Ty(t.updateTime),a=new mv({mapValue:{fields:t.fields}}),o=gv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vy(e,t){return"found"in t?function(e,t){op(!!t.found),t.found.name,t.found.updateTime;var n=Py(e,t.found.name),r=Ty(t.found.updateTime),i=new mv({mapValue:{fields:t.found.fields}});return gv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){op(!!t.missing),op(!!t.readTime);var n=Py(e,t.missing),r=Ty(t.readTime);return gv.newNoDocument(n,r)}(e,t):ap()}function Uy(e,t){var n;if(t instanceof qm)n={update:My(e,t.key,t.value)};else if(t instanceof Ym)n={delete:Ay(e,t.key)};else if(t instanceof Km)n={update:My(e,t.key,t.data),updateMask:Xy(t.fieldMask)};else{if(!(t instanceof Xm))return ap();n={verify:Ay(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Im)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Em)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Am)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ap()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ey(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ap()}(e,t.precondition)),n}function jy(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Lm.updateTime(Ty(e.updateTime)):void 0!==e.exists?Lm.exists(e.exists):Lm.none()}(t.currentDocument):Lm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)op("REQUEST_TIME"===t.setToServerValue),n=new Im;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Em(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Cm(i)}else"increment"in t?n=new Am(e,t.increment):ap();var a=Dp.fromServerFormat(t.fieldPath);return new Dm(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Py(e,t.update.name),a=new mv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Rp(t.map((function(e){return Dp.fromServerFormat(e)})))}(t.updateMask);return new Km(i,a,o,n,r)}return new qm(i,a,n,r)}if(t.delete){var u=Py(e,t.delete);return new Ym(u,n)}if(t.verify){var s=Py(e,t.verify);return new Xm(s,n)}return ap()}function By(e,t){return{documents:[Oy(e,t.path)]}}function zy(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Oy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Oy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(sv(e.value))return{unaryFilter:{field:Hy(e.field),op:"IS_NAN"}};if(uv(e.value))return{unaryFilter:{field:Hy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sv(e.value))return{unaryFilter:{field:Hy(e.field),op:"IS_NOT_NAN"}};if(uv(e.value))return{unaryFilter:{field:Hy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hy(e.field),op:Gy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Hy(e.field),direction:Wy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Wp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function qy(e){var t=Dy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){op(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Ky(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Jv(Qy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Wp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Xv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Xv(n,t)}(n.endAt)),rm(t,i,u,o,s,"F",c,l)}function Ky(e){return e?void 0!==e.unaryFilter?[Yy(e)]:void 0!==e.fieldFilter?[$y(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Ky(e)})).reduce((function(e,t){return e.concat(t)})):ap():[]}function Wy(e){return wy[e]}function Gy(e){return xy[e]}function Hy(e){return{fieldPath:e.canonicalString()}}function Qy(e){return Dp.fromServerFormat(e.fieldPath)}function $y(e){return zv.create(Qy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ap()}}(e.fieldFilter.op),e.fieldFilter.value)}function Yy(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Qy(e.unaryFilter.field);return zv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Qy(e.unaryFilter.field);return zv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qy(e.unaryFilter.field);return zv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qy(e.unaryFilter.field);return zv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ap()}}function Xy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Jy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Zy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=tg(t)),t=eg(e.get(n),t);return tg(t)}function eg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function tg(e){return e+"\x01\x01"}function ng(e){var t=e.length;if(op(t>=2),2===t)return op("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Pp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ap(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ap()}a=o+2}return new Pp(r)}var rg=["userId","batchId"];function ig(e,t){return[e,Zy(t)]}function ag(e,t,n){return[e,Zy(t),n]}var og={},ug=["prefixPath","collectionGroup","readTime","documentId"],sg=["prefixPath","collectionGroup","documentId"],cg=["collectionGroup","readTime","prefixPath","documentId"],lg=["canonicalId","targetId"],fg=["targetId","path"],hg=["path","targetId"],dg=["collectionId","parent"],pg=["indexId","uid"],vg=["uid","sequenceNumber"],mg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yg=["indexId","uid","orderedDocumentKey"],gg=["userId","collectionPath","documentId"],kg=["userId","collectionPath","largestBatchId"],bg=["userId","collectionGroup","largestBatchId"],wg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),xg=[].concat(Y(wg),["documentOverlays"]),Sg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_g=[].concat(Sg,["indexConfiguration","indexState","indexEntries"]),Ig="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Eg=function(){function e(){ie(this,e),this.onCommittedListeners=[]}return oe(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Tg=function(){function e(t){var n=this;ie(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return oe(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ap(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ue(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Cg=function(){function e(t,n){var r=this;ie(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new lp,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Pg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Mg(e.target.error);r.At.reject(new Pg(t,n))}}return oe(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(tp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Dg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Pg(n,t)}}}]),e}(),Ng=function(){function e(t,n,r){ie(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Ie())&&np("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return oe(e,[{key:"Nt",value:function(){var e=Qe(Ge().mark((function e(t){var n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return tp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Pg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new cp(sp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new cp(sp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Pg(t,n))},i.onupgradeneeded=function(e){tp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){tp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Qe(Ge().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ge().mark((function e(){var n,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Cg.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Tg.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,tp("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return tp("SimpleDb","Removing database:",e),Rg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Pe())return!1;if(e.St())return!0;var t=Ie(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/simple_messenger",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ag=function(){function e(t){ie(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return oe(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Rg(this.Ft.delete())}}]),e}(),Pg=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,sp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return oe(n)}(cp);function Og(e){return"IndexedDbTransactionError"===e.name}var Dg=function(){function e(t){ie(this,e),this.store=t}return oe(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(tp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(tp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Rg(n)}},{key:"add",value:function(e){return tp("SimpleDb","ADD",this.store.name,e,e),Rg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Rg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),tp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return tp("SimpleDb","DELETE",this.store.name,e),Rg(this.store.delete(e))}},{key:"count",value:function(){return tp("SimpleDb","COUNT",this.store.name),Rg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Tg((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Tg((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){tp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Tg((function(n,r){t.onerror=function(e){var t=Mg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Tg((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ag(i),o=t(i.primaryKey,i.value,a);if(o instanceof Tg){var u=o.catch((function(e){return a.done(),Tg.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Tg.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Rg(e){return new Tg((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Mg(e.target.error);n(t)}}))}var Lg=!1;function Mg(e){var t=Ng.Vt(Ie());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new cp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Lg||(Lg=!0,setTimeout((function(){throw r}),0)),r}}return e}var Fg=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return oe(n)}(Eg);function Vg(e,t){var n=up(e);return Ng.xt(n.Ht,t)}var Ug=function(){function e(t,n,r,i){ie(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return oe(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ue(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Um(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=ue(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Um(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ep.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),cy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Sp(this.mutations,e.mutations,(function(e,t){return Bm(e,t)}))&&Sp(this.baseMutations,e.baseMutations,(function(e,t){return Bm(e,t)}))}}]),e}(),jg=function(){function e(t,n,r,i){ie(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return oe(e,null,[{key:"from",value:function(t,n,r){op(t.mutations.length===r.length);for(var i=uy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Bg=function(){function e(t,n){ie(this,e),this.largestBatchId=t,this.mutation=n}return oe(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),zg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ep.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ep.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Lp.EMPTY_BYTE_STRING;ie(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return oe(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),qg=oe((function e(t){ie(this,e),this.Jt=t}));function Kg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ay(e,t.key),fields:t.data.value.mapValue.fields,updateTime:_y(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gg(t.version)};else{if(!t.isUnknownDocument())return ap();r.unknownDocument={path:n.path.toArray(),version:Gg(t.version)}}return r}function Wg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Gg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Hg(e){var t=new Ip(e.seconds,e.nanoseconds);return Ep.fromTimestamp(t)}function Qg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return jy(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return jy(e.Jt,t)})),u=Ip.fromMillis(t.localWriteTimeMs);return new Ug(t.batchId,u,n,o)}function $g(e){var t,n,r=Hg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Hg(e.lastLimboFreeSnapshotVersion):Ep.min();return void 0!==e.query.documents?(op(1===(n=e.query).documents.length),t=cm(im(Dy(n.documents[0])))):t=function(e){return cm(qy(e))}(e.query),new zg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Lp.fromBase64String(e.resumeToken))}function Yg(e,t){var n,r=Gg(t.snapshotVersion),i=Gg(t.lastLimboFreeSnapshotVersion);n=Vv(t.target)?By(e.Jt,t.target):zy(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Xg(e){var t=qy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lm(t,t.limit,"L"):t}function Jg(e,t){return new Bg(t.largestBatchId,jy(e.Jt,t.overlayMutation))}function Zg(e,t){var n=t.path.lastSegment();return[e,Zy(t.path.popLast()),n]}var ek=function(){function e(){ie(this,e)}return oe(e,[{key:"getBundleMetadata",value:function(e,t){return tk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Hg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return tk(e).put({bundleId:(n=t).id,createTime:Gg(Ty(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return nk(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Xg(t.bundledQuery),readTime:Hg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return nk(e).put(function(e){return{name:e.name,readTime:Gg(Ty(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function tk(e){return Vg(e,"bundles")}function nk(e){return Vg(e,"namedQueries")}var rk=function(){function e(t,n){ie(this,e),this.M=t,this.userId=n}return oe(e,[{key:"getOverlay",value:function(e,t){var n=this;return ik(e).get(Zg(this.userId,t)).next((function(e){return e?Jg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Bg(t,a);i.push(r.Xt(e,o))})),Tg.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Zy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ik(e).Qt("collectionPathOverlayIndex",i))})),Tg.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=oy(),a=Zy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ik(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=ue(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Jg(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=oy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ik(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Jg(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return ik(e).put(function(e,t,n){var r=c(Zg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Uy(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ik(e){return Vg(e,"documentOverlays")}var ak=function(){function e(){ie(this,e)}return oe(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vp(e.integerValue));else if("doubleValue"in e){var n=Vp(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Gp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Up(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?fv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ap()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Qp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function ok(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function uk(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=ok(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ak.fe=new ak;var sk=function(){function e(){ie(this,e),this.buffer=new Uint8Array(1024),this.position=0}return oe(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=ue(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=ue(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=uk(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=uk(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ck=function(){function e(t){ie(this,e),this.De=t}return oe(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),lk=function(){function e(t){ie(this,e),this.De=t}return oe(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),fk=function(){function e(){ie(this,e),this.De=new sk,this.Ce=new ck(this.De),this.xe=new lk(this.De)}return oe(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),hk=function(){function e(t,n,r,i){ie(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return oe(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function dk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=pk(e.arrayValue,t.arrayValue))?n:0!==(n=pk(e.directionalValue,t.directionalValue))?n:Qp.comparator(e.documentKey,t.documentKey)}function pk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var vk=function(){function e(t){ie(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=ue(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return oe(e,[{key:"$e",value:function(e){var t=bv(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=wv(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=ue(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),mk=function(){function e(){ie(this,e),this.qe=new yk}return oe(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Tg.resolve()}},{key:"getCollectionParents",value:function(e,t){return Tg.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Tg.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Tg.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Tg.resolve(null)}},{key:"getIndexType",value:function(e,t){return Tg.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Tg.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Tg.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Tg.resolve(Ev.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Tg.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Tg.resolve()}}]),e}(),yk=function(){function e(){ie(this,e),this.index={}}return oe(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pv(Pp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Pv(Pp.comparator)).toArray()}}]),e}(),gk=new Uint8Array(0),kk=function(){function e(t,n){ie(this,e),this.user=t,this.databaseId=n,this.Ke=new yk,this.Ge=new ty((function(e){return Mv(e)}),(function(e,t){return Fv(e,t)})),this.uid=t.uid||""}return oe(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Zy(i)};return bk(e).put(a)}return Tg.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[_p(t),""],!1,!0);return bk(e).qt(r).next((function(e){var r,i=ue(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ng(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=xk(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=xk(e),r=Sk(e),i=wk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=wk(e),i=!0,a=new Map;return Tg.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=cy(),o=[];return Tg.forEach(a,(function(i,a){var u;tp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Mv(t)));var s=function(e,t){var n=bv(t);if(void 0===n)return null;var r,i=ue(Uv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ue(wv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ue(Uv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ue(wv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?jv(e,o.fieldPath,e.startAt):Bv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Xv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ue(wv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Bv(e,o.fieldPath,e.endAt):jv(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Xv(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Tg.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Qp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Tg.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):gk,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,Y(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new hk(e,Qp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new hk(e,Qp.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new vk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ue(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Tg.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Pv(Dp.comparator),r=!1,i=ue(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=ue(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new fk,i=ue(wv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ak.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new fk;return ak.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new fk;return ak.fe.Zt(iv(this.databaseId,t),n.Ne(function(e){var t=wv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new fk);var i,a=0,o=ue(wv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ue(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&ov(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);ak.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Y(e),a=[],o=ue(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ue(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new fk;f.seed(l.Se()),ak.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof zv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=xk(e),i=Sk(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Tg.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Sv(t.sequenceNumber,new Ev(Hg(t.readTime),new Qp(ng(t.documentKey)),t.largestBatchId)):Sv.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new xv(Dp.fromServerFormat(n),r)}));return new kv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=xk(e),a=Sk(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Tg.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Gg(r.readTime),documentKey:Zy(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Tg.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Tg.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Tg.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Tg.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return wk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return wk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=wk(e),i=new Pv(dk);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new hk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Pv(dk),r=this.Ze(t,e);if(null==r)return n;var i=bv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ov(a)){var o,u=ue(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new hk(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new hk(t.indexId,e.key,gk,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;tp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Dv(a),s=Dv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Dv(o)):l?(i(u),u=Dv(a)):(u=Dv(a),s=Dv(o))}}(r,i,dk,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Tg.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Sk(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return dk(e,t)})).filter((function(e,t,n){return!t||0!==dk(e,n[t-1])}));var r=[];r.push(e);var i,a=ue(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=dk(o,e),s=dk(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,gk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,gk,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Tg.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Tv(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Ev.min()}))})).next((function(){return n}))}}]),e}();function bk(e){return Vg(e,"collectionParents")}function wk(e){return Vg(e,"indexEntries")}function xk(e){return Vg(e,"indexConfiguration")}function Sk(e){return Vg(e,"indexState")}var _k={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ik=function(){function e(t,n,r){ie(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return oe(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ek(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){op(1===u)})));var c,l=[],f=ue(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ag(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Tg.waitFor(a).next((function(){return l}))}function Tk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ap();t=e.noDocument}return JSON.stringify(t).length}Ik.DEFAULT_COLLECTION_PERCENTILE=10,Ik.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ik.DEFAULT=new Ik(41943040,Ik.DEFAULT_COLLECTION_PERCENTILE,Ik.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ik.DISABLED=new Ik(-1,0,0);var Ck=function(){function e(t,n,r,i){ie(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return oe(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ak(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Pk(e),o=Ak(e);return o.add({}).next((function(u){op("number"==typeof u);var s,c=new Ug(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Uy(e.Jt,t)})),i=n.mutations.map((function(t){return Uy(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Pv((function(e,t){return xp(e.canonicalString(),t.canonicalString())})),d=ue(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ag(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,og))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Tg.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Ak(e).get(t).next((function(e){return e?(op(e.userId===n.userId),Qg(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Tg.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ak(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(op(t.batchId>=r),a=Qg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ak(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ak(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Qg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ig(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Pk(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=ng(l);if(s===n.userId&&t.path.isEqual(h))return Ak(e).get(f).next((function(e){if(!e)throw ap();op(e.userId===n.userId),a.push(Qg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pv(xp),i=[];return t.forEach((function(t){var a=ig(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Pk(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=ng(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Tg.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ig(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Pv(xp);return Pk(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=ng(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ak(e).get(t).next((function(e){if(null===e)throw ap();op(e.userId===n.userId),r.push(Qg(n.M,e))})))})),Tg.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ek(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Tg.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Tg.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Pk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ng(e[1]);i.push(a)}else r.done()})).next((function(){op(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Nk(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Ok(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return op(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Nk(e,t,n){var r=ig(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Pk(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ak(e){return Vg(e,"mutations")}function Pk(e){return Vg(e,"documentMutations")}function Ok(e){return Vg(e,"mutationQueues")}var Dk=function(){function e(t){ie(this,e),this.mn=t}return oe(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Rk=function(){function e(t,n){ie(this,e),this.referenceDelegate=t,this.M=n}return oe(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Dk(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Ep.fromTimestamp(new Ip(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Lk(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return op(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Lk(e).Wt((function(o,u){var s=$g(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Tg.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Lk(e).Wt((function(e,n){var r=$g(n);t(r)}))}},{key:"pn",value:function(e){return Mk(e).get("targetGlobalKey").next((function(e){return op(null!==e),e}))}},{key:"In",value:function(e,t){return Mk(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Lk(e).put(Yg(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Lk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=$g(n);Fv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Fk(e);return t.forEach((function(t){var o=Zy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Tg.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Fk(e);return Tg.forEach(t,(function(t){var a=Zy(t.path);return Tg.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Fk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fk(e),i=cy();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=ng(e[1]),a=new Qp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Zy(t.path),r=IDBKeyRange.bound([n],[_p(n)],!1,!0),i=0;return Fk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Lk(e).get(t).next((function(e){return e?$g(e):null}))}}]),e}();function Lk(e){return Vg(e,"targets")}function Mk(e){return Vg(e,"targetGlobal")}function Fk(e){return Vg(e,"targetDocuments")}function Vk(e){return Uk.apply(this,arguments)}function Uk(){return Uk=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===sp.FAILED_PRECONDITION&&t.message===Ig){e.next=2;break}throw t;case 2:tp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}function jk(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=xp(r,o);return 0===s?xp(i,u):s}var Bk=function(){function e(t){ie(this,e),this.An=t,this.buffer=new Pv(jk),this.Rn=0}return oe(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();jk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),zk=function(){function e(t,n){ie(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return oe(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;tp("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Og(n.t0)){n.next=12;break}tp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Vk(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),qk=function(){function e(t,n){ie(this,e),this.Dn=t,this.params=n}return oe(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Tg.resolve(kp.A);var r=new Bk(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(tp("LruGarbageCollector","Garbage collection skipped; disabled"),Tg.resolve(_k)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(tp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),_k):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(tp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ep()<=Ze.DEBUG&&tp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Tg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Kk=function(){function e(t,n){ie(this,e),this.db=t,this.garbageCollector=function(e,t){return new qk(e,t)}(this,n)}return oe(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Wk(e,n)}},{key:"removeReference",value:function(e,t,n){return Wk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Wk(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Ok(e).zt((function(r){return Nk(e,r,t).next((function(e){return e&&(n=!0),Tg.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ep.min()),Fk(e).delete([0,Zy(o.path)])}))}));i.push(s)}})).next((function(){return Tg.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Wk(e,t)}},{key:"Mn",value:function(e,t){var n,r=Fk(e),i=kp.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==kp.A&&t(new Qp(ng(n)),i),i=s,n=u):i=kp.A})).next((function(){i!==kp.A&&t(new Qp(ng(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Wk(e,t){return Fk(e).put(function(e,t){return{targetId:0,path:Zy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Gk=function(){function e(){ie(this,e),this.changes=new ty((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return oe(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,gv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Tg.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Hk=function(){function e(t){ie(this,e),this.M=t}return oe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Yk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Yk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Wg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=gv.newInvalidDocument(t);return Yk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xk(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:gv.newInvalidDocument(t)};return Yk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xk(t))},(function(e,i){r={document:n.$n(t,i),size:Tk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ry();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=ry(),i=new Cv(Qp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Tk(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Tg.resolve();var r=new Pv(Zk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Xk(r.first()),Xk(r.last())),a=r.getIterator(),o=a.getNext();return Yk(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Qp.fromSegments([].concat(Y(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Zk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Xk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Wg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yk(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=ry(),i=ue(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Qp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ry(),o=Jk(t,n),u=Jk(t,Ev.max());return Yk(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Qp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Qk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $k(e).get("remoteDocumentGlobalKey").next((function(e){return op(!!e),e}))}},{key:"Fn",value:function(e,t){return $k(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Fy(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Qp.fromSegments(t.noDocument.path),i=Hg(t.noDocument.readTime);n=gv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ap();var a=Qp.fromSegments(t.unknownDocument.path),o=Hg(t.unknownDocument.version);n=gv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ip(e[0],e[1]);return Ep.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ep.min()))return n}return gv.newInvalidDocument(e)}}]),e}(),Qk=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new ty((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return oe(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Pv((function(e,t){return xp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Kg(t.Kn.M,o);i=i.add(a.path.popLast());var c=Tk(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Kg(t.Kn.M,o.convertToNoDocument(Ep.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Tg.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Gk);function $k(e){return Vg(e,"remoteDocumentGlobal")}function Yk(e){return Vg(e,"remoteDocumentsV14")}function Xk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Jk(e,t){var n=t.documentKey.path.toArray();return[e,Wg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=xp(n[a],r[a]))return i;return(i=xp(n.length,r.length))||((i=xp(n[n.length-2],r[r.length-2]))||xp(n[n.length-1],r[r.length-1]))}var eb=function(){function e(t){ie(this,e),this.M=t}return oe(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Cg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rg,{unique:!0}),e.createObjectStore("documentMutations")}(e),tb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Tg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ep.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rg,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Tg.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:gg});t.createIndex("collectionPathOverlayIndex",kg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",bg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ug});t.createIndex("documentKeyIndex",sg),t.createIndex("collectionGroupIndex",cg)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pg}).createIndex("sequenceNumberIndex",vg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:mg}).createIndex("documentKeyIndex",yg,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Tk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Tg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Tg.forEach(r,(function(r){op(r.userId===n.userId);var i=Qg(t.M,r);return Ek(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Pp(n),o=function(e){return[0,Zy(e)]}(a);r.push(t.get(o).next((function(n){return n?Tg.resolve():function(n){return t.put({targetId:0,path:Zy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Tg.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:dg});var n=t.store("collectionParents"),r=new yk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Zy(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Pp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],ng(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=$g(r),a=Yg(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Qp(Pp.fromString(i.document.name).popFirst(5)):i.noDocument?Qp.fromSegments(i.noDocument.path):i.unknownDocument?Qp.fromSegments(i.unknownDocument.path):ap()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Tg.waitFor(r)}))}}]),e}();function tb(e){e.createObjectStore("targetDocuments",{keyPath:fg}).createIndex("documentTargetsIndex",hg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lg,{unique:!0}),e.createObjectStore("targetGlobal")}var nb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rb=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(ie(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new cp(sp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kk(this,i),this.hs=n+"main",this.M=new qg(s),this.ls=new Ng(this.hs,this.ts,new eb(this.M)),this.fs=new Rk(this.referenceDelegate,this.M),this.ds=function(e){return new Hk(e)}(this.M),this._s=new ek,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&np("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return oe(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new cp(sp.FAILED_PRECONDITION,nb);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new kp(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Qe(Ge().mark((function n(r){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Qe(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ab(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Og(t))return tp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return tp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return ib(e).get("owner").next((function(e){return Tg.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return ab(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i,a=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Vg(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Tg.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=ue(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Tg.resolve(!0):ib(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new cp(sp.FAILED_PRECONDITION,nb);return!1}}return!(!t.networkEnabled||!t.inForeground)||ab(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&tp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Qe(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Fg(e,kp.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ab(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Ck.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new kk(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return rk.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;tp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?_g:13===i?Sg:12===i?xg:11===i?wg:void ap();return this.ls.runTransaction(e,o,u,(function(i){return a=new Fg(i,r.es?r.es.next():kp.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw np("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new cp(sp.FAILED_PRECONDITION,Ig);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return ib(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new cp(sp.FAILED_PRECONDITION,nb)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ib(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=ib(e);return n.get("owner").next((function(e){return t.Ps(e)?(tp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Tg.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(np("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return tp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return np("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Xc){np("Failed to set zombie client id.",Xc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Xc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Ng.vt()}}]),e}();function ib(e){return Vg(e,"owner")}function ab(e){return Vg(e,"clientMetadata")}function ob(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ub=function(){function e(t,n,r){ie(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return oe(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=ue(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=ue(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Qp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):um(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Qp(t)).next((function(e){var t=ay();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ay();return this.indexManager.getCollectionParents(e,i).next((function(o){return Tg.forEach(o,(function(o){var u=function(e,t){return new nm(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=ue(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=ue(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=gv.newInvalidDocument(s),r=r.insert(s,c)),Um(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){pm(t,n)||(r=r.remove(e))})),r}))}}]),e}(),sb=function(){function e(t,n,r,i){ie(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return oe(e,null,[{key:"Ys",value:function(t,n){var r,i=cy(),a=cy(),o=ue(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),cb=function(){function e(){ie(this,e),this.Xs=!1}return oe(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Tg.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Ep.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(ep()<=Ze.DEBUG&&tp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dm(t)),i.ri(e,o,t,_v(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Pv(mm(e));return t.forEach((function(t,r){pm(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return ep()<=Ze.DEBUG&&tp("QueryEngine","Using full collection scan to execute query:",dm(t)),this.Zs.Qs(e,t,Ev.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),lb=function(){function e(t,n,r,i){ie(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Cv(xp),this.ai=new ty((function(e){return Mv(e)}),Fv),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return oe(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new ub(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function fb(e,t,n,r){return new lb(e,t,n,r)}function hb(e,t){return db.apply(this,arguments)}function db(){return db=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=cy(),s=ue(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ue(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ue(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ue(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t){var n=up(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Tg.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);op(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function vb(e){var t=up(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function mb(e,t){var n=up(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Lp.EMPTY_BYTE_STRING,Ep.min()).withLastLimboFreeSnapshotVersion(Ep.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=ry();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(yb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ep.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Tg.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function yb(e,t,n){var r=cy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ry();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ep.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):tp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function gb(e,t){var n=up(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function kb(e,t){var n=up(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Tg.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new zg(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function bb(e,t,n){return wb.apply(this,arguments)}function wb(){return wb=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=up(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Og(e.t1)){e.next=12;break}throw e.t1;case 12:tp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),wb.apply(this,arguments)}function xb(e,t,n){var r=up(e),i=Ep.min(),a=cy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=up(e),i=r.ai.get(n);return void 0!==i?Tg.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,cm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Ep.min(),n?a:cy())})).next((function(e){return Ib(r,vm(t),e),{documents:e,_i:a}}))}))}function Sb(e,t){var n=up(e),r=up(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function _b(e,t){var n=up(e),r=n.ci.get(t)||Ep.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,_v(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Ib(n,t,e),e}))}function Ib(e,t,n){var r=Ep.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Eb(e,t,n,r){return Tb.apply(this,arguments)}function Tb(){return Tb=Qe(Ge().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=up(t),o=cy(),u=ry(),s=ue(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,kb(a,function(e){return cm(im(Pp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return yb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Cb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=Qe(Ge().mark((function e(t,n){var r,i,a,o=arguments;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:cy(),e.next=3,kb(t,cm(Xg(n.bundledQuery)));case 3:return i=e.sent,a=up(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ty(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Lp.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}var Ab=function(){function e(t){ie(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return oe(e,[{key:"getBundleMetadata",value:function(e,t){return Tg.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Ty(n.createTime)}),Tg.resolve()}},{key:"getNamedQuery",value:function(e,t){return Tg.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:Xg(e.bundledQuery),readTime:Ty(e.readTime)}}(t)),Tg.resolve()}}]),e}(),Pb=function(){function e(){ie(this,e),this.overlays=new Cv(Qp.comparator),this.Ii=new Map}return oe(e,[{key:"getOverlay",value:function(e,t){return Tg.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Tg.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Tg.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=oy(),i=t.length+1,a=new Qp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Tg.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Cv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=oy(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=oy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Tg.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bg(t,n));var a=this.Ii.get(t);void 0===a&&(a=cy(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Ob=function(){function e(){ie(this,e),this.Ti=new Pv(Db.Ei),this.Ai=new Pv(Db.Ri)}return oe(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Db(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Db(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new Qp(new Pp([])),r=new Db(n,e),i=new Db(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new Qp(new Pp([])),n=new Db(t,e),r=new Db(t,e+1),i=cy();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Db(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Db=function(){function e(t,n){ie(this,e),this.key=t,this.Ci=n}return oe(e,null,[{key:"Ei",value:function(e,t){return Qp.comparator(e.key,t.key)||xp(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return xp(e.Ci,t.Ci)||Qp.comparator(e.key,t.key)}}]),e}(),Rb=function(){function e(t,n){ie(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Pv(Db.Ei)}return oe(e,[{key:"checkEmpty",value:function(e){return Tg.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Ug(i,t,n,r);this.Bs.push(a);var o,u=ue(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new Db(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Tg.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Tg.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Tg.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Tg.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Tg.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Db(t,0),i=new Db(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Tg.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pv(xp);return t.forEach((function(e){var t=new Db(e,0),i=new Db(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Tg.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Qp.isDocumentKey(i)||(i=i.child(""));var a=new Db(new Qp(i),0),o=new Pv(xp);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Tg.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;op(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Tg.forEach(t.mutations,(function(i){var a=new Db(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Db(t,0),r=this.Ni.firstAfterOrEqual(n);return Tg.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Tg.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Lb=function(){function e(t){ie(this,e),this.$i=t,this.docs=new Cv(Qp.comparator),this.size=0}return oe(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Tg.resolve(n?n.document.mutableCopy():gv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ry();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():gv.newInvalidDocument(e))})),Tg.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ry(),i=new Qp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Tv(Iv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Tg.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ap()}},{key:"Bi",value:function(e,t){return Tg.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Mb(this)}},{key:"getSize",value:function(e){return Tg.resolve(this.size)}}]),e}(),Mb=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).Kn=e,r}return oe(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Tg.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Gk),Fb=function(){function e(t){ie(this,e),this.persistence=t,this.Li=new ty((function(e){return Mv(e)}),Fv),this.lastRemoteSnapshotVersion=Ep.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Ob,this.targetCount=0,this.Ki=Dk.gn()}return oe(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Tg.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Tg.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Tg.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Tg.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Tg.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Dk(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Tg.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Tg.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Tg.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Tg.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Tg.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Tg.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Tg.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Tg.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Tg.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Tg.resolve(n)}},{key:"containsKey",value:function(e,t){return Tg.resolve(this.qi.containsKey(t))}}]),e}(),Vb=function(){function e(t,n){var r=this;ie(this,e),this.Gi={},this.overlays={},this.es=new kp(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Fb(this),this.indexManager=new mk,this.ds=new Lb((function(e){return r.referenceDelegate.Qi(e)})),this.M=new qg(n),this._s=new Ab(this.M)}return oe(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Pb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Rb(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;tp("MemoryPersistence","Starting transaction:",e);var i=new Ub(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Tg.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Ub=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return oe(n)}(Eg),jb=function(){function e(t){ie(this,e),this.persistence=t,this.Hi=new Ob,this.Ji=null}return oe(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw ap()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Tg.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Tg.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Tg.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tg.forEach(this.Xi,(function(r){var i=Qp.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Ep.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Tg.or([function(){return Tg.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Bb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function zb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function qb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Kb=function(){function e(t,n,r,i){ie(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return oe(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new cp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(np("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Wb=function(){function e(t,n,r){ie(this,e),this.targetId=t,this.state=n,this.error=r}return oe(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new cp(i.error.code,i.error.message))),a?new e(t,i.state,r):(np("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gb=function(){function e(t,n){ie(this,e),this.clientId=t,this.activeTargetIds=n}return oe(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=fy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Hp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(np("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Hb=function(){function e(t,n){ie(this,e),this.clientId=t,this.onlineState=n}return oe(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(np("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Qb=function(){function e(){ie(this,e),this.activeTargetIds=fy()}return oe(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),$b=function(){function e(t,n,r,i,a){ie(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Cv(xp),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Bb(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new Qb),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return oe(e,[{key:"start",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=ue(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Bb(this.persistenceKey,i)))&&(o=Gb.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=ue(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(qb(this.persistenceKey,e));if(n){var r=Wb.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(qb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return tp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){tp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){tp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(tp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void np("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Qe(Ge().mark((function e(){var r,i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=kp.A;if(null!=e)try{var n=JSON.parse(e);op("number"==typeof n),t=n}catch(e){np("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==kp.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Kb(this.currentUser,e,t,n),i=zb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=zb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=qb(this.persistenceKey,e),i=new Wb(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return Gb.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kb.tr(new Xd(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Wb.tr(r,t)}},{key:"pr",value:function(e){return Hb.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:tp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=fy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Yb=function(){function e(){ie(this,e),this.Ur=new Qb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return oe(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new Qb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Xb=function(){function e(){ie(this,e)}return oe(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Jb=function(){function e(){var t=this;ie(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return oe(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){tp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ue(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){tp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ue(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Zb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ew=function(){function e(t){ie(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return oe(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),tw=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return oe(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new $d;o.listenOnce(Kd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case qd.NO_ERROR:var t=o.getResponseJson();tp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case qd.TIMEOUT:tp("Connection",'RPC "'+e+'" timed out'),a(new cp(sp.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:var n=o.getStatus();if(tp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(sp).indexOf(t)>=0?t:sp.UNKNOWN}(r.status);a(new cp(u,r.message))}else a(new cp(sp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new cp(sp.UNAVAILABLE,"Connection failed."));break;default:ap()}}finally{tp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bd(),a=zd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Hd({})),this.lo(o.initMessageHeaders,t,n),Ee()||Ne()||Ie().indexOf("Electron/")>=0||Ae()||Ie().indexOf("MSAppHost/")>=0||Ce()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");tp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new ew({Jr:function(e){l?tp("Connection","Not sending because WebChannel is closed:",e):(c||(tp("Connection","Opening WebChannel transport."),s.open(),c=!0),tp("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Qd.EventType.OPEN,(function(){l||tp("Connection","WebChannel transport opened.")})),h(s,Qd.EventType.CLOSE,(function(){l||(l=!0,tp("Connection","WebChannel transport closed"),f.ro())})),h(s,Qd.EventType.ERROR,(function(e){l||(l=!0,rp("Connection","WebChannel transport errored:",e),f.ro(new cp(sp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Qd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];op(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){tp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Qm[e];if(void 0!==t)return ey(t)}(a),u=i.message;void 0===o&&(o=sp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new cp(o,u)),s.close()}else tp("Connection","WebChannel received:",n),f.oo(n)}})),h(a,Wd.STAT_EVENT,(function(e){e.stat===Gd.PROXY?tp("Connection","Detected buffering proxy"):e.stat===Gd.NOPROXY&&tp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){ie(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return oe(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);tp("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return tp("RestConnection","Received: ",e),e}),(function(t){throw rp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Zb[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function nw(){return"undefined"!=typeof window?window:null}function rw(){return"undefined"!=typeof document?document:null}function iw(e){return new Sy(e,!0)}var aw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ie(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return oe(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&tp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),ow=function(){function e(t,n,r,i,a,o,u,s){ie(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new aw(t,n)}return oe(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===sp.RESOURCE_EXHAUSTED?(np(n.toString()),np("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===sp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new cp(sp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return tp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(tp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),uw=function(e){le(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return oe(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ap()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(op(void 0===t||"string"==typeof t),Lp.fromBase64String(t||"")):(op(void 0===t||t instanceof Uint8Array),Lp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?sp.UNKNOWN:ey(e.code);return new cp(t,e.message||"")}(o);n=new my(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Py(e,s.document.name),l=Ty(s.document.updateTime),f=new mv({mapValue:{fields:s.document.fields}}),h=gv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new py(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Py(e,v.document),y=v.readTime?Ty(v.readTime):Ep.min(),g=gv.newNoDocument(m,y),k=v.removedTargetIds||[];n=new py([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Py(e,b.document),x=b.removedTargetIds||[];n=new py([],x,w,null)}else{if(!("filter"in t))return ap();t.filter;var S=t.filter;S.targetId;var _=S.count||0,I=new Jm(_),E=S.targetId;n=new vy(E,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ep.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ep.min():t.readTime?Ty(t.readTime):Ep.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Ry(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Vv(r)?{documents:By(e,r)}:{query:zy(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Iy(e,t.resumeToken):t.snapshotVersion.compareTo(Ep.min())>0&&(n.readTime=_y(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ap()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Ry(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(ow),sw=function(e){le(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return oe(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,wn(fe(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(op(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(op(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ty(e.updateTime):Ty(t);return n.isEqual(Ep.min())&&(n=Ty(t)),new Rm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ty(e.commitTime);return this.listener.tu(n,t)}return op(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Ry(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Uy(t.M,e)}))};this.Lo(n)}}]),n}(ow),cw=function(e){le(n,e);var t=ve(n);function n(e,r,i,a){var o;return ie(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return oe(n,[{key:"iu",value:function(){if(this.su)throw new cp(sp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new cp(sp.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===sp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new cp(sp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return oe((function e(){ie(this,e)}))}()),lw=function(){function e(t,n){ie(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return oe(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(np(t),this.uu=!1):tp("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),fw=oe((function e(t,n,r,i,a){var o=this;ie(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xw(o),!e.t0){e.next=5;break}return tp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=up(t)).wu.add(4),e.next=4,pw(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,hw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new lw(r,i)}));function hw(e){return dw.apply(this,arguments)}function dw(){return dw=Qe(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xw(t)){e.next=18;break}n=ue(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),dw.apply(this,arguments)}function pw(e){return vw.apply(this,arguments)}function vw(){return vw=Qe(Ge().mark((function e(t){var n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ue(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),vw.apply(this,arguments)}function mw(e,t){var n=up(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),ww(n)?bw(n):Xw(n).Mo()&&gw(n,t))}function yw(e,t){var n=up(e),r=Xw(n);n._u.delete(t),r.Mo()&&kw(n,t),0===n._u.size&&(r.Mo()?r.$o():xw(n)&&n.yu.set("Unknown"))}function gw(e,t){e.pu.Z(t.targetId),Xw(e).Ho(t)}function kw(e,t){e.pu.Z(t),Xw(e).Jo(t)}function bw(e){e.pu=new gy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),Xw(e).start(),e.yu.au()}function ww(e){return xw(e)&&!Xw(e).ko()&&e._u.size>0}function xw(e){return 0===up(e).wu.size}function Sw(e){e.pu=void 0}function _w(e){return Iw.apply(this,arguments)}function Iw(){return Iw=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){gw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function Ew(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sw(t),ww(t)?(t.yu.lu(n),bw(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Cw(e,t,n){return Nw.apply(this,arguments)}function Nw(){return Nw=Qe(Ge().mark((function e(t,n,r){var i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof my&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ue(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),tp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Aw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof py?t.pu.ut(n):n instanceof vy?t.pu._t(n):t.pu.ht(n),r.isEqual(Ep.min())){e.next=29;break}return e.prev=14,e.next=17,vb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Lp.EMPTY_BYTE_STRING,n.snapshotVersion)),kw(e,t);var r=new zg(n.target,t,1,n.sequenceNumber);gw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),tp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Aw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Nw.apply(this,arguments)}function Aw(e,t,n){return Pw.apply(this,arguments)}function Pw(){return Pw=Qe(Ge().mark((function e(t,n,r){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Og(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,pw(t);case 5:t.yu.set("Offline"),r||(r=function(){return vb(t.localStore)}),t.asyncQueue.enqueueRetryable(Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,hw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Ow(e,t){return t().catch((function(n){return Aw(e,n,t)}))}function Dw(e){return Rw.apply(this,arguments)}function Rw(){return Rw=Qe(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=up(t),r=Jw(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Lw(n)){e.next=19;break}return e.prev=3,e.next=6,gb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Mw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Aw(n,e.t0);case 17:e.next=2;break;case 19:Fw(n)&&Vw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Rw.apply(this,arguments)}function Lw(e){return xw(e)&&e.du.length<10}function Mw(e,t){e.du.push(t);var n=Jw(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Fw(e){return xw(e)&&!Jw(e).ko()&&e.du.length>0}function Vw(e){Jw(e).start()}function Uw(e){return jw.apply(this,arguments)}function jw(){return jw=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jw(t).nu();case 1:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Bw(e){return zw.apply(this,arguments)}function zw(){return zw=Qe(Ge().mark((function e(t){var n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jw(t),r=ue(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function qw(e,t,n){return Kw.apply(this,arguments)}function Kw(){return Kw=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=jg.from(i,n,r),e.next=3,Ow(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Dw(t);case 5:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Ww(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=Qe(Ge().mark((function e(t,n){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zm(i=n.code)||i===sp.ABORTED){e.next=7;break}return r=t.du.shift(),Jw(t).Fo(),e.next=5,Ow(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Dw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fw(t)&&Vw(t);case 5:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}function Hw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=up(t)).asyncQueue.verifyOperationInProgress(),tp("RemoteStore","RemoteStore received new credentials"),i=xw(r),r.wu.add(3),e.next=6,pw(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,hw(r);case 12:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function $w(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=up(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,hw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,pw(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Xw(e){return e.Iu||(e.Iu=function(e,t,n){var r=up(e);return r.iu(),new uw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:_w.bind(null,e),eo:Ew.bind(null,e),zo:Cw.bind(null,e)}),e.mu.push(function(){var t=Qe(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),ww(e)?bw(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Sw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function Jw(e){return e.Tu||(e.Tu=function(e,t,n){var r=up(e);return r.iu(),new sw(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Uw.bind(null,e),eo:Ww.bind(null,e),eu:Bw.bind(null,e),tu:qw.bind(null,e)}),e.mu.push(function(){var t=Qe(Ge().mark((function t(n){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Dw(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(tp("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var Zw=function(){function e(t,n,r,i,a){ie(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return oe(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new cp(sp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ex(e,t){if(np("AsyncQueue","".concat(t,": ").concat(e)),Og(e))return new cp(sp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tx=function(){function e(t){ie(this,e),this.comparator=t?function(e,n){return t(e,n)||Qp.comparator(e.key,n.key)}:function(e,t){return Qp.comparator(e.key,t.key)},this.keyedMap=ay(),this.sortedSet=new Cv(this.comparator)}return oe(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),nx=function(){function e(){ie(this,e),this.Eu=new Cv(Qp.comparator)}return oe(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ap():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rx=function(){function e(t,n,r,i,a,o,u,s){ie(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return oe(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,tx.emptySet(n),a,r,i,!0,!1)}}]),e}(),ix=oe((function e(){ie(this,e),this.Ru=void 0,this.listeners=[]})),ax=oe((function e(){ie(this,e),this.queries=new ty((function(e){return hm(e)}),fm),this.onlineState="Unknown",this.bu=new Set}));function ox(e,t){return ux.apply(this,arguments)}function ux(){return ux=Qe(Ge().mark((function e(t,n){var r,i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=up(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ix),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ex(e.t0,"Initialization of query '".concat(dm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&hx(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ux.apply(this,arguments)}function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=Qe(Ge().mark((function e(t,n){var r,i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=up(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(e,t){var n,r=up(e),i=!1,a=ue(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ue(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&hx(r)}function fx(e,t,n){var r=up(e),i=r.queries.get(t);if(i){var a,o=ue(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function hx(e){e.bu.forEach((function(e){e.next()}))}var dx=function(){function e(t,n,r){ie(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return oe(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ue(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=rx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),px=function(){function e(t,n){ie(this,e),this.payload=t,this.byteLength=n}return oe(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),vx=function(){function e(t){ie(this,e),this.M=t}return oe(e,[{key:"wi",value:function(e){return Py(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Fy(this.M,e.document,!1):gv.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Ty(e)}}]),e}(),mx=function(){function e(t,n,r){ie(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yx(t)}return oe(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Pp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new vx(this.M),i=ue(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=ue(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||cy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eb(this.localStore,new vx(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=ue(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Cb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gx=oe((function e(t){ie(this,e),this.key=t})),kx=oe((function e(t){ie(this,e),this.key=t})),bx=function(){function e(t,n){ie(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=cy(),this.mutatedKeys=cy(),this.Gu=mm(t),this.Qu=new tx(this.Gu)}return oe(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new nx,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=pm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ap()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new rx(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new nx,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=cy(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new kx(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new gx(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=cy();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return rx.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),wx=oe((function e(t,n,r){ie(this,e),this.query=t,this.targetId=n,this.view=r})),xx=oe((function e(t){ie(this,e),this.key=t,this.na=!1})),Sx=function(){function e(t,n,r,i,a,o){ie(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new ty((function(e){return hm(e)}),fm),this.ra=new Map,this.oa=new Set,this.ua=new Cv(Qp.comparator),this.aa=new Map,this.ca=new Ob,this.ha={},this.la=new Map,this.fa=Dk.yn(),this.onlineState="Unknown",this.da=void 0}return oe(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function _x(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yS(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,kb(r.localStore,cm(n));case 8:return u=e.sent,r.isPrimaryClient&&mw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Ex(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(e,t,n,r){return Tx.apply(this,arguments)}function Tx(){return Tx=Qe(Ge().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=Qe(Ge().mark((function e(t,n,r,i){var a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,xb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Hx(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,xb(t.localStore,n,!0);case 3:return a=e.sent,o=new bx(n,a._i),u=o.Wu(a.documents),s=dy.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Hx(t,r,c.Xu),l=new wx(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=up(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!fm(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,bb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),yw(r.remoteStore,i.targetId),Wx(r,i.targetId)})).catch(Vk);case 9:e.next=14;break;case 11:return Wx(r,i.targetId),e.next=14,bb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t,n){return Px.apply(this,arguments)}function Px(){return Px=Qe(Ge().mark((function e(t,n,r){var i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gS(t),e.prev=1,e.next=4,function(e,t){var n,r=up(e),i=Ip.now(),a=t.reduce((function(e,t){return e.add(t.key)}),cy());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=ue(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=jm(c,n.get(c.key));null!=l&&u.push(new Km(c.key,l,yv(l.value.mapValue),Lm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Cv(xp)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Yx(i,a.changes);case 9:return e.next=11,Dw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ex(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Px.apply(this,arguments)}function Ox(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),e.prev=1,e.next=4,mb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(op(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?op(n.na):e.removedDocuments.size>0&&(op(n.na),n.na=!1))})),e.next=8,Yx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Dx.apply(this,arguments)}function Rx(e,t,n){var r=up(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=up(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ue(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hx(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Lx(e,t,n){return Mx.apply(this,arguments)}function Mx(){return Mx=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s,c;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=up(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Cv(Qp.comparator)).insert(o,gv.newNoDocument(o,Ep.min())),s=cy().add(o),c=new hy(Ep.min(),new Map,new Pv(xp),u,s),e.next=9,Ox(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),$x(i),e.next=16;break;case 14:return e.next=16,bb(i.localStore,n,!1).then((function(){return Wx(i,n,r)})).catch(Vk);case 16:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),i=n.batch.batchId,e.prev=1,e.next=4,pb(r.localStore,n);case 4:return a=e.sent,Kx(r,i,null),qx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Yx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Vx.apply(this,arguments)}function Ux(e,t,n){return jx.apply(this,arguments)}function jx(){return jx=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=up(t),e.prev=1,e.next=4,function(e,t){var n=up(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return op(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Kx(i,n,r),qx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Yx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),jx.apply(this,arguments)}function Bx(e,t){return zx.apply(this,arguments)}function zx(){return zx=Qe(Ge().mark((function e(t,n){var r,i,a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xw((r=up(t)).remoteStore)||tp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=up(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ex(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),zx.apply(this,arguments)}function qx(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Kx(e,t,n){var r=up(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Wx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ue(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||Gx(e,t)}))}function Gx(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(yw(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),$x(e))}function Hx(e,t,n){var r,i=ue(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gx?(e.ca.addReference(a.key,t),Qx(e,a)):a instanceof kx?(tp("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||Gx(e,a.key)):ap()}}catch(o){i.e(o)}finally{i.f()}}function Qx(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(tp("SyncEngine","New document in limbo: "+n),e.oa.add(r),$x(e))}function $x(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new Qp(Pp.fromString(t)),r=e.fa.next();e.aa.set(r,new xx(n)),e.ua=e.ua.insert(n,r),mw(e.remoteStore,new zg(cm(im(n.path)),r,2,kp.A))}}function Yx(e,t,n){return Xx.apply(this,arguments)}function Xx(){return Xx=Qe(Ge().mark((function e(t,n,r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=up(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=sb.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Tg.forEach(n,(function(t){return Tg.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Tg.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Og(e.t0)){e.next=10;break}throw e.t0;case 10:tp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ue(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Jx(e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=up(t)).currentUser.isEqual(n)){e.next=11;break}return tp("SyncEngine","User change. New user:",n.toKey()),e.next=5,hb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new cp(sp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Yx(r,i.di);case 11:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eS(e,t){var n=up(e),r=n.aa.get(t);if(r&&r.na)return cy().add(r.key);var i=cy(),a=n.ra.get(t);if(!a)return i;var o,u=ue(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function tS(e,t){return nS.apply(this,arguments)}function nS(){return nS=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),e.next=3,xb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Hx(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),nS.apply(this,arguments)}function rS(e,t){return iS.apply(this,arguments)}function iS(){return iS=Qe(Ge().mark((function e(t,n){var r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),e.abrupt("return",_b(r.localStore,n).then((function(e){return Yx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),iS.apply(this,arguments)}function aS(e,t,n,r){return oS.apply(this,arguments)}function oS(){return oS=Qe(Ge().mark((function e(t,n,r,i){var a,o;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=up(t),e.next=3,function(e,t){var n=up(e),r=up(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Tg.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Dw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kx(a,n,i||null),qx(a,n),function(e,t){up(up(e).Bs)._n(t)}(a.localStore,n)):ap();case 11:return e.next=13,Yx(a,o);case 13:e.next=16;break;case 15:tp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),oS.apply(this,arguments)}function uS(e,t){return sS.apply(this,arguments)}function sS(){return sS=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yS(r=up(t)),gS(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cS(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,$w(r.remoteStore,!0);case 9:o=ue(a);try{for(o.s();!(u=o.n()).done;)s=u.value,mw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Wx(r,t),bb(r.localStore,t,!0)})),yw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,cS(r,c);case 21:return function(e){var t=up(e);t.aa.forEach((function(e,n){yw(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Cv(Qp.comparator)}(r),r.da=!1,e.next=25,$w(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),sS.apply(this,arguments)}function cS(e,t,n){return lS.apply(this,arguments)}function lS(){return lS=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=up(t),a=[],o=[],u=ue(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,kb(i.localStore,cm(f[0]));case 11:l=e.sent,h=ue(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,tS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Sb(i.localStore,c);case 36:return y=e.sent,e.next=39,kb(i.localStore,y);case 39:return l=e.sent,e.next=42,Ex(i,fS(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),lS.apply(this,arguments)}function fS(e){return rm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hS(e){var t=up(e);return up(up(t.localStore).persistence).Fs()}function dS(e,t,n,r){return pS.apply(this,arguments)}function pS(){return pS=Qe(Ge().mark((function e(t,n,r,i){var a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=up(t)).da){e.next=3;break}return e.abrupt("return",void tp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,_b(a.localStore,vm(o[0]));case 10:return u=e.sent,s=hy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Yx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,bb(a.localStore,n,!0);case 17:return Wx(a,n,i),e.abrupt("break",20);case 19:ap();case 20:case"end":return e.stop()}}),e)}))),pS.apply(this,arguments)}function vS(e,t,n){return mS.apply(this,arguments)}function mS(){return mS=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=yS(t)).da){e.next=45;break}a=ue(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return tp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Sb(i.localStore,u);case 12:return s=e.sent,e.next=15,kb(i.localStore,s);case 15:return c=e.sent,e.next=18,Ex(i,fS(s),c.targetId,!1);case 18:mw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ue(r),e.prev=30,h=Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,bb(i.localStore,t,!1).then((function(){yw(i.remoteStore,t),Wx(i,t)})).catch(Vk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),mS.apply(this,arguments)}function yS(e){var t=up(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ox.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lx.bind(null,t),t.sa.zo=lx.bind(null,t.eventManager),t.sa.wa=fx.bind(null,t.eventManager),t}function gS(e){var t=up(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ux.bind(null,t),t}function kS(e,t,n){var r=up(e);(function(){var e=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=up(e),r=Ty(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(yx(i)),a=new mx(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Yx(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=up(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(rp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var bS=function(){function e(){ie(this,e),this.synchronizeTabs=!1}return oe(e,[{key:"initialize",value:function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=iw(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return fb(this.persistence,new cb,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Vb(jb.Yi,this.M)}},{key:"ga",value:function(e){return new Yb}},{key:"terminate",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wS=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return oe(n,[{key:"initialize",value:function(){var e=Qe(Ge().mark((function e(t){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(fe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,gS(this.Ta.syncEngine);case 6:return e.next=8,Dw(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return fb(this.persistence,new cb,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new zk(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=ob(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ik.withCacheSize(this.cacheSizeBytes):Ik.DEFAULT;return new rb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nw(),rw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new Yb}}]),n}(bS),xS=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return oe(n,[{key:"initialize",value:function(){var e=Qe(Ge().mark((function e(t){var r,i=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(fe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof $b,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:aS.bind(null,r),Br:dS.bind(null,r),Lr:vS.bind(null,r),Fs:hS.bind(null,r),Fr:rS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uS(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=nw();if(!$b.vt(t))throw new cp(sp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ob(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $b(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wS),SS=function(){function e(){ie(this,e)}return oe(e,[{key:"initialize",value:function(){var e=Qe(Ge().mark((function e(t,n){var r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Rx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jx.bind(null,this.syncEngine),e.next=12,$w(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ax}},{key:"createDatastore",value:function(e){var t,n=iw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new tw(t));return function(e,t,n,r){return new cw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Rx(o.syncEngine,e,0)},a=Jb.vt()?new Jb:new Xb,new fw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Sx(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=up(t),tp("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,pw(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Qe(Ge().mark((function r(){var i;return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var IS=function(){function e(t){ie(this,e),this.observer=t,this.muted=!1}return oe(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ES=function(){function e(t,n){var r=this;ie(this,e),this.Ra=t,this.M=n,this.metadata=new lp,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return oe(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=Qe(Ge().mark((function e(){var t,n,r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new px(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=Qe(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=Qe(Ge().mark((function e(){var t,n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),TS=function(){function e(t){ie(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return oe(e,[{key:"lookup",value:function(){var e=Qe(Ge().mark((function e(t){var n,r=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new cp(sp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),i=Ry(r.M)+"/documents",a={documents:n.map((function(e){return Ay(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Vy(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());op(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ym(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Qe(Ge().mark((function e(){var t,n=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Qp.fromPath(t);n.mutations.push(new Xm(r,n.precondition(r)))})),e.next=7,function(){var e=Qe(Ge().mark((function e(t,n){var r,i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=up(t),i=Ry(r.M)+"/documents",a={writes:n.map((function(e){return Uy(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ap();t=Ep.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new cp(sp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Lm.updateTime(t):Lm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ep.min()))throw new cp(sp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lm.updateTime(t)}return Lm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),CS=function(){function e(t,n,r,i,a){ie(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new aw(this.asyncQueue,"transaction_retry")}return oe(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(Qe(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new TS(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!Wp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Zm(t)}return!1}}]),e}(),NS=function(){function e(t,n,r,i){var a=this;ie(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xd.UNAUTHENTICATED,this.clientId=wp.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return tp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return oe(e,[{key:"getConfiguration",value:function(){var e=Qe(Ge().mark((function e(){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new cp(sp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new lp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Qe(Ge().mark((function n(){var r;return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ex(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function AS(e,t){return PS.apply(this,arguments)}function PS(){return PS=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),tp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,hb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function OS(e,t){return DS.apply(this,arguments)}function DS(){return DS=Qe(Ge().mark((function e(t,n){var r,i;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,RS(t);case 3:return r=e.sent,tp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Hw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Hw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function RS(e){return LS.apply(this,arguments)}function LS(){return LS=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return tp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,AS(t,new bS);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),LS.apply(this,arguments)}function MS(e){return FS.apply(this,arguments)}function FS(){return FS=Qe(Ge().mark((function e(t){return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return tp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,OS(t,new SS);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),FS.apply(this,arguments)}function VS(e){return RS(e).then((function(e){return e.persistence}))}function US(e){return RS(e).then((function(e){return e.localStore}))}function jS(e){return MS(e).then((function(e){return e.remoteStore}))}function BS(e){return MS(e).then((function(e){return e.syncEngine}))}function zS(e){return qS.apply(this,arguments)}function qS(){return qS=Qe(Ge().mark((function e(t){var n,r;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MS(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=_x.bind(null,n.syncEngine),r.onUnlisten=Cx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function KS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new IS({next:function(a){t.enqueueAndForget((function(){return sx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new cp(sp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new cp(sp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dx(im(n.path),a,{includeMetadataChanges:!0,ku:!0});return ox(e,o)},i.next=3,zS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function WS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new IS({next:function(n){t.enqueueAndForget((function(){return sx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new cp(sp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dx(n,a,{includeMetadataChanges:!0,ku:!0});return ox(e,o)},i.next=3,zS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var GS=new Map;function HS(e,t,n){if(!n)throw new cp(sp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function QS(e,t,n,r){if(!0===t&&!0===r)throw new cp(sp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function $S(e){if(!Qp.isDocumentKey(e))throw new cp(sp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function YS(e){if(Qp.isDocumentKey(e))throw new cp(sp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function XS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ap()}function JS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new cp(sp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=XS(e);throw new cp(sp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ZS(e,t){if(t<=0)throw new cp(sp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var e_=function(){function e(t){var n;if(ie(this,e),void 0===t.host){if(void 0!==t.ssl)throw new cp(sp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new cp(sp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,QS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return oe(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),t_=function(){function e(t,n,r){ie(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e_({}),this._settingsFrozen=!1,t instanceof Kp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new cp(sp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kp(e.options.projectId)}(t))}return oe(e,[{key:"app",get:function(){if(!this._app)throw new cp(sp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new cp(sp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hp;switch(e.type){case"gapi":var t=e.client;return op(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new mp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new cp(sp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=GS.get(e);t&&(tp("ComponentProvider","Removing Datastore"),GS.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function n_(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=JS(e,t_))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&rp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Xd.MOCK_USER;else{o=_e(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new cp(sp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xd(s)}e._authCredentials=new dp(new fp(o,u))}}var r_=function(){function e(t,n,r){ie(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return oe(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new a_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),i_=function(){function e(t,n,r){ie(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return oe(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),a_=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,e,r,im(i)))._path=i,a.type="collection",a}return oe(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new r_(this.firestore,null,new Qp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(i_);function o_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=We(e),HS("collection","path",t),e instanceof t_){var a=Pp.fromString.apply(Pp,[t].concat(r));return YS(a),new a_(e,null,a)}if(!(e instanceof r_||e instanceof a_))throw new cp(sp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Pp.fromString.apply(Pp,[t].concat(r)));return YS(o),new a_(e.firestore,null,o)}function u_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=We(e),1===arguments.length&&(t=wp.R()),HS("doc","path",t),e instanceof t_){var a=Pp.fromString.apply(Pp,[t].concat(r));return $S(a),new r_(e,null,new Qp(a))}if(!(e instanceof r_||e instanceof a_))throw new cp(sp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Pp.fromString.apply(Pp,[t].concat(r)));return $S(o),new r_(e.firestore,e instanceof a_?e.converter:null,new Qp(o))}function s_(e,t){return e=We(e),t=We(t),(e instanceof r_||e instanceof a_)&&(t instanceof r_||t instanceof a_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function c_(e,t){return e=We(e),t=We(t),e instanceof i_&&t instanceof i_&&e.firestore===t.firestore&&fm(e._query,t._query)&&e.converter===t.converter}var l_=function(){function e(){var t=this;ie(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new aw(this,"async_queue_retry"),this.Qa=function(){var e=rw();e&&tp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=rw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return oe(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=rw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new lp;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=Qe(Ge().mark((function e(){var t=this;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Og(e.t0)){e.next=12;break}throw e.t0;case 12:tp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw np("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=Zw.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&ap()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=Qe(Ge().mark((function e(){var t;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=ue(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ue(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function f_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ue(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var h_=function(){function e(){ie(this,e),this._progressObserver={},this._taskCompletionResolver=new lp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return oe(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),d_=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new l_,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return oe(n,[{key:"_terminate",value:function(){return this._firestoreClient||v_(this),this._firestoreClient.terminate()}}]),n}(t_);function p_(e){return e._firestoreClient||v_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function v_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new qp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new NS(e._authCredentials,e._appCheckCredentials,e._queue,r)}function m_(e,t,n){var r=new lp;return e.asyncQueue.enqueue(Qe(Ge().mark((function i(){return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,AS(e,n);case 3:return i.next=5,OS(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===sp.FAILED_PRECONDITION||e.code===sp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function y_(e){return function(e){return e.asyncQueue.enqueue(Qe(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,VS(e);case 2:return n=t.sent,t.next=5,jS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=up(e);return t.wu.delete(0),hw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(p_(e=JS(e,d_)))}function g_(e){return function(e){return e.asyncQueue.enqueue(Qe(Ge().mark((function t(){var n,r;return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,VS(e);case 2:return n=t.sent,t.next=5,jS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=up(t)).wu.add(0),e.next=4,pw(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(p_(e=JS(e,d_)))}function k_(e,t){var n=p_(e=JS(e,d_)),r=new h_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ES(e,t)}(function(e,t){if(e instanceof Uint8Array)return _S(e,t);if(e instanceof ArrayBuffer)return _S(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,iw(t));e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kS,t.next=3,BS(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function b_(e,t){return function(e,t){return e.asyncQueue.enqueue(Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=up(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,US(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(p_(e=JS(e,d_)),t).then((function(t){return t?new i_(e,null,t.query):null}))}function w_(e){if(e._initialized||e._terminated)throw new cp(sp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var x_=function(){function e(){ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new cp(sp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dp(n)}return oe(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var S_=function(){function e(t){ie(this,e),this._byteString=t}return oe(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Lp.fromBase64String(t))}catch(t){throw new cp(sp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Lp.fromUint8Array(t))}}]),e}(),__=oe((function e(t){ie(this,e),this._methodName=t})),I_=function(){function e(t,n){if(ie(this,e),!isFinite(t)||t<-90||t>90)throw new cp(sp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new cp(sp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return oe(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return xp(this._lat,e._lat)||xp(this._long,e._long)}}]),e}(),E_=/^__.*__$/,T_=function(){function e(t,n,r){ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return oe(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Km(e,this.data,this.fieldMask,t,this.fieldTransforms):new qm(e,this.data,t,this.fieldTransforms)}}]),e}(),C_=function(){function e(t,n,r){ie(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return oe(e,[{key:"toMutation",value:function(e,t){return new Km(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function N_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ap()}}var A_=function(){function e(t,n,r,i,a,o){ie(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return oe(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Y_(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(N_(this.ec)&&E_.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),P_=function(){function e(t,n,r){ie(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||iw(t)}return oe(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new A_({ec:e,methodName:t,hc:n,path:Dp.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function O_(e){var t=e._freezeSettings(),n=iw(e._databaseId);return new P_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function D_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);G_("Data must be an object, but it was:",o,r);var u,s,c=K_(r,o);if(a.merge)u=new Rp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ue(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=H_(t,d,n);if(!o.contains(p))throw new cp(sp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));X_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Rp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new T_(new mv(c),u,s)}var R_=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(__);function L_(e,t,n){return new A_({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var M_=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"_toFieldTransform",value:function(e){return new Dm(e.path,new Im)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(__),F_=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).fc=r,i}return oe(n,[{key:"_toFieldTransform",value:function(e){var t=L_(this,e,!0),n=this.fc.map((function(e){return q_(e,t)})),r=new Em(n);return new Dm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(__),V_=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).fc=r,i}return oe(n,[{key:"_toFieldTransform",value:function(e){var t=L_(this,e,!0),n=this.fc.map((function(e){return q_(e,t)})),r=new Cm(n);return new Dm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(__),U_=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e)).dc=r,i}return oe(n,[{key:"_toFieldTransform",value:function(e){var t=new Am(e.M,bm(e.M,this.dc));return new Dm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(__);function j_(e,t,n,r){var i=e.lc(1,t,n);G_("Data must be an object, but it was:",i,r);var a=[],o=mv.empty();Cp(r,(function(e,r){var u=$_(t,e,n);r=We(r);var s=i.oc(u);if(r instanceof R_)a.push(u);else{var c=q_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Rp(a);return new C_(o,u,i.fieldTransforms)}function B_(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[H_(t,r,n)],s=[i];if(a.length%2!=0)throw new cp(sp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(H_(t,a[c])),s.push(a[c+1]);for(var l=[],f=mv.empty(),h=u.length-1;h>=0;--h)if(!X_(l,u[h])){var d=u[h],p=s[h];p=We(p);var v=o.oc(d);if(p instanceof R_)l.push(d);else{var m=q_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Rp(l);return new C_(f,y,o.fieldTransforms)}function z_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return q_(n,e.lc(r?4:3,t))}function q_(e,t){if(W_(e=We(e)))return G_("Unsupported field value:",t,e),K_(e,t);if(e instanceof __)return function(e,t){if(!N_(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ue(e);try{for(a.s();!(n=a.n()).done;){var o=q_(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=We(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bm(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ip.fromDate(e);return{timestampValue:_y(t.M,n)}}if(e instanceof Ip){var r=new Ip(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_y(t.M,r)}}if(e instanceof I_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof S_)return{bytesValue:Iy(t.M,e._byteString)};if(e instanceof r_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Cy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(XS(e)))}(e,t)}function K_(e,t){var n={};return Np(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cp(e,(function(e,r){var i=q_(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function W_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ip||e instanceof I_||e instanceof S_||e instanceof r_||e instanceof __)}function G_(e,t,n){if(!W_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=XS(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function H_(e,t,n){if((t=We(t))instanceof x_)return t._internalPath;if("string"==typeof t)return $_(e,t);throw Y_("Field path arguments must be of type string or ",e,!1,void 0,n)}var Q_=new RegExp("[~\\*/\\[\\]]");function $_(e,t,n){if(t.search(Q_)>=0)throw Y_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return me(x_,Y(t.split(".")))._internalPath}catch(OC){throw Y_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Y_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new cp(sp.INVALID_ARGUMENT,u+e+s)}function X_(e,t){return e.some((function(e){return e.isEqual(t)}))}var J_=function(){function e(t,n,r,i,a){ie(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return oe(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new r_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(eI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Z_=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"data",value:function(){return wn(fe(n.prototype),"data",this).call(this)}}]),n}(J_);function eI(e,t){return"string"==typeof t?$_(e,t):t instanceof x_?t._internalPath:t._delegate._internalPath}var tI=function(){function e(t,n){ie(this,e),this.hasPendingWrites=t,this.fromCache=n}return oe(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),nI=function(e){le(n,e);var t=ve(n);function n(e,r,i,a,o,u){var s;return ie(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return oe(n,[{key:"exists",value:function(){return wn(fe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new rI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(eI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(J_),rI=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return wn(fe(n.prototype),"data",this).call(this,e)}}]),n}(nI),iI=function(){function e(t,n,r,i){ie(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new tI(i.hasPendingWrites,i.fromCache),this.query=r}return oe(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new rI(n._firestore,n._userDataWriter,r.key,r,new tI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new cp(sp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new rI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new rI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:aI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function aI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ap()}}function oI(e,t){return e instanceof nI&&t instanceof nI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof iI&&t instanceof iI&&e._firestore===t._firestore&&c_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function uI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new cp(sp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sI=oe((function e(){ie(this,e)}));function cI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var lI=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return oe(n,[{key:"_apply",value:function(e){var t=O_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new cp(sp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wI(o,a);var s,c=[],l=ue(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(bI(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=bI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wI(o,a),u=z_(n,"where",o,"in"===a||"not-in"===a);var h=zv.create(i,a,u);return function(e,t){if(t.S()){var n=om(e);if(null!==n&&!n.isEqual(t.field))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=am(e);null!==r&&xI(e,t.field,r)}var i=function(e,t){var n,r=ue(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new cp(sp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new cp(sp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new i_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(sI);var fI=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return oe(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new cp(sp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new cp(sp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Jv(t,n);return function(e,t){if(null===am(e)){var n=om(e);null!==n&&xI(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new i_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new nm(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(sI);var hI=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return oe(n,[{key:"_apply",value:function(e){return new i_(e.firestore,e.converter,lm(e._query,this.yc,this.Ic))}}]),n}(sI);var dI=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return oe(n,[{key:"_apply",value:function(e){var t=kI(e,this.type,this.Tc,this.Ec);return new i_(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(sI);function pI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dI("startAt",t,!0)}function vI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dI("startAfter",t,!1)}var mI=function(e){le(n,e);var t=ve(n);function n(e,r,i){var a;return ie(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return oe(n,[{key:"_apply",value:function(e){var t=kI(e,this.type,this.Tc,this.Ec);return new i_(e.firestore,e.converter,function(e,t){return new nm(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(sI);function yI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mI("endBefore",t,!1)}function gI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mI("endAt",t,!0)}function kI(e,t,n,r){if(n[0]=We(n[0]),n[0]instanceof J_)return function(e,t,n,r,i){if(!r)throw new cp(sp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ue(sm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(iv(t,r.key));else{var c=r.data.field(s.field);if(jp(c))throw new cp(sp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new cp(sp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Xv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=O_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new cp(sp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new cp(sp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!um(e)&&-1!==c.indexOf("/"))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Pp.fromString(c));if(!Qp.isDocumentKey(l))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Qp(l);u.push(iv(t,f))}else{var h=z_(n,r,c);u.push(h)}}return new Xv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function bI(e,t,n){if("string"==typeof(n=We(n))){if(""===n)throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(t)&&-1!==n.indexOf("/"))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Pp.fromString(n));if(!Qp.isDocumentKey(r))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iv(e,new Qp(r))}if(n instanceof r_)return iv(e,n._key);throw new cp(sp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(XS(n),"."))}function wI(e,t){if(!Array.isArray(e)||0===e.length)throw new cp(sp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new cp(sp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function xI(e,t,n){if(!n.isEqual(t))throw new cp(sp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var SI={maxAttempts:5},_I=function(){function e(){ie(this,e)}return oe(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Up(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ap()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Cp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new I_(Vp(e.latitude),Vp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Bp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Fp(e);return new Ip(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Pp.fromString(e);op(Jy(n));var r=new Kp(n.get(1),n.get(3)),i=new Qp(n.popFirst(5));return r.isEqual(t)||np("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function II(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var EI=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return oe(n,[{key:"convertBytes",value:function(e){return new S_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}]),n}(_I),TI=function(){function e(t,n){ie(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=O_(t)}return oe(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=CI(e,this._firestore),i=II(r.converter,t,n),a=D_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Lm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=CI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=We(t))||t instanceof x_?B_(this._dataReader,"WriteBatch.update",i._key,t,n,o):j_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Lm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=CI(e,this._firestore);return this._mutations=this._mutations.concat(new Ym(t._key,Lm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new cp(sp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function CI(e,t){if((e=We(e)).firestore!==t)throw new cp(sp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var NI=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return oe(n,[{key:"convertBytes",value:function(e){return new S_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}]),n}(_I);function AI(e){e=JS(e,r_);var t=JS(e.firestore,d_),n=p_(t),r=new NI(t);return function(e,t){var n=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qe(Ge().mark((function e(t,n,r){var i,a;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=up(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new cp(sp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ex(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,US(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new nI(t,r,e._key,n,new tI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function PI(e){e=JS(e,i_);var t=JS(e.firestore,d_),n=p_(t),r=new NI(t);return function(e,t){var n=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Qe(Ge().mark((function e(t,n,r){var i,a,o,u,s;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xb(t,n,!0);case 3:i=e.sent,a=new bx(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ex(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,US(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new iI(t,r,e,n)}))}function OI(e,t,n){e=JS(e,r_);var r=JS(e.firestore,d_),i=II(e.converter,t,n);return MI(r,[D_(O_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Lm.none())])}function DI(e,t,n){e=JS(e,r_);for(var r=JS(e.firestore,d_),i=O_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return MI(r,[("string"==typeof(t=We(t))||t instanceof x_?B_(i,"updateDoc",e._key,t,n,o):j_(i,"updateDoc",e._key,t)).toMutation(e._key,Lm.exists(!0))])}function RI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=We(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||f_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(f_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof r_)l=JS(e.firestore,d_),f=im(e._key.path),c={next:function(t){n[s]&&n[s](FI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=JS(e,i_);l=JS(p.firestore,d_),f=p._query;var v=new NI(l);c={next:function(e){n[s]&&n[s](new iI(l,v,p,e))},error:n[s+1],complete:n[s+2]},uI(e._query)}return function(e,t,n,r){var i=new IS(r),a=new dx(t,i,n);return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ox,t.next=3,zS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sx,t.next=3,zS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(p_(l),f,h,c)}function LI(e,t){return function(e,t){var n=new IS(t);return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){up(e).bu.add(t),t.next()},t.next=3,zS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function t(){return Ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){up(e).bu.delete(t)},t.next=3,zS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(p_(e=JS(e,d_)),f_(t)?t:{next:t})}function MI(e,t){return function(e,t){var n=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function r(){return Ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ax,r.next=3,BS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(p_(e),t)}function FI(e,t,n){var r=n.docs.get(t._key),i=new NI(e);return new nI(e,i,t._key,r,new tI(n.hasPendingWrites,n.fromCache),t.converter)}var VI=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r))._firestore=e,i}return oe(n,[{key:"get",value:function(e){var t=this,r=CI(e,this._firestore),i=new NI(this._firestore);return wn(fe(n.prototype),"get",this).call(this,e).then((function(e){return new nI(t._firestore,i,r._key,e._document,new tI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ie(this,e),this._firestore=t,this._transaction=n,this._dataReader=O_(t)}return oe(e,[{key:"get",value:function(e){var t=this,n=CI(e,this._firestore),r=new EI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ap();var i=e[0];if(i.isFoundDocument())return new J_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new J_(t._firestore,r,n._key,null,n.converter);throw ap()}))}},{key:"set",value:function(e,t,n){var r=CI(e,this._firestore),i=II(r.converter,t,n),a=D_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=CI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=We(t))||t instanceof x_?B_(this._dataReader,"Transaction.update",i._key,t,n,o):j_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=CI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function UI(e,t,n){e=JS(e,d_);var r=Object.assign(Object.assign({},SI),n);return function(e){if(e.maxAttempts<1)throw new cp(sp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function i(){var a;return Ge().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return MS(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new CS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(p_(e),(function(n){return t(new VI(e,n))}),r)}function jI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new F_("arrayUnion",t)}function BI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new V_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Jd=e}(zt),Lt(new $e("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new d_(i,new pp(e.getProvider("auth-internal")),new gp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Qt(Yd,"3.4.9",e),Qt(Yd,"3.4.9","esm2017")}();function zI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new cp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qI(){if("undefined"===typeof Uint8Array)throw new cp("unimplemented","Uint8Arrays are not available in this environment.")}function KI(){if("undefined"==typeof atob)throw new cp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var WI=function(){function e(t){ie(this,e),this._delegate=t}return oe(e,[{key:"toBase64",value:function(){return KI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return KI(),new e(S_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qI(),new e(S_.fromUint8Array(t))}}]),e}();function GI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ue(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var HI=function(){function e(){ie(this,e)}return oe(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){w_(e=JS(e,d_));var n=p_(e),r=e._freezeSettings(),i=new SS;return m_(n,i,new wS(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){w_(e=JS(e,d_));var t=p_(e),n=e._freezeSettings(),r=new SS;return m_(t,r,new xS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new cp(sp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new lp;return e._queue.enqueueAndForgetEvenWhileRestricted(Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Qe(Ge().mark((function e(t){var n;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ng.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ng.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ob(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),QI=function(){function e(t,n,r){var i=this;ie(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Kp||(this._appCompat=t)}return oe(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||rp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n_(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return y_(this._delegate)}},{key:"disableNetwork",value:function(){return g_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&QS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new lp;return e.asyncQueue.enqueueAndForget(Qe(Ge().mark((function n(){return Ge().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Bx,n.next=3,BS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(p_(e=JS(e,d_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return LI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new cp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new sE(this,o_(this._delegate,e))}catch(t){throw eE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ZI(this,u_(this._delegate,e))}catch(t){throw eE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new aE(this,function(e,t){if(e=JS(e,t_),HS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new cp(sp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new i_(e,null,function(e){return new nm(Pp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw eE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return UI(this._delegate,(function(n){return e(new YI(t,n))}))}},{key:"batch",value:function(){var e=this;return p_(this._delegate),new XI(new TI(this._delegate,(function(t){return MI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return k_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return b_(this._delegate,e).then((function(e){return e?new aE(t,e):null}))}}]),e}(),$I=function(e){le(n,e);var t=ve(n);function n(e){var r;return ie(this,n),(r=t.call(this)).firestore=e,r}return oe(n,[{key:"convertBytes",value:function(e){return new WI(new S_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ZI.forKey(t,this.firestore,null)}}]),n}(_I);var YI=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return oe(e,[{key:"get",value:function(e){var t=this,n=cE(e);return this._delegate.get(n).then((function(e){return new rE(t._firestore,new nI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=cE(e);return n?(zI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cE(e);return this._delegate.delete(t),this}}]),e}(),XI=function(){function e(t){ie(this,e),this._delegate=t}return oe(e,[{key:"set",value:function(e,t,n){var r=cE(e);return n?(zI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=cE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=cE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),JI=function(){function e(t,n,r){ie(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return oe(e,[{key:"fromFirestore",value:function(e,t){var n=new rI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new iE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $I(t),n),i.set(n,a)),a}}]),e}();JI.INSTANCES=new WeakMap;var ZI=function(){function e(t,n){ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return oe(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new sE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new sE(this.firestore,o_(this._delegate,e))}catch(t){throw eE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=We(e))instanceof r_&&s_(this._delegate,e)}},{key:"set",value:function(e,t){t=zI("DocumentReference.set",t);try{return t?OI(this._delegate,e,t):OI(this._delegate,e)}catch(n){throw eE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?DI(this._delegate,e):DI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw eE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return MI(JS(e.firestore,d_),[new Ym(e._key,Lm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tE(n),a=nE(n,(function(t){return new rE(e.firestore,new nI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return RI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?AI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=JS(e,r_);var t=JS(e.firestore,d_);return KS(p_(t),e._key,{source:"server"}).then((function(n){return FI(t,e,n)}))}(this._delegate):function(e){e=JS(e,r_);var t=JS(e.firestore,d_);return KS(p_(t),e._key).then((function(n){return FI(t,e,n)}))}(this._delegate),t.then((function(e){return new rE(n.firestore,new nI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new cp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new r_(n._delegate,r,new Qp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new r_(n._delegate,r,t))}}]),e}();function eE(e,t,n){return e.message=e.message.replace(t,n),e}function tE(e){var t,n=ue(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!GI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function nE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=GI(e[0])?e[0]:GI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var rE=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return oe(e,[{key:"ref",get:function(){return new ZI(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return oI(this._delegate,e._delegate)}}]),e}(),iE=function(e){le(n,e);var t=ve(n);function n(){return ie(this,n),t.apply(this,arguments)}return oe(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ap()}(void 0!==t),t}}]),n}(rE),aE=function(){function e(t,n){ie(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $I(t)}return oe(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,cI(this._delegate,function(e,t,n){var r=t,i=eI("where",e);return new lI(i,r,n)}(t,n,r)))}catch(i){throw eE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,cI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eI("orderBy",e);return new fI(n,t)}(t,n)))}catch(r){throw eE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,cI(this._delegate,function(e){return ZS("limit",e),new hI("limit",e,"F")}(t)))}catch(n){throw eE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,cI(this._delegate,function(e){return ZS("limitToLast",e),new hI("limitToLast",e,"L")}(t)))}catch(n){throw eE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,cI(this._delegate,pI.apply(void 0,arguments)))}catch(t){throw eE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,cI(this._delegate,vI.apply(void 0,arguments)))}catch(t){throw eE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,cI(this._delegate,yI.apply(void 0,arguments)))}catch(t){throw eE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,cI(this._delegate,gI.apply(void 0,arguments)))}catch(t){throw eE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return c_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=JS(e,i_);var t=JS(e.firestore,d_),n=p_(t),r=new NI(t);return WS(n,e._query,{source:"server"}).then((function(n){return new iI(t,r,e,n)}))}(this._delegate):function(e){e=JS(e,i_);var t=JS(e.firestore,d_),n=p_(t),r=new NI(t);return uI(e._query),WS(n,e._query).then((function(n){return new iI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new uE(n.firestore,new iI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=tE(n),a=nE(n,(function(t){return new uE(e.firestore,new iI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return RI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(JI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),oE=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return oe(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new iE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),uE=function(){function e(t,n){ie(this,e),this._firestore=t,this._delegate=n}return oe(e,[{key:"query",get:function(){return new aE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new iE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new oE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new iE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return oI(this._delegate,e._delegate)}}]),e}(),sE=function(e){le(n,e);var t=ve(n);function n(e,r){var i;return ie(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return oe(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ZI(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ZI(this.firestore,void 0===e?u_(this._delegate):u_(this._delegate,e))}catch(t){throw eE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=JS(e.firestore,d_),r=u_(e),i=II(e.converter,t);return MI(n,[D_(O_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Lm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ZI(t.firestore,e)}))}},{key:"isEqual",value:function(e){return s_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(JI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(aE);function cE(e){return JS(e,r_)}var lE=function(){function e(){ie(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=me(x_,n)}return oe(e,[{key:"isEqual",value:function(e){return(e=We(e))instanceof x_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Dp.keyField().canonicalString())}}]),e}(),fE=function(){function e(t){ie(this,e),this._delegate=t}return oe(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new M_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new R_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=jI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=BI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new U_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),hE={Firestore:QI,GeoPoint:I_,Timestamp:Ip,Blob:WI,Transaction:YI,WriteBatch:XI,DocumentReference:ZI,DocumentSnapshot:rE,Query:aE,QueryDocumentSnapshot:iE,QuerySnapshot:uE,CollectionReference:sE,FieldPath:lE,FieldValue:fE,setLogLevel:function(e){!function(e){Zd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $e("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},hE)))}(e,(function(e,t){return new QI(e,t,new HI)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(kn);var dE=kn.initializeApp({apiKey:"AIzaSyCnYrv2lQhboRrnbsCgUQuDaGbVFWgHocY",authDomain:"simple-messanger414.firebaseapp.com",projectId:"simple-messanger414",storageBucket:"simple-messanger414.appspot.com",messagingSenderId:"976651170383",appId:"1:976651170383:web:dd0424880219d7d7e4303a",measurementId:"G-WZC0P9CRZY"}).firestore(),pE=kn.auth(),vE=n(184),mE=function(e){var t=pE.currentUser.uid;return(0,vE.jsx)("div",{className:e.uid===t?re.messageItemOwnWrapper:re.messageItemWrapper,children:(0,vE.jsxs)("div",{className:re.messageItem,children:[(0,vE.jsx)("div",{className:re.profielPhoto,children:(0,vE.jsx)("img",{src:e.photoURL,alt:"userProfilePicture"})}),(0,vE.jsxs)("div",{className:re.ChatMessage,children:[(0,vE.jsx)("div",{className:re.userName,children:e.userName}),(0,vE.jsx)("div",{className:re.message,children:e.message})]})]})})};function yE(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var gE=".".charCodeAt(0),kE=/\\(\\)?/g,bE=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),wE={},xE=function(e){if(null===e||void 0===e||!e.length)return[];if("string"!==typeof e)throw new Error("toPath() expects a string");return null==wE[e]&&(wE[e]=function(e){var t=[];return e.charCodeAt(0)===gE&&t.push(""),e.replace(bE,(function(e,n,r,i){var a=e;r?a=i.replace(kE,"$1"):n&&(a=n.trim()),t.push(a)})),t}(e)),wE[e]},SE=function(e,t){for(var n=xE(t),r=e,i=0;i<n.length;i++){var a=n[i];if(void 0===r||null===r||"object"!==typeof r||Array.isArray(r)&&isNaN(a))return;r=r[a]}return r};function _E(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var IE=function e(t,n,r,i,a){if(n>=r.length)return i;var o=r[n];if(isNaN(o)){var u;if(void 0===t||null===t){var s,c=e(void 0,n+1,r,i,a);return void 0===c?void 0:((s={})[o]=c,s)}if(Array.isArray(t))throw new Error("Cannot set a non-numeric property on an array");var f=e(t[o],n+1,r,i,a);if(void 0===f){var h=Object.keys(t).length;if(void 0===t[o]&&0===h)return;return void 0!==t[o]&&h<=1?isNaN(r[n-1])||a?void 0:{}:(t[o],yE(t,[o].map(_E)))}return l({},t,((u={})[o]=f,u))}var d=Number(o);if(void 0===t||null===t){var p=e(void 0,n+1,r,i,a);if(void 0===p)return;var v=[];return v[d]=p,v}if(!Array.isArray(t))throw new Error("Cannot set a numeric property on an object");var m=e(t[d],n+1,r,i,a),y=[].concat(t);if(a&&void 0===m){if(y.splice(d,1),0===y.length)return}else y[d]=m;return y},EE=function(e,t,n,r){if(void 0===r&&(r=!1),void 0===e||null===e)throw new Error("Cannot call setIn() with "+String(e)+" state");if(void 0===t||null===t)throw new Error("Cannot call setIn() with "+String(t)+" key");return IE(e,0,xE(t),n,r)},TE="FINAL_FORM/form-error",CE="FINAL_FORM/array-error";function NE(e,t){var n=e.errors,r=e.initialValues,i=e.lastSubmittedValues,a=e.submitErrors,o=e.submitFailed,u=e.submitSucceeded,s=e.submitting,c=e.values,l=t.active,f=t.blur,h=t.change,d=t.data,p=t.focus,v=t.modified,m=t.modifiedSinceLastSubmit,y=t.name,g=t.touched,k=t.validating,b=t.visited,w=SE(c,y),x=SE(n,y);x&&x[CE]&&(x=x[CE]);var S=a&&SE(a,y),_=r&&SE(r,y),I=t.isEqual(_,w),E=!x&&!S;return{active:l,blur:f,change:h,data:d,dirty:!I,dirtySinceLastSubmit:!(!i||t.isEqual(SE(i,y),w)),error:x,focus:p,initial:_,invalid:!E,length:Array.isArray(w)?w.length:void 0,modified:v,modifiedSinceLastSubmit:m,name:y,pristine:I,submitError:S,submitFailed:o,submitSucceeded:u,submitting:s,touched:g,valid:E,value:w,visited:b,validating:k}}var AE=["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","value","visited","validating"],PE=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),a=0;a<n.length;a++){var o=n[a];if(!i(o)||e[o]!==t[o])return!1}return!0};function OE(e,t,n,r,i,a){var o=!1;return i.forEach((function(i){r[i]&&(e[i]=t[i],n&&(~a.indexOf(i)?PE(t[i],n[i]):t[i]===n[i])||(o=!0))})),o}var DE=["data"],RE=function(e,t,n,r){var i={blur:e.blur,change:e.change,focus:e.focus,name:e.name};return OE(i,e,t,n,AE,DE)||!t||r?i:void 0},LE=["active","dirty","dirtyFields","dirtyFieldsSinceLastSubmit","dirtySinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitting","submitError","submitErrors","submitFailed","submitSucceeded","touched","valid","validating","values","visited"],ME=["touched","visited"];function FE(e,t,n,r){var i={};return OE(i,e,t,n,LE,ME)||!t||r?i:void 0}var VE=function(e){var t,n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.length===t.length&&!i.some((function(e,n){return!PE(t[n],e)}))||(t=i,n=e.apply(void 0,i)),n}},UE=function(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then},jE=function(e,t){return e===t},BE=function e(t){return Object.keys(t).some((function(n){var r=t[n];return!r||"object"!==typeof r||r instanceof Error?"undefined"!==typeof r:e(r)}))};function zE(e,t,n,r,i,a){var o=i(n,r,t,a);return!!o&&(e(o),!0)}function qE(e,t,n,r,i){var a=e.entries;Object.keys(a).forEach((function(e){var o=a[Number(e)];if(o){var u=o.subscription,s=o.subscriber,c=o.notified;zE(s,u,t,n,r,i||!c)&&(o.notified=!0)}}))}function KE(e){if(!e)throw new Error("No config specified");var t=e.debug,n=e.destroyOnUnregister,r=e.keepDirtyOnReinitialize,i=e.initialValues,a=e.mutators,o=e.onSubmit,u=e.validate,s=e.validateOnBlur;if(!o)throw new Error("No onSubmit function specified");var c={subscribers:{index:0,entries:{}},fieldSubscribers:{},fields:{},formState:{asyncErrors:{},dirtySinceLastSubmit:!1,modifiedSinceLastSubmit:!1,errors:{},initialValues:i&&l({},i),invalid:!1,pristine:!0,submitting:!1,submitFailed:!1,submitSucceeded:!1,resetWhileSubmitting:!1,valid:!0,validating:0,values:i?l({},i):{}},lastFormState:void 0},f=0,h=!1,d=!1,p=!1,v=0,m={},y=function(e,t,n){var r=n(SE(e.formState.values,t));e.formState.values=EE(e.formState.values,t,r)||{}},g=function(e,t,n){if(e.fields[t]){var r,i;e.fields=l({},e.fields,((r={})[n]=l({},e.fields[t],{name:n,blur:function(){return A.blur(n)},change:function(e){return A.change(n,e)},focus:function(){return A.focus(n)},lastFieldState:void 0}),r)),delete e.fields[t],e.fieldSubscribers=l({},e.fieldSubscribers,((i={})[n]=e.fieldSubscribers[t],i)),delete e.fieldSubscribers[t];var a=SE(e.formState.values,t);e.formState.values=EE(e.formState.values,t,void 0)||{},e.formState.values=EE(e.formState.values,n,a),delete e.lastFormState}},k=function(e){return function(){if(a){for(var t={formState:c.formState,fields:c.fields,fieldSubscribers:c.fieldSubscribers,lastFormState:c.lastFormState},n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a[e](r,t,{changeValue:y,getIn:SE,renameField:g,resetFieldState:A.resetFieldState,setIn:EE,shallowEqual:PE});return c.formState=t.formState,c.fields=t.fields,c.fieldSubscribers=t.fieldSubscribers,c.lastFormState=t.lastFormState,x(void 0,(function(){S(),C()})),o}}},b=a?Object.keys(a).reduce((function(e,t){return e[t]=k(t),e}),{}):{},w=function(e){return Object.keys(e.validators).reduce((function(t,n){var r=e.validators[Number(n)]();return r&&t.push(r),t}),[])},x=function(e,t){if(h)return d=!0,void t();var n=c.fields,r=c.formState,i=l({},n),a=Object.keys(i);if(u||a.some((function(e){return w(i[e]).length}))){var o=!1;if(e){var s=i[e];if(s){var f=s.validateFields;f&&(o=!0,a=f.length?f.concat(e):[e])}}var p,y={},g={},k={},b=[].concat(function(e){var t=[];if(u){var n=u(l({},c.formState.values));UE(n)?t.push(n.then((function(t){return e(t,!0)}))):e(n,!1)}return t}((function(e,t){t?g=e||{}:y=e||{}})),a.reduce((function(e,t){return e.concat(function(e,t){var n,r=[],i=w(e);return i.length&&(i.forEach((function(i){var a=i(SE(c.formState.values,e.name),c.formState.values,0===i.length||3===i.length?NE(c.formState,c.fields[e.name]):void 0);if(a&&UE(a)){e.validating=!0;var o=a.then((function(n){c.fields[e.name]&&(c.fields[e.name].validating=!1,t(n))}));r.push(o)}else n||(n=a)})),t(n)),r}(n[t],(function(e){k[t]=e})))}),[])),x=b.length>0,S=++v,_=Promise.all(b).then((p=S,function(e){return delete m[p],e}));x&&(m[S]=_);var I=function(e){var t=l({},o?r.errors:{},y,e?g:r.asyncErrors),s=function(e){a.forEach((function(r){if(n[r]){var a=SE(y,r),s=SE(t,r),c=w(i[r]).length,l=k[r];e(r,c&&l||u&&a||(a||o?void 0:s))}}))};s((function(e,n){t=EE(t,e,n)||{}})),s((function(e,n){if(n&&n[CE]){var r=SE(t,e),i=[].concat(r);i[CE]=n[CE],t=EE(t,e,i)}})),PE(r.errors,t)||(r.errors=t),e&&(r.asyncErrors=g),r.error=y[TE]};if(x&&(c.formState.validating++,t()),I(!1),t(),x){var E=function(){c.formState.validating--,t()};_.then((function(){v>S||I(!0)})).then(E,E)}}else t()},S=function(e){if(!f){var t=c.fields,n=c.fieldSubscribers,r=c.formState,i=l({},t),a=function(e){var t=i[e],a=NE(r,t),o=t.lastFieldState;t.lastFieldState=a;var u=n[e];u&&qE(u,a,o,RE,void 0===o)};e?a(e):Object.keys(i).forEach(a)}},_=function(){Object.keys(c.fields).forEach((function(e){c.fields[e].touched=!0}))},I=function(){var e=c.fields,t=c.formState,n=c.lastFormState,r=l({},e),i=Object.keys(r),a=!1,o=i.reduce((function(e,n){return!r[n].isEqual(SE(t.values,n),SE(t.initialValues||{},n))&&(a=!0,e[n]=!0),e}),{}),u=i.reduce((function(e,n){var i=t.lastSubmittedValues||{};return r[n].isEqual(SE(t.values,n),SE(i,n))||(e[n]=!0),e}),{});t.pristine=!a,t.dirtySinceLastSubmit=!(!t.lastSubmittedValues||!Object.values(u).some((function(e){return e}))),t.modifiedSinceLastSubmit=!(!t.lastSubmittedValues||!Object.keys(r).some((function(e){return r[e].modifiedSinceLastSubmit}))),t.valid=!t.error&&!t.submitError&&!BE(t.errors)&&!(t.submitErrors&&BE(t.submitErrors));var s=function(e){var t=e.active,n=e.dirtySinceLastSubmit,r=e.modifiedSinceLastSubmit,i=e.error,a=e.errors,o=e.initialValues,u=e.pristine,s=e.submitting,c=e.submitFailed,l=e.submitSucceeded,f=e.submitError,h=e.submitErrors,d=e.valid,p=e.validating,v=e.values;return{active:t,dirty:!u,dirtySinceLastSubmit:n,modifiedSinceLastSubmit:r,error:i,errors:a,hasSubmitErrors:!!(f||h&&BE(h)),hasValidationErrors:!(!i&&!BE(a)),invalid:!d,initialValues:o,pristine:u,submitting:s,submitFailed:c,submitSucceeded:l,submitError:f,submitErrors:h,valid:d,validating:p>0,values:v}}(t),f=i.reduce((function(e,t){return e.modified[t]=r[t].modified,e.touched[t]=r[t].touched,e.visited[t]=r[t].visited,e}),{modified:{},touched:{},visited:{}}),h=f.modified,d=f.touched,p=f.visited;return s.dirtyFields=n&&PE(n.dirtyFields,o)?n.dirtyFields:o,s.dirtyFieldsSinceLastSubmit=n&&PE(n.dirtyFieldsSinceLastSubmit,u)?n.dirtyFieldsSinceLastSubmit:u,s.modified=n&&PE(n.modified,h)?n.modified:h,s.touched=n&&PE(n.touched,d)?n.touched:d,s.visited=n&&PE(n.visited,p)?n.visited:p,n&&PE(n,s)?n:s},E=!1,T=!1,C=function e(){if(E)T=!0;else{if(E=!0,t&&t(I(),Object.keys(c.fields).reduce((function(e,t){return e[t]=c.fields[t],e}),{})),!f&&(!h||!p)){var n=c.lastFormState,r=I();r!==n&&(c.lastFormState=r,qE(c.subscribers,r,n,FE))}E=!1,T&&(T=!1,e())}},N=function(){return Object.keys(c.fields).forEach((function(e){return c.fields[e].modifiedSinceLastSubmit=!1}))};x(void 0,(function(){C()}));var A={batch:function(e){f++,e(),f--,S(),C()},blur:function(e){var t=c.fields,n=c.formState,r=t[e];r&&(delete n.active,t[e]=l({},r,{active:!1,touched:!0}),s?x(e,(function(){S(),C()})):(S(),C()))},change:function(e,t){var n=c.fields,r=c.formState;if(SE(r.values,e)!==t){y(c,e,(function(){return t}));var i=n[e];i&&(n[e]=l({},i,{modified:!0,modifiedSinceLastSubmit:!!r.lastSubmittedValues})),s?(S(),C()):x(e,(function(){S(),C()}))}},get destroyOnUnregister(){return!!n},set destroyOnUnregister(e){n=e},focus:function(e){var t=c.fields[e];t&&!t.active&&(c.formState.active=e,t.active=!0,t.visited=!0,S(),C())},mutators:b,getFieldState:function(e){var t=c.fields[e];return t&&t.lastFieldState},getRegisteredFields:function(){return Object.keys(c.fields)},getState:function(){return I()},initialize:function(e){var t=c.fields,n=c.formState,i=l({},t),a="function"===typeof e?e(n.values):e;r||(n.values=a);var o=r?Object.keys(i).reduce((function(e,t){return i[t].isEqual(SE(n.values,t),SE(n.initialValues||{},t))||(e[t]=SE(n.values,t)),e}),{}):{};n.initialValues=a,n.values=a,Object.keys(o).forEach((function(e){n.values=EE(n.values,e,o[e])||{}})),x(void 0,(function(){S(),C()}))},isValidationPaused:function(){return h},pauseValidation:function(e){void 0===e&&(e=!0),h=!0,p=e},registerField:function(e,t,r,i){void 0===r&&(r={}),c.fieldSubscribers[e]||(c.fieldSubscribers[e]={index:0,entries:{}});var a=c.fieldSubscribers[e].index++;c.fieldSubscribers[e].entries[a]={subscriber:VE(t),subscription:r,notified:!1},c.fields[e]||(c.fields[e]={active:!1,afterSubmit:i&&i.afterSubmit,beforeSubmit:i&&i.beforeSubmit,blur:function(){return A.blur(e)},change:function(t){return A.change(e,t)},data:i&&i.data||{},focus:function(){return A.focus(e)},isEqual:i&&i.isEqual||jE,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,name:e,touched:!1,valid:!0,validateFields:i&&i.validateFields,validators:{},validating:!1,visited:!1});var o=!1,u=i&&i.silent,s=function(){u?S(e):(C(),S())};if(i){o=!(!i.getValidator||!i.getValidator()),i.getValidator&&(c.fields[e].validators[a]=i.getValidator);var l=void 0===SE(c.formState.values,e);void 0===i.initialValue||!l&&SE(c.formState.values,e)!==SE(c.formState.initialValues,e)||(c.formState.initialValues=EE(c.formState.initialValues||{},e,i.initialValue),c.formState.values=EE(c.formState.values,e,i.initialValue),x(void 0,s)),void 0!==i.defaultValue&&void 0===i.initialValue&&void 0===SE(c.formState.initialValues,e)&&l&&(c.formState.values=EE(c.formState.values,e,i.defaultValue))}return o?x(void 0,s):s(),function(){var t=!1;c.fields[e]&&(t=!(!c.fields[e].validators[a]||!c.fields[e].validators[a]()),delete c.fields[e].validators[a]);var r=!!c.fieldSubscribers[e];r&&delete c.fieldSubscribers[e].entries[a];var i=r&&!Object.keys(c.fieldSubscribers[e].entries).length;i&&(delete c.fieldSubscribers[e],delete c.fields[e],t&&(c.formState.errors=EE(c.formState.errors,e,void 0)||{}),n&&(c.formState.values=EE(c.formState.values,e,void 0,!0)||{})),u||(t?x(void 0,(function(){C(),S()})):i&&C())}},reset:function(e){void 0===e&&(e=c.formState.initialValues),c.formState.submitting&&(c.formState.resetWhileSubmitting=!0),c.formState.submitFailed=!1,c.formState.submitSucceeded=!1,delete c.formState.submitError,delete c.formState.submitErrors,delete c.formState.lastSubmittedValues,A.initialize(e||{})},resetFieldState:function(e){c.fields[e]=l({},c.fields[e],{active:!1,lastFieldState:void 0,modified:!1,touched:!1,valid:!0,validating:!1,visited:!1}),x(void 0,(function(){S(),C()}))},restart:function(e){void 0===e&&(e=c.formState.initialValues),A.batch((function(){for(var t in c.fields)A.resetFieldState(t),c.fields[t]=l({},c.fields[t],{active:!1,lastFieldState:void 0,modified:!1,modifiedSinceLastSubmit:!1,touched:!1,valid:!0,validating:!1,visited:!1});A.reset(e)}))},resumeValidation:function(){h=!1,p=!1,d&&x(void 0,(function(){S(),C()})),d=!1},setConfig:function(e,i){switch(e){case"debug":t=i;break;case"destroyOnUnregister":n=i;break;case"initialValues":A.initialize(i);break;case"keepDirtyOnReinitialize":r=i;break;case"mutators":a=i,i?(Object.keys(b).forEach((function(e){e in i||delete b[e]})),Object.keys(i).forEach((function(e){b[e]=k(e)}))):Object.keys(b).forEach((function(e){delete b[e]}));break;case"onSubmit":o=i;break;case"validate":u=i,x(void 0,(function(){S(),C()}));break;case"validateOnBlur":s=i;break;default:throw new Error("Unrecognised option "+e)}},submit:function(){var e=c.formState;if(!e.submitting){if(delete e.submitErrors,delete e.submitError,e.lastSubmittedValues=l({},e.values),c.formState.error||BE(c.formState.errors))return _(),N(),c.formState.submitFailed=!0,C(),void S();var t=Object.keys(m);if(t.length)Promise.all(t.map((function(e){return m[Number(e)]}))).then(A.submit,console.error);else if(!Object.keys(c.fields).some((function(e){return c.fields[e].beforeSubmit&&!1===c.fields[e].beforeSubmit()}))){var n,r=!1,i=function(t){e.submitting=!1;var i=e.resetWhileSubmitting;return i&&(e.resetWhileSubmitting=!1),t&&BE(t)?(e.submitFailed=!0,e.submitSucceeded=!1,e.submitErrors=t,e.submitError=t[TE],_()):(i||(e.submitFailed=!1,e.submitSucceeded=!0),Object.keys(c.fields).forEach((function(e){return c.fields[e].afterSubmit&&c.fields[e].afterSubmit()}))),C(),S(),r=!0,n&&n(t),t};e.submitting=!0,e.submitFailed=!1,e.submitSucceeded=!1,e.lastSubmittedValues=l({},e.values),N();var a=o(e.values,A,i);if(!r){if(a&&UE(a))return C(),S(),a.then(i,(function(e){throw i(),e}));if(o.length>=3)return C(),S(),new Promise((function(e){n=e}));i(a)}}}},subscribe:function(e,t){if(!e)throw new Error("No callback given.");if(!t)throw new Error("No subscription provided. What values do you want to listen to?");var n=VE(e),r=c.subscribers,i=r.index++;r.entries[i]={subscriber:n,subscription:t,notified:!1};var a=I();return zE(n,t,a,a,FE,!0),function(){delete r.entries[i]}}};return A}var WE=["render","children","component"];function GE(e,t,n){var i=e.render,a=e.children,o=e.component,u=yE(e,WE);if(o)return r.createElement(o,Object.assign(t,u,{children:a,render:i}));if(i)return i(void 0===a?Object.assign(t,u):Object.assign(t,u,{children:a}));if("function"!==typeof a)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+n);return a(Object.assign(t,u))}function HE(e,t,n){void 0===n&&(n=function(e,t){return e===t});var i=r.useRef(e);r.useEffect((function(){n(e,i.current)||(t(),i.current=e)}))}var QE=function(e,t){if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),a=0;a<n.length;a++){var o=n[a];if(!i(o)||e[o]!==t[o])return!1}return!0},$E=function(e){return!(!e||"function"!==typeof e.stopPropagation)},YE=r.createContext();function XE(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e})),t}var JE=function(e,t,n){n.forEach((function(n){Object.defineProperty(e,n,{get:function(){return t[n]},enumerable:!0})}))},ZE=function(e,t){return JE(e,t,["active","dirty","dirtyFields","dirtySinceLastSubmit","dirtyFieldsSinceLastSubmit","error","errors","hasSubmitErrors","hasValidationErrors","initialValues","invalid","modified","modifiedSinceLastSubmit","pristine","submitError","submitErrors","submitFailed","submitSucceeded","submitting","touched","valid","validating","values","visited"])},eT=["debug","decorators","destroyOnUnregister","form","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"],tT={"final-form":"4.20.7","react-final-form":"6.5.8"},nT=LE.reduce((function(e,t){return e[t]=!0,e}),{});function rT(e){var t=e.debug,n=e.decorators,i=void 0===n?[]:n,a=e.destroyOnUnregister,o=e.form,u=e.initialValues,s=e.initialValuesEqual,c=e.keepDirtyOnReinitialize,f=e.mutators,h=e.onSubmit,d=e.subscription,p=void 0===d?nT:d,v=e.validate,m=e.validateOnBlur,y=yE(e,eT),g={debug:t,destroyOnUnregister:a,initialValues:u,keepDirtyOnReinitialize:c,mutators:f,onSubmit:h,validate:v,validateOnBlur:m},k=function(e){var t=r.useRef();return t.current||(t.current=e()),t.current}((function(){var e=o||KE(g);return e.pauseValidation(),e})),b=r.useState((function(){var e={};return k.subscribe((function(t){e=t}),p)(),e})),w=b[0],x=b[1],S=XE(w);r.useEffect((function(){k.isValidationPaused()&&k.resumeValidation();var e=[k.subscribe((function(e){QE(e,S.current)||x(e)}),p)].concat(i?i.map((function(e){return e(k)})):[]);return function(){k.pauseValidation(),e.reverse().forEach((function(e){return e()}))}}),i),HE(t,(function(){k.setConfig("debug",t)})),HE(a,(function(){k.destroyOnUnregister=!!a})),HE(c,(function(){k.setConfig("keepDirtyOnReinitialize",c)})),HE(u,(function(){k.setConfig("initialValues",u)}),s||QE),HE(f,(function(){k.setConfig("mutators",f)})),HE(h,(function(){k.setConfig("onSubmit",h)})),HE(v,(function(){k.setConfig("validate",v)})),HE(m,(function(){k.setConfig("validateOnBlur",m)}));var _={form:l({},k,{reset:function(e){$E(e)?k.reset():k.reset(e)}}),handleSubmit:function(e){return e&&("function"===typeof e.preventDefault&&e.preventDefault(),"function"===typeof e.stopPropagation&&e.stopPropagation()),k.submit()}};return ZE(_,w),r.createElement(YE.Provider,{value:k},GE(l({},y,{__versions:tT}),_,"ReactFinalForm"))}function iT(e){var t=r.useContext(YE);if(!t)throw new Error((e||"useForm")+" must be used inside of a <Form> component");return t}var aT="undefined"!==typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product;function oT(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e})),r.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(null,n)}),[])}var uT=AE.reduce((function(e,t){return e[t]=!0,e}),{}),sT=function(e,t){return void 0===e?"":e},cT=function(e,t){return""===e?void 0:e},lT=function(e,t){return e===t};function fT(e,t){void 0===t&&(t={});var n=t,i=n.afterSubmit,a=n.allowNull,o=n.component,u=n.data,s=n.defaultValue,c=n.format,l=void 0===c?sT:c,f=n.formatOnBlur,h=n.initialValue,d=n.multiple,p=n.parse,v=void 0===p?cT:p,m=n.subscription,y=void 0===m?uT:m,g=n.type,k=n.validateFields,b=n.value,w=iT("useField"),x=XE(t),S=function(t,n){return w.registerField(e,t,y,{afterSubmit:i,beforeSubmit:function(){var t=x.current,n=t.beforeSubmit,r=t.formatOnBlur,i=t.format,a=void 0===i?sT:i;if(r){var o=w.getFieldState(e).value,u=a(o,e);u!==o&&w.change(e,u)}return n&&n()},data:u,defaultValue:s,getValidator:function(){return x.current.validate},initialValue:h,isEqual:function(e,t){return(x.current.isEqual||lT)(e,t)},silent:n,validateFields:k})},_=r.useRef(!0),I=r.useState((function(){var e={},t=w.destroyOnUnregister;return w.destroyOnUnregister=!1,S((function(t){e=t}),!0)(),w.destroyOnUnregister=t,e})),E=I[0],T=I[1];r.useEffect((function(){return S((function(e){_.current?_.current=!1:T(e)}),!1)}),[e,u,s,h]);var C={};!function(e,t){JE(e,t,["active","data","dirty","dirtySinceLastSubmit","error","initial","invalid","length","modified","modifiedSinceLastSubmit","pristine","submitError","submitFailed","submitSucceeded","submitting","touched","valid","validating","visited"])}(C,E);var N={name:e,get value(){var t=E.value;return f?"input"===o&&(t=sT(t)):t=l(t,e),null!==t||a||(t=""),"checkbox"===g||"radio"===g?b:"select"===o&&d?t||[]:t},get checked(){var t=E.value;return"checkbox"===g?(t=l(t,e),void 0===b?!!t:!(!Array.isArray(t)||!~t.indexOf(b))):"radio"===g?l(t,e)===b:void 0},onBlur:oT((function(e){if(E.blur(),f){var t=w.getFieldState(E.name);E.change(l(t.value,E.name))}})),onChange:oT((function(t){var n=t&&t.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,a=i.type,o=i.value,u=i.checked;switch(a){case"checkbox":if(void 0!==n){if(u)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var s=t.indexOf(n);return s<0?t:t.slice(0,s).concat(t.slice(s+1))}return!!u;case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return o}}(t,E.value,b,aT):t;E.change(v(n,e))})),onFocus:oT((function(e){return E.focus()}))};return d&&(N.multiple=d),void 0!==g&&(N.type=g),{input:N,meta:C}}var hT=["afterSubmit","allowNull","beforeSubmit","children","component","data","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"],dT=r.forwardRef((function(e,t){var n=e.afterSubmit,i=e.allowNull,a=e.beforeSubmit,o=e.children,u=e.component,s=e.data,c=e.defaultValue,f=e.format,h=e.formatOnBlur,d=e.initialValue,p=e.isEqual,v=e.multiple,m=e.name,y=e.parse,g=e.subscription,k=e.type,b=e.validate,w=e.validateFields,x=e.value,S=yE(e,hT),_=fT(m,{afterSubmit:n,allowNull:i,beforeSubmit:a,children:o,component:u,data:s,defaultValue:c,format:f,formatOnBlur:h,initialValue:d,isEqual:p,multiple:v,parse:y,subscription:g,type:k,validate:b,validateFields:w,value:x});if("function"===typeof o)return o(l({},_,S));if("string"===typeof u)return r.createElement(u,l({},_.input,{children:o,ref:t},S));if(!m)throw new Error("prop name cannot be undefined in <Field> component");return GE(l({children:o,component:u,ref:t},S),_,"Field("+m+")")}));var pT=function(e){var t=e.scroll,n=e.sendTo;function r(){return(r=Qe(Ge().mark((function e(r){var i,a,o,u;return Ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pE.currentUser,a=i.uid,o=i.photoURL,u=i.displayName,e.next=3,dE.collection("textMessages").add({text:r.newMessageText,uid:a,photoURL:o,displayName:u,createdAt:kn.firestore.FieldValue.serverTimestamp(),sendTo:n});case 3:t.current.scrollIntoView({behavior:"smooth"}),r.newMessageText="";case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,vE.jsx)(vE.Fragment,{children:(0,vE.jsx)(rT,{onSubmit:function(e){return r.apply(this,arguments)},render:function(e){var t=e.handleSubmit;return(0,vE.jsxs)("form",{onSubmit:t,children:[(0,vE.jsx)(dT,{name:"newMessageText",component:"input",placeholder:"Enter your message"}),(0,vE.jsx)("div",{children:(0,vE.jsx)("button",{children:"Send Message"})})]})}})})},vT=function(e){var t=(0,r.useRef)(),n=c((0,r.useState)([]),2),i=n[0],a=n[1],o=c((0,r.useState)(!0),2),u=o[0],s=o[1],l=B().chatId,f=pE.currentUser.uid;return(0,r.useEffect)((function(){dE.collection("textMessages").orderBy("createdAt").onSnapshot((function(e){a(e.docs.map((function(e){return e.data().uid===f||e.data().uid===l?e.data():[]}))),s(!1)}))}),[l]),u?(0,vE.jsx)("h2",{children:"Messages are loading..."}):(0,vE.jsxs)(vE.Fragment,{children:[(0,vE.jsx)("div",{className:re.Message,children:i.map((function(e){if(0!==e.length&&(e.sendTo===l||e.sendTo===f))return(0,vE.jsxs)("div",{children:[(0,vE.jsx)(mE,{userName:e.displayName,photoURL:e.photoURL,message:e.text,uid:e.uid}),(0,vE.jsx)("div",{ref:t})]},e.createdAt)}))}),(0,vE.jsx)("div",{className:re.Send_Form,children:(0,vE.jsx)(pT,{sendTo:l,scroll:t})})]})},mT=n(248),yT=n(327),gT=n(164);var kT=function(e){e()},bT=function(){return kT},wT=r.createContext(null);var xT=function(){throw new Error("uSES not initialized!")};var ST=n(110),_T=n.n(ST),IT=n(900),ET=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function TT(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function CT(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=yE(t,ET);return TT(n(e,a),r(e,a),i(e,a),e,a)}function NT(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function AT(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function PT(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=AT(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=AT(i),i=r(t,n)),i},r}}function OT(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function DT(e){return e&&"object"===typeof e?NT((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):e?"function"===typeof e?PT(e):OT(e,"mapDispatchToProps"):NT((function(e){return{dispatch:e}}))}function RT(e){return e?"function"===typeof e?PT(e):OT(e,"mapStateToProps"):NT((function(){return{}}))}function LT(e,t,n){return l({},n,e,t)}function MT(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):OT(e,"mergeProps"):function(){return LT}}var FT={notify:function(){},get:function(){return[]}};function VT(e,t){var n,r=FT;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=bT(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=FT)},getListeners:function(){return r}};return o}var UT=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?r.useLayoutEffect:r.useEffect;function jT(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function BT(e,t){if(jT(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!jT(e[n[i]],t[n[i]]))return!1;return!0}var zT=["reactReduxForwardedRef"],qT=xT,KT=[null,null];function WT(e,t,n){UT((function(){return e.apply(void 0,Y(t))}),n)}function GT(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function HT(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,h=null,d=function(){if(!f&&u.current){var e,n,d=t.getState();try{e=r(d,i.current)}catch(p){n=p,h=p}n||(h=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function QT(e,t){return e===t}var $T=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(i.pure,i.areStatesEqual),o=void 0===a?QT:a,u=i.areOwnPropsEqual,s=void 0===u?BT:u,f=i.areStatePropsEqual,h=void 0===f?BT:f,d=i.areMergedPropsEqual,p=void 0===d?BT:d,v=i.forwardRef,m=void 0!==v&&v,y=i.context,g=void 0===y?wT:y,k=g,b=RT(e),w=DT(t),x=MT(n),S=Boolean(e),_=function(e){var t=e.displayName||e.name||"Component",n="Connect(".concat(t,")"),i={shouldHandleStateChanges:S,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:b,initMapDispatchToProps:w,initMergeProps:x,areStatesEqual:o,areStatePropsEqual:h,areOwnPropsEqual:s,areMergedPropsEqual:p};function a(t){var n=(0,r.useMemo)((function(){var e=t.reactReduxForwardedRef,n=yE(t,zT);return[t.context,e,n]}),[t]),a=c(n,3),o=a[0],u=a[1],s=a[2],f=(0,r.useMemo)((function(){return o&&o.Consumer&&(0,IT.isContextConsumer)(r.createElement(o.Consumer,null))?o:k}),[o,k]),h=(0,r.useContext)(f),d=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),p=Boolean(h)&&Boolean(h.store);var v=d?t.store:h.store,m=p?h.getServerState:v.getState,y=(0,r.useMemo)((function(){return CT(v.dispatch,i)}),[v]),g=(0,r.useMemo)((function(){if(!S)return KT;var e=VT(v,d?void 0:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,d,h]),b=c(g,2),w=b[0],x=b[1],_=(0,r.useMemo)((function(){return d?h:l({},h,{subscription:w})}),[d,h,w]),I=(0,r.useRef)(),E=(0,r.useRef)(s),T=(0,r.useRef)(),C=(0,r.useRef)(!1),N=((0,r.useRef)(!1),(0,r.useRef)(!1)),A=(0,r.useRef)();UT((function(){return N.current=!0,function(){N.current=!1}}),[]);var P,O=(0,r.useMemo)((function(){return function(){return T.current&&s===E.current?T.current:y(v.getState(),s)}}),[v,s]),D=(0,r.useMemo)((function(){return function(e){return w?HT(S,v,w,y,E,I,C,N,T,x,e):function(){}}}),[w]);WT(GT,[E,I,C,s,T,x]);try{P=qT(D,O,m?function(){return y(m(),s)}:O)}catch(L){throw A.current&&(L.message+="\nThe error may be correlated with this previous error:\n".concat(A.current.stack,"\n\n")),L}UT((function(){A.current=void 0,T.current=void 0,I.current=P}));var R=(0,r.useMemo)((function(){return r.createElement(e,l({},P,{ref:u}))}),[u,e,P]);return(0,r.useMemo)((function(){return S?r.createElement(f.Provider,{value:_},R):R}),[f,R,_])}var u=r.memo(a);if(u.WrappedComponent=e,u.displayName=a.displayName=n,m){var f=r.forwardRef((function(e,t){return r.createElement(u,l({},e,{reactReduxForwardedRef:t}))}));return f.displayName=n,f.WrappedComponent=e,_T()(f,e)}return _T()(u,e)};return _};var YT=function(e){var t=e.store,n=e.context,i=e.children,a=e.serverState,o=(0,r.useMemo)((function(){var e=VT(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0}}),[t,a]),u=(0,r.useMemo)((function(){return t.getState()}),[t]);UT((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=n||wT;return r.createElement(s.Provider,{value:o},i)};var XT;!function(e){e}(yT.useSyncExternalStoreWithSelector),function(e){qT=e}(mT.useSyncExternalStore),XT=gT.unstable_batchedUpdates,kT=XT;var JT=$T((function(e){return{MessagesPage:e.MessagesPage}}),{sendMessage:function(e){return{type:ee,newMessageText:e}}})((function(e){return(0,vE.jsx)(vE.Fragment,{children:(0,vE.jsx)(vT,{MessagesPage:e.MessagesPage,onSendMessage:e.sendMessage})})})),ZT=function(){return(0,vE.jsx)("div",{children:(0,vE.jsx)("button",{onClick:function(){var e=new kn.auth.GoogleAuthProvider;pE.signInWithPopup(e)},children:"Sign In With Google"})})};function eC(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function tC(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var nC=function(){return nC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},nC.apply(this,arguments)},rC=function(e){return{loading:void 0===e||null===e,value:e}},iC=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return nC(nC({},e),{error:t.error,loading:!1,value:void 0});case"reset":return rC(t.defaultValue);case"value":return nC(nC({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),rC(t)),i=n[0],a=n[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},aC=function(e,t){var n=iC((function(){return e.currentUser})),i=n.error,a=n.loading,o=n.setError,u=n.setValue,s=n.value;(0,r.useEffect)((function(){var n=function(e,t,n,r){return We(e).onAuthStateChanged(t,n,r)}(e,(function(e){return eC(void 0,void 0,void 0,(function(){var n;return tC(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){n()}}),[e]);var c=[s,a,i];return(0,r.useMemo)((function(){return c}),c)},oC=function(){var e=pE.currentUser.displayName;return(0,vE.jsxs)("div",{children:[e,(0,vE.jsx)("button",{onClick:function(){return pE.signOut()},children:"Sign Out"})]})};function uC(){return uC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uC.apply(this,arguments)}function sC(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var cC=["onClick","reloadDocument","replace","state","target","to"];function lC(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else E(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function x(e){return"string"===typeof e?e:y(e)}function S(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function _(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function I(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function E(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(n,a){var o=t.Push,u=S(n,a);if(I(o,u,(function(){e(n,a)}))){var s=_(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}E(o)}},replace:function e(n,r){var a=t.Replace,o=S(n,r);if(I(a,o,(function(){e(n,r)}))){var u=_(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(G,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}var fC=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=sC(e,cC),f=M(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=U(),s=V(),c=z(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(s)===y(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",uC({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));var hC="Chats_ChatsPage__f+YPc",dC="Chats_Chats__z1gh4",pC="Chats_Messages__1W9DN",vC="Chats_ChatItem__Zp7W8",mC="Chats_ChatItemActive__gJCdx",yC="Chats_user_avatar__aHiXv",gC="Chats_user_name__QOI5H",kC=function(e){var t="/MessagesPage/"+e.id;return(0,vE.jsx)(vE.Fragment,{children:(0,vE.jsx)(fC,{to:t,children:(0,vE.jsxs)("div",{className:e.isActiveUser?mC:vC,children:[(0,vE.jsx)("img",{className:yC,src:e.photoURL,alt:"user_avatar"}),(0,vE.jsx)("div",{className:gC,children:e.name})]})})})},bC=function(e){var t=c((0,r.useState)([]),2),n=t[0],i=t[1],a=c((0,r.useState)(!1),2),o=a[0],u=a[1],s=B().chatId;return(0,r.useEffect)((function(){var e=pE.currentUser,t=e.uid,r=e.photoURL,a=e.displayName;dE.collection("users").get().then((function(e){e.docs.forEach((function(e){0===n.length&&e.data().uid!==t&&i((function(t){return[].concat(Y(t),[e.data()])})),e.data().uid===t&&u(!0)}))})),!o&&n.length>0&&dE.collection("users").add({uid:t,photoURL:r,displayName:a})}),[n,o]),(0,vE.jsx)(vE.Fragment,{children:(0,vE.jsxs)("div",{className:hC,children:[(0,vE.jsx)("div",{className:dC,children:n.map((function(e){return(0,vE.jsx)(kC,{isActiveUser:e.uid===s,id:e.uid,name:e.displayName,photoURL:e.photoURL})}))}),(0,vE.jsx)("div",{className:pC,children:(0,vE.jsx)(K,{})})]})})},wC=function(){var e=c(aC(pE),1)[0];return(0,vE.jsx)(vE.Fragment,{children:e?(0,vE.jsxs)("main",{className:"container",children:[(0,vE.jsx)(oC,{}),(0,vE.jsx)(bC,{})]}):(0,vE.jsx)(ZT,{})})};var xC=function(){return(0,vE.jsx)("div",{className:"App",children:(0,vE.jsx)(H,{children:(0,vE.jsx)(W,{path:"/",element:(0,vE.jsx)(wC,{}),children:(0,vE.jsx)(W,{path:"MessagesPage/:chatId",element:(0,vE.jsx)(JT,{})})})})})};function SC(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _C(e){return!!e&&!!e[dN]}function IC(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===pN}(e)||Array.isArray(e)||!!e[hN]||!!e.constructor[hN]||OC(e)||DC(e))}function EC(e,t,n){void 0===n&&(n=!1),0===TC(e)?(n?Object.keys:vN)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function TC(e){var t=e[dN];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:OC(e)?2:DC(e)?3:0}function CC(e,t){return 2===TC(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NC(e,t){return 2===TC(e)?e.get(t):e[t]}function AC(e,t,n){var r=TC(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function PC(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function OC(e){return sN&&e instanceof Map}function DC(e){return cN&&e instanceof Set}function RC(e){return e.o||e.t}function LC(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=mN(e);delete t[dN];for(var n=vN(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function MC(e,t){return void 0===t&&(t=!1),VC(e)||_C(e)||!IC(e)||(TC(e)>1&&(e.set=e.add=e.clear=e.delete=FC),Object.freeze(e),t&&EC(e,(function(e,t){return MC(t,!0)}),!0)),e}function FC(){SC(2)}function VC(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function UC(e){var t=yN[e];return t||SC(18,e),t}function jC(e,t){yN[e]||(yN[e]=t)}function BC(){return oN}function zC(e,t){t&&(UC("Patches"),e.u=[],e.s=[],e.v=t)}function qC(e){KC(e),e.p.forEach(GC),e.p=null}function KC(e){e===oN&&(oN=e.l)}function WC(e){return oN={p:[],l:oN,h:e,m:!0,_:0}}function GC(e){var t=e[dN];0===t.i||1===t.i?t.j():t.O=!0}function HC(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||UC("ES5").S(t,e,r),r?(n[dN].P&&(qC(t),SC(4)),IC(e)&&(e=QC(t,e),t.l||YC(t,e)),t.u&&UC("Patches").M(n[dN].t,e,t.u,t.s)):e=QC(t,n,[]),qC(t),t.u&&t.v(t.u,t.s),e!==fN?e:void 0}function QC(e,t,n){if(VC(t))return t;var r=t[dN];if(!r)return EC(t,(function(i,a){return $C(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return YC(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=LC(r.k):r.o;EC(3===r.i?new Set(i):i,(function(t,a){return $C(e,r,i,t,a,n)})),YC(e,i,!1),n&&e.u&&UC("Patches").R(r,n,e.u,e.s)}return r.o}function $C(e,t,n,r,i,a){if(_C(i)){var o=QC(e,i,a&&t&&3!==t.i&&!CC(t.D,r)?a.concat(r):void 0);if(AC(n,r,o),!_C(o))return;e.m=!1}if(IC(i)&&!VC(i)){if(!e.h.F&&e._<1)return;QC(e,i),t&&t.A.l||YC(e,i)}}function YC(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&MC(t,n)}function XC(e,t){var n=e[dN];return(n?RC(n):e)[t]}function JC(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function ZC(e){e.P||(e.P=!0,e.l&&ZC(e.l))}function eN(e){e.o||(e.o=LC(e.t))}function tN(e,t,n){var r=OC(t)?UC("MapSet").N(t,n):DC(t)?UC("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:BC(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=gN;n&&(i=[r],a=kN);var o=Proxy.revocable(i,a),u=o.revoke,s=o.proxy;return r.k=s,r.j=u,s}(t,n):UC("ES5").J(t,n);return(n?n.A:BC()).p.push(r),r}function nN(e){return _C(e)||SC(22,e),function e(t){if(!IC(t))return t;var n,r=t[dN],i=TC(t);if(r){if(!r.P&&(r.i<4||!UC("ES5").K(r)))return r.t;r.I=!0,n=rN(t,i),r.I=!1}else n=rN(t,i);return EC(n,(function(t,i){r&&NC(r.t,t)===i||AC(n,t,e(i))})),3===i?new Set(n):n}(e)}function rN(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return LC(e)}function iN(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[dN];return gN.get(t,e)},set:function(t){var n=this[dN];gN.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][dN];if(!i.P)switch(i.i){case 5:r(i)&&ZC(i);break;case 4:n(i)&&ZC(i)}}}function n(e){for(var t=e.t,n=e.k,r=vN(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==dN){var o=t[a];if(void 0===o&&!CC(t,a))return!0;var u=n[a],s=u&&u[dN];if(s?s.t!==o:!PC(u,o))return!0}}var c=!!t[dN];return r.length!==vN(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};jC("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=mN(n);delete a[dN];for(var o=vN(a),u=0;u<o.length;u++){var s=o[u];a[s]=e(s,t||!!a[s].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:BC(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,dN,{value:a,writable:!0}),i},S:function(e,n,i){i?_C(n)&&n[dN].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[dN];if(n){var i=n.t,a=n.k,o=n.D,u=n.i;if(4===u)EC(a,(function(t){t!==dN&&(void 0!==i[t]||CC(i,t)?o[t]||e(a[t]):(o[t]=!0,ZC(n)))})),EC(i,(function(e){void 0!==a[e]||CC(a,e)||(o[e]=!1,ZC(n))}));else if(5===u){if(r(n)&&(ZC(n),o.length=!0),a.length<i.length)for(var s=a.length;s<i.length;s++)o[s]=!1;else for(var c=i.length;c<a.length;c++)o[c]=!0;for(var l=Math.min(a.length,i.length),f=0;f<l;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var aN,oN,uN="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),sN="undefined"!=typeof Map,cN="undefined"!=typeof Set,lN="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,fN=uN?Symbol.for("immer-nothing"):((aN={})["immer-nothing"]=!0,aN),hN=uN?Symbol.for("immer-draftable"):"__$immer_draftable",dN=uN?Symbol.for("immer-state"):"__$immer_state",pN=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),vN="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,mN=Object.getOwnPropertyDescriptors||function(e){var t={};return vN(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},yN={},gN={get:function(e,t){if(t===dN)return e;var n=RC(e);if(!CC(n,t))return function(e,t,n){var r,i=JC(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!IC(r)?r:r===XC(e.t,t)?(eN(e),e.o[t]=tN(e.A.h,r,e)):r},has:function(e,t){return t in RC(e)},ownKeys:function(e){return Reflect.ownKeys(RC(e))},set:function(e,t,n){var r=JC(RC(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=XC(RC(e),t),a=null==i?void 0:i[dN];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(PC(n,i)&&(void 0!==n||CC(e.t,t)))return!0;eN(e),ZC(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==XC(e.t,t)||t in e.t?(e.D[t]=!1,eN(e),ZC(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=RC(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){SC(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){SC(12)}},kN={};EC(gN,(function(e,t){kN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),kN.deleteProperty=function(e,t){return kN.set.call(this,e,t,void 0)},kN.set=function(e,t,n){return gN.set.call(this,e[0],t,n,e[0])};var bN=function(){function e(e){var t=this;this.g=lN,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=arguments[u];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&SC(6),void 0!==r&&"function"!=typeof r&&SC(7),IC(e)){var u=WC(t),s=tN(t,e,void 0),c=!0;try{o=n(s),c=!1}finally{c?qC(u):KC(u)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return zC(u,r),HC(e,u)}),(function(e){throw qC(u),e})):(zC(u,r),HC(o,u))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===fN&&(o=void 0),t.F&&MC(o,!0),r){var l=[],f=[];UC("Patches").M(e,o,l,f),r(l,f)}return o}SC(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){IC(e)||SC(8),_C(e)&&(e=nN(e));var t=WC(this),n=tN(this,e,void 0);return n[dN].C=!0,KC(t),n},t.finishDraft=function(e,t){var n=(e&&e[dN]).A;return zC(n,t),HC(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!lN&&SC(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=UC("Patches").$;return _C(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),wN=new bN;wN.produce,wN.produceWithPatches.bind(wN),wN.setAutoFreeze.bind(wN),wN.setUseProxies.bind(wN),wN.applyPatches.bind(wN),wN.createDraft.bind(wN),wN.finishDraft.bind(wN);function xN(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var SN="function"===typeof Symbol&&Symbol.observable||"@@observable",_N=function(){return Math.random().toString(36).substring(7).split("").join(".")},IN={INIT:"@@redux/INIT"+_N(),REPLACE:"@@redux/REPLACE"+_N(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_N()}};function EN(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function TN(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(xN(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(xN(1));return n(TN)(e,t)}if("function"!==typeof e)throw new Error(xN(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(xN(3));return a}function f(e){if("function"!==typeof e)throw new Error(xN(4));if(s)throw new Error(xN(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(xN(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!EN(e))throw new Error(xN(7));if("undefined"===typeof e.type)throw new Error(xN(8));if(s)throw new Error(xN(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(xN(10));i=e,h({type:IN.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(xN(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[SN]=function(){return this},e}return h({type:IN.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[SN]=p,r}function CN(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:IN.INIT}))throw new Error(xN(12));if("undefined"===typeof n(void 0,{type:IN.PROBE_UNKNOWN_ACTION()}))throw new Error(xN(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(xN(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}function NN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function AN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(xN(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=NN.apply(void 0,a)(n.dispatch),Z(Z({},n),{},{dispatch:r})}}}function PN(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var ON=PN();ON.withExtraArgument=PN;var DN=ON,RN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LN=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},MN=Object.defineProperty,FN=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),VN=Object.prototype.hasOwnProperty,UN=Object.prototype.propertyIsEnumerable,jN=function(e,t,n){return t in e?MN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},BN=function(e,t){for(var n in t||(t={}))VN.call(t,n)&&jN(e,n,t[n]);if(FN)for(var r=0,i=FN(t);r<i.length;r++){n=i[r];UN.call(t,n)&&jN(e,n,t[n])}return e},zN="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?NN:NN.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function qN(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var KN=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return RN(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,LN([void 0],e[0].concat(this)))):new(t.bind.apply(t,LN([void 0],e.concat(this))))},t}(Array);function WN(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new KN);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(DN.withExtraArgument(n.extraArgument)):r.push(DN));0;return r}(e)}}function GN(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return BN(BN({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}Object.assign;var HN="listenerMiddleware";GN(HN+"/add"),GN(HN+"/removeAll"),GN(HN+"/remove");iN();var QN=function(e){var t,n=WN(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,u=void 0===o?n():o,s=r.devTools,c=void 0===s||s,l=r.preloadedState,f=void 0===l?void 0:l,h=r.enhancers,d=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!qN(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=CN(a)}var p=u;"function"===typeof p&&(p=p(n));var v=AN.apply(void 0,p),m=NN;c&&(m=zN(BN({trace:!1},"object"===typeof c&&c)));var y=[v];return Array.isArray(d)?y=LN([v],d):"function"===typeof d&&(y=d(y)),TN(t,f,m.apply(void 0,y))}({reducer:CN({MessagesPage:ne})});window.store=QN;var $N=QN;i.createRoot(document.getElementById("root")).render((0,vE.jsx)(lC,{children:(0,vE.jsx)(YT,{store:$N,children:(0,vE.jsx)(xC,{})})}))}()}();
//# sourceMappingURL=main.e0fcbff0.js.map